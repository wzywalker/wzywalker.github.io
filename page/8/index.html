<!DOCTYPE HTML>
<html lang="english">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="true">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Maverick,AlanDecode,Galileo,blog" />
    <meta name="generator" content="Maverick 1.2.1" />
    <meta name="template" content="Prism" />
    <link rel="alternate" type="application/rss+xml" title="walker's code blog &raquo; RSS 2.0" href="/feed/index.xml" />
    <link rel="alternate" type="application/atom+xml" title="walker's code blog &raquo; ATOM 1.0" href="/feed/atom/index.xml" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/prism-b9d78ff38a.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/ExSearch/ExSearch-182e5a8869.css">
    <link href="https://fonts.googleapis.com/css?family=Fira+Code&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
    <script>
        var ExSearchConfig = {
            root: "",
            api: "https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/40cba7715e63db76fe2969c8abddf3cd.json"
        }

    </script>
    
<title>walker's code blog</title>
<meta name="author" content="AlanDecode" />
<meta name="description" content="coder, reader" />
<meta property="og:title" content="walker's code blog" />
<meta property="og:description" content="coder, reader" />
<meta property="og:site_name" content="walker's code blog" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/page/8/" />
<meta property="og:image" content="walker's code blog" />
<meta name="twitter:title" content="walker's code blog" />
<meta name="twitter:description" content="coder, reader" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/android-chrome-512x512.png" />


    
</head>

<body>
    <div class="container prism-container">
        <header class="prism-header" id="prism__header">
            <h1 class="text-uppercase brand"><a class="no-link" href="/" target="_self">walker's code blog</a></h1>
            <p>coder, reader</p>
            <nav class="prism-nav"><ul><li><a class="no-link text-uppercase " href="/" target="_self">Home</a></li><li><a class="no-link text-uppercase " href="/archives/" target="_self">Archives</a></li><li><a class="no-link text-uppercase " href="/about/" target="_self">About</a></li><li><a href="#" target="_self" class="search-form-input no-link text-uppercase">Search</a></li></ul></nav>
        </header>
        <div class="prism-wrapper" id="prism__wrapper">
            
<main>    
    

<section id="prism__post-list" class="prism-section row">
    
    <article class="yue prism-post-item col-md-8 offset-md-2">
        <h1 class="prism-post-title"><a class="no-link" href="/archives/%E7%90%86%E8%A7%A3__bridge/" target="_self">ç†è§£__bridge</a></h1>
        <div class="prism-post-time">
            <a class="no-link" href="/archives/%E7%90%86%E8%A7%A3__bridge/" target="_self">
                <time class="text-uppercase">
                    June 14 2018
                </time>
            </a>
        </div>
        <div class="prism-content"><p>æ¯”è¾ƒå—ç”¨, å…¨æ–‡è½¬è½½, <a href="https://abson.github.io/2016/08/19/Object-C-%E7%90%86%E8%A7%A3%E6%A1%A5%E6%8E%A5/">åŸæ–‡ç‚¹æ­¤</a></p><p>##ä¸ºä»€ä¹ˆä½¿ç”¨è¦ä½¿ç”¨ Object-C++</p><p>åœ¨ iOS å¼€å‘å½“ä¸­ï¼Œéš¾å…ä¼šä½¿ç”¨åˆ° OC è·Ÿ C++æ··ç¼–çš„æƒ…å†µï¼Œä¸€æ˜¯ä¸ºäº†ç¨‹åºå¯¹è´Ÿè´£è®¡ç®—æ€§èƒ½çš„æé«˜ï¼ŒäºŒæ˜¯å› ä¸ºæŸäº›ä¸‰æ–¹å¼€æºåº“æ˜¯ç”¨ C++ æ¥å†™çš„ï¼Œè¿™ä¸¤ä¸ªåŸå› ä¹Ÿæ˜¯è®©æˆ‘ä¸‹å†³å¿ƒå­¦å¥½ C++ çš„å› ç´ ï¼Œæ¯•ç«Ÿå¼€æºæ‰æ˜¯ç‹é“ï¼Œä¸€ç›´åªå†™ç€ OC å´ä¸èƒ½çª¥å…¶ç©¶ç«Ÿï¼Œç¡®å®éš¾å—ï¼Œè®©åªèƒ½è®©äººåœç•™åœ¨é—¨å¤–ï¼Œåäº•è§‚å¤©ã€‚</p><p>##ä»€ä¹ˆæ˜¯æ¡¥æ¥ ï¼Ÿ</p><p>æ¡¥æ¥ï¼Œæ˜¯ object-c åœ¨ ARC ç¯å¢ƒä¸‹å¼€å‘å‡ºæ¥çš„ä¸€ç§ç”¨ä½œè½¬æ¢ C æŒ‡é’ˆè·Ÿ OC ç±»æŒ‡é’ˆçš„ä¸€ç§è½¬æ¢æŠ€æœ¯ã€‚
å½“ç„¶ï¼Œè¿™ç§æŠ€æœ¯åœ¨ MRC ä¸­æ˜¯ä¸å­˜åœ¨çš„ï¼Œä¹Ÿå°±æ˜¯æ¡¥æ¥æ˜¯ ARC çš„è¿å¸¦äº§ç‰©ï¼Œå› ä¸º ARC å°±æ˜¯è§£æ”¾äº†æˆ‘ä»¬ç¨‹åºå‘˜çš„åŒæ‰‹ï¼Œå½“ç„¶å¯¹å†…å­˜çš„æ¦‚å¿µåˆæ·¡åŒ–äº†ï¼Œæ‰€ä»¥åœ¨ ARC æœªè¢«ä¸šç•Œæ¥å—ä¹‹å‰å¤šå°‘ä¹Ÿæ˜¯å› ä¸ºè¿™ä¸ªæ¡¥æ¥è®©äººä»¬æ„Ÿè§‰æ¶å¿ƒã€‚</p><p>##æ¡¥æ¥ç”¨åˆ°çš„3ä¸ªæ–¹æ³•ï¼š</p><blockquote>
<p>(__bridge &lt;#type#&gt;)&lt;#expression#&gt;</p></blockquote>
<p>(__bridge_retained &lt;#CF type#&gt;)&lt;#expression#&gt;
(__bridge_transfer &lt;#Objective-C type#&gt;)&lt;#expression#&gt;)</p><p>##æ¡¥æ¥æ–¹æ³•çš„ç”¨é€”ï¼š</p><p>__bridge ï¼šç”¨ä½œäºæ™®é€šçš„ C æŒ‡é’ˆä¸ OC æŒ‡é’ˆçš„è½¬æ¢ï¼Œä¸åšä»»ä½•æ“ä½œã€‚</p>
<pre><code>void *p;
NSObject *objc = [[NSObject alloc] init];
p = (__bridge void*)objc;
</code></pre>
<p>è¿™é‡Œçš„ void *p æŒ‡é’ˆç›´æ¥æŒ‡å‘äº† NSObject *objc è¿™ä¸ª OC ç±»ï¼Œp æŒ‡é’ˆå¹¶ä¸æ‹¥æœ‰ OC å¯¹è±¡ï¼Œè·Ÿæ™®é€šçš„æŒ‡é’ˆæŒ‡å‘åœ°å€æ— ç–‘ã€‚æ‰€ä»¥è¿™ä¸ªå‡ºç°äº†ä¸€ä¸ªé—®é¢˜ï¼ŒOC å¯¹è±¡è¢«é‡Šæ”¾ï¼Œp æŒ‡é’ˆä¹Ÿå°± Gameover äº†ã€‚</p><p>__bridge_retainedï¼šç”¨ä½œ C æŒ‡é’ˆä¸ OC æŒ‡é’ˆçš„è½¬æ¢ï¼Œå¹¶ä¸”ä¹Ÿç”¨æ‹¥æœ‰ç€è¢«è½¬æ¢å¯¹è±¡çš„æ‰€æœ‰æƒ</p><p>é‚£ä¹ˆè¿™ä¸ªæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå¯ä»¥å…ˆçœ‹ä¸‹é¢å±•ç¤ºä»£ç </p>
<pre><code>@interface ABSClass : NSObject
@property (nonatomic, copy) NSString *name;
@end
@implementation ABSClass
@end
int main(int argc, const char * argv[]) {
    @autoreleasepool {
        void *p;
        {
            ABSClass *objc = [[ABSClass alloc]init];
            objc.name = @&quot;æˆ‘ä»¬&quot;;
            p = (__bridge void*)objc;
        }
        NSLog(@&quot;%@&quot;, [(__bridge ABSClass *)p name]);
    }
    return 0;
}
</code></pre>
<p>è¿™æ®µä»£ç çœ‹ä¸Šå»å¤§ä½“ä¸ä¸Šé¢ä¸€æ®µä¸€æ ·ï¼Œä½†æ˜¯æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªä½œç”¨åŸŸ {} ï¼Œ åœ¨ä½œç”¨åŸŸä¸­åˆ›å»º ABSClass *objc è¿™ä¸ªå¯¹è±¡ï¼Œç„¶åç”¨ä½œç”¨åŸŸå¤–çš„ pï¼ŒæŒ‡é’ˆè¿›è¡Œæ¡¥æ¥(__bridge)æŒ‡å‘ï¼Œç„¶åè¾“å‡º <code>ABSClass objcè¿™ä¸ªå¯¹è±¡çš„nameå±æ€§çš„å€¼ï¼ŒæŒ‰é“ç†æ¥è¯´æˆ‘ä»¬ä¼šçœ‹åˆ°æ§åˆ¶å°ä¸Šè¾“å‡ºæˆ‘ä»¬è¿™ä¸¤ä¸ªå­—ã€‚ ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬ä¸€è¿è¡Œç¨‹åºï¼Œæ¯«æ— ç–‘é—®ï¼Œç¨‹åºå¾ˆå´©æºƒåœ¨NSLog(@â€%@â€, [(__bridge ABSClass )p name]);è¿™å¥ä»£ç ä¸­ã€‚ æœ‰ç‚¹åŸºç¡€çš„å°ä¼™ä¼´éƒ½çŸ¥é“ï¼Œå½“ABSClass objcè¿™ä¸ªå¯¹è±¡å‡ºäº†ä½œç”¨åŸŸèŒƒå›´ï¼Œå†…å­˜å°±ä¼šè¢«å›æ”¶ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨ä½œç”¨åŸŸèŒƒå›´å¤–è¿˜ç”¨void på»è®¿é—®objc</code> çš„å†…å­˜ï¼Œå½“ç„¶ä¼šå´©æºƒå•¦ã€‚
é‚£ä¹ˆï¼Œæˆ‘ä»¬å°è¯•ä¿®æ”¹ä¸ºä»¥ä¸‹ä»£ç </p>
<pre><code>@interface ABSClass : NSObject
@property (nonatomic, copy) NSString *name;
@end
@implementation ABSClass
@end
int main(int argc, const char * argv[]) {
    @autoreleasepool {
        void *p;
        {
            ABSClass *objc = [[ABSClass alloc]init];
            objc.name = @&quot;æˆ‘ä»¬&quot;;
            p = (__bridge_retained void*)objc;
        }
        NSLog(@&quot;%@&quot;, [(__bridge ABSClass *)p name]);
    }
    return 0;
}
</code></pre>
<p>ç¨‹åºæ­£å¸¸è¿è¡Œï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº† __bridge_retained å°±ç›¸å½“äº MRC ä¸‹çš„ retain ï¼Œå°†å†…å­˜è®¡æ•°å™¨ +1ï¼Œç„¶åç”¨ void *p æŒ‡å‘æ”¹å†…å­˜ï¼Œæ‰€ä»¥å½“ *objcè¿‡äº†ä½œç”¨åŸŸï¼Œå¼•ç”¨è®¡ç®—å™¨ -1ï¼Œä¹Ÿå¹¶æ²¡æœ‰é‡Šæ”¾ void *p æ‰€å¼•ç”¨çš„å†…å­˜ã€‚</p><p>__bridge_transferï¼šç”¨ä½œ C æŒ‡é’ˆä¸ OC æŒ‡é’ˆçš„è½¬æ¢ï¼Œå¹¶åœ¨æ‹¥æœ‰å¯¹è±¡æ‰€æœ‰æƒåå°†åŸå…ˆå¯¹è±¡æ‰€æœ‰æƒé‡Šæ”¾ã€‚(åªæ”¯æŒ C æŒ‡é’ˆè½¬æ¢ OC å¯¹è±¡æŒ‡é’ˆ)</p><p>è¯´èµ·æ¥ç›¸å½“ç»•å£ï¼Œå…¶å®å¯ä»¥ç†è§£ä¸ºå…ˆå°†å¯¹è±¡çš„å¼•ç”¨è®¡æ•°å™¨ +1ï¼Œç„¶åå†å°†å¼•ç”¨è®¡æ•°å™¨ -1ã€‚
é€šè¿‡ä»¥ä¸‹ä»£ç å±•ç°ï¼š</p>
<pre><code>@interface ABSClass : NSObject
@property (nonatomic, copy) NSString *name;
@end
@implementation ABSClass
@end
int main(int argc, const char * argv[]) {
    @autoreleasepool {
        void *p;
        @autoreleasepool {
            ABSClass *obj = [[ABSClass alloc] init];
            obj.name = @&quot;æˆ‘ä»¬&quot;;
            p = (__bridge_retained void *)obj;
        }
        id obj = (__bridge_transfer id)p;
        NSLog(@&quot;%@&quot;, [(__bridge ABSClass *)p name]);
        NSLog(@&quot;%@&quot;, [(ABSClass *)obj name]);
        NSLog(@&quot;Hello, World!&quot;);
    }
    return 0;
}
</code></pre>
<p>ä»¥ä¸Šä»£ç å¯ä»¥æ­£ç¡®è¿è¡Œï¼Œåœ¨æˆ‘ä»¬å°† void *p æŒ‡é’ˆè½¬æ¢ä¸ºè¿›è¡Œ __bridge_transfer ä¸º OC æŒ‡é’ˆï¼Œè¿™ä¸ªæ“ä½œå…¶å®ç›¸å½“äº - (void)set: æ“ä½œï¼Œè½¬æ¢ä¸º MRC ä¸ºå¦‚ä¸‹ä»£ç  :</p>
<pre><code>id obj = (id)p
[obj retain];
[(id)p release];
</code></pre>
<p>æˆ‘ä»¬å…ˆå°†æ–°å€¼ retainï¼Œç„¶åå†å°†æ—§å€¼ releaseï¼Œè¿™æ ·æ˜¯ä¸ºäº†ä¿è¯å¼•ç”¨è®¡æ•°å™¨å§‹ç»ˆä¸º1ï¼Œä¸€ä¸ª retain å¯¹åº”ä¸€ä¸ª releaseã€‚</p><p>å¥½äº†ï¼Œä»¥ä¸Šåšæ³•å°±æ˜¯ C/C++ æŒ‡é’ˆä¸ OC å¯¹è±¡æŒ‡é’ˆçš„ç›¸äº’è½¬æ¢ä»‹ç»ï¼Œå¸Œæœ›èƒ½å¸®åŠ©æ›´å¤šçš„å°ä¼™ä¼´ç†è§£ã€‚</p></div>
        
        <div class="prism-action-bar">
            <div class="comment-action action-item"><a class="no-link text-uppercase" href="/archives/%E7%90%86%E8%A7%A3__bridge/#prism__comment" target="_self"><i class="fa fa-comment"></i>Comment</a></div>
        </div>
        
    </article>
    
    <article class="yue prism-post-item col-md-8 offset-md-2">
        <h1 class="prism-post-title"><a class="no-link" href="/archives/Xcode%E8%87%AA%E5%A2%9Ebuild%E5%8F%B7/" target="_self">Xcodeè‡ªå¢buildå·</a></h1>
        <div class="prism-post-time">
            <a class="no-link" href="/archives/Xcode%E8%87%AA%E5%A2%9Ebuild%E5%8F%B7/" target="_self">
                <time class="text-uppercase">
                    March 22 2018
                </time>
            </a>
        </div>
        <div class="prism-content"><p>è„šæœ¬:</p><div class="highlight"><pre><span></span><span class="nv">buildNumber</span><span class="o">=</span><span class="k">$(</span>/usr/libexec/PlistBuddy -c <span class="s2">&quot;Print CFBundleVersion&quot;</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">PROJECT_DIR</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">INFOPLIST_FILE</span><span class="si">}</span><span class="s2">&quot;</span><span class="k">)</span>  
<span class="nv">buildNumber</span><span class="o">=</span><span class="k">$((</span><span class="nv">$buildNumber</span> <span class="o">+</span> <span class="m">1</span><span class="k">))</span>  
/usr/libexec/PlistBuddy -c <span class="s2">&quot;Set :CFBundleVersion </span><span class="nv">$buildNumber</span><span class="s2">&quot;</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">PROJECT_DIR</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">INFOPLIST_FILE</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
<p>To use this script, follow these steps:</p><ol>
<li>Select your app target in the project overview.</li>
<li>SelectÂ <strong>Build Phases</strong>.</li>
<li>Add a new build phase (&quot;<strong>New Run Script Phase</strong>&quot;).</li>
<li>Enter the above script in the appropriate field.</li>
<li>In yourÂ <code>Info.plist</code>, ensure the current build number is numeric (æ˜¯çš„, ä¸»è¦æ˜¯ä¿è¯ä½ åŸæ¥å¡«å†™çš„ç¡®å®æ˜¯æ•°å­—å°±è¡Œäº†)</li>
</ol>
<figure  style="flex: 128.73900293255133" ><img width="878" height="341" src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/archives/assets/570876b958f1bb0eba6fe0aea0ec353c.png" alt=""/></figure><p>æ¥æº: <a href="http://crunchybagel.com/auto-incrementing-build-numbers-in-xcode/">http://crunchybagel.com/auto-incrementing-build-numbers-in-xcode/</a></p><p>æˆ–è€…ä¸€äº›åˆ«çš„æ€è€ƒ: 
<a href="http://stackoverflow.com/questions/9258344/better-way-of-incrementing-build-number">http://stackoverflow.com/questions/9258344/better-way-of-incrementing-build-number</a></p></div>
        
        <div class="prism-action-bar">
            <div class="comment-action action-item"><a class="no-link text-uppercase" href="/archives/Xcode%E8%87%AA%E5%A2%9Ebuild%E5%8F%B7/#prism__comment" target="_self"><i class="fa fa-comment"></i>Comment</a></div>
        </div>
        
    </article>
    
    <article class="yue prism-post-item col-md-8 offset-md-2">
        <h1 class="prism-post-title"><a class="no-link" href="/archives/UIMenuController%E7%9A%84%E4%BD%BF%E7%94%A8/" target="_self">UIMenuControllerçš„ä½¿ç”¨</a></h1>
        <div class="prism-post-time">
            <a class="no-link" href="/archives/UIMenuController%E7%9A%84%E4%BD%BF%E7%94%A8/" target="_self">
                <time class="text-uppercase">
                    March 21 2018
                </time>
            </a>
        </div>
        <div class="prism-content"><p>#1, åŸºæœ¬ä½¿ç”¨
ä»¥å¯¹ä¸€ä¸ªUILabelé•¿æŒ‰å¼¹å‡ºèœå•ä¸ºä¾‹
##å­ç±»åŒ–UILabel
å› ä¸ºéœ€è¦è¦†ç›–è¿™å‡ ä¸ªæ–¹æ³•:
<code>- (BOOL)canBecomeFirstResponder</code>; è¿”å›YES 
åŒæ—¶éœ€è¦åœ¨æ¯æ¬¡UIå…ƒç´ å‡ºç°çš„æ—¶å€™å»<code>becomeFirstResponder</code>ä¸€æ¬¡,æ‰èƒ½æ˜¾ç¤ºå‡ºèœå•. åœ¨æˆ‘çš„å®æµ‹ä¸­, æˆ‘åœ¨<code>ViewDidLoad</code>é‡Œé¢è¿™ä¹ˆåšäº†, å½“UIå¯¼èˆªåˆ°åˆ«çš„é¡µé¢(å¯¼èˆªæ§ä»¶, æˆ–modalé¡µé¢), ç„¶åå›æ¥, èœå•åˆå¤±æ•ˆäº†, æ‰€ä»¥æˆ‘å†™åˆ°<code>ViewWillAppear</code>é‡Œé¢å»äº†, é€šè¿‡</p><p><code>- (BOOL)canPerformAction:(SEL)action withSender:(nullable id)sender</code>;
è¿™ä¸ªæ–¹æ³•ä¼šåœ¨æ¯ä¸€ä¸ªmenuItemç”Ÿæˆçš„æ—¶å€™è°ƒç”¨ä¸€æ¬¡, å› æ­¤åœ¨æ–¹æ³•ä½“é‡Œå°±è¦æ ¹æ®actionæ¥åˆ¤æ–­æ˜¯å¦éœ€è¦æ˜¾ç¤ºåœ¨èœå•é‡Œ, å¦‚æœä¸éœ€è¦, åˆ™è¿”å›<code>NO</code>. ä¹Ÿå°±æ˜¯è¯´, å¦‚æœä½ ä»€ä¹ˆéƒ½ä¸åš, ç›´æ¥è¿”ä¸€ä¸ª<code>YES</code>, é‚£ä¹ˆæ‰€æœ‰çš„é»˜è®¤èœå•é¡¹éƒ½ä¼šæ˜¾ç¤ºå‡ºæ¥, æ­¤å¤„æˆ‘ä»¬åªè¦ä¸€ä¸ª<code>Copy</code>é€‰é¡¹å§:</p>
<pre><code>- (BOOL)canPerformAction:(SEL)action withSender:(id)sender {
    return (action == @selector(copy:));
}
</code></pre>
<p>##æ·»åŠ è§¦å‘æ–¹å¼
å¦‚æœæ˜¯ä»¥é•¿æŒ‰ä¸ºè§¦å‘, åˆ™æ·»åŠ é•¿æŒ‰æ‰‹åŠ¿, ä»£ç ç‰‡æ®µå¦‚ä¸‹:</p>
<pre><code>// åœ¨awakeFromNibé‡Œé¢æ·»åŠ å³å¯
UILongPressGestureRecognizer *menuGesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(menu:)];
    menuGesture.minimumPressDuration = 0.2;
    [self addGestureRecognizer:menuGesture];

- (void)menu:(UILongPressGestureRecognizer *)sender {
    if (sender.state == UIGestureRecognizerStateBegan) {
        UIMenuController *menu = [UIMenuController sharedMenuController];
        [menu setTargetRect:self.frame inView:self.superView]; // æŠŠè°çš„ä½ç½®å‘Šè¯‰æ§åˆ¶å™¨, èœå•å°±ä¼šä»¥å…¶ä¸ºåŸºå‡†åœ¨åˆé€‚çš„ä½ç½®å‡ºç°
        [menu setMenuVisible:YES animated:YES];
    }
}
</code></pre>
<p>##ç¼–å†™èœå•è¡Œä¸º
ä¸Šé¢æˆ‘ä»¬åªè¦äº†copy, é‚£ä¹ˆå°±è¦†ç›–é»˜è®¤çš„copyæ–¹æ³•:</p>
<pre><code>- (void)copy:(id)sender {
    UIPasteboard *paste = [UIPasteboard generalPasteboard];
    paste.string = self.text;
}
</code></pre>
<p>#2, æ·»åŠ è‡ªå®šä¹‰èœå•é¡¹
è‡ªå®šä¹‰èœå•åªéœ€è¦åœ¨èœå•æ§åˆ¶å™¨æ·»åŠ å‡ ä¸ªitemå³å¯, ç»“åˆä¸Šä¾‹, æˆ‘çš„é‚£ä¸ªlabelæ˜¯æ˜¾ç¤ºç”µè¯å·ç çš„, é‚£ä¹ˆå°±è®©å®ƒå¤šæ˜¾ç¤ºä¸€ä¸ªâ€æ‰“ç”µè¯â€å’Œä¸€ä¸ªâ€å‘çŸ­ä¿¡â€èœå•å§, å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯, åœ¨è®¾ç½®è‡ªå®šä¹‰èœå•é¡¹æ—¶, è®¾ç½®çš„itemsåªå½±å“è‡ªå®šä¹‰éƒ¨åˆ†, æ ‡å‡†èœå•é¡¹ä»ç„¶æ˜¯ç”±<code>canPerformAction</code>å†³å®šçš„:</p>
<pre><code>UIMenuItem *itemCall = [[UIMenuItem alloc] initWithTitle:@&quot;Call&quot; action:@selector(call:)];
UIMenuItem *itemMessage = [[UIMenuItem alloc] initWithTitle:@&quot;Message&quot; action:@selector(message:)];
[[UIMenuController sharedMenuController] setMenuItems: @[itemCall, itemMessage]];
[[UIMenuController sharedMenuController] update];
</code></pre>
<blockquote>
<p>æ³¨, æ·»åŠ äº†ä¸¤ä¸ªèœå•å, canPerformActionéœ€è¦ç›¸åº”å˜åŒ–, è‡ªå·±æƒ³æƒ³åº”è¯¥æ€ä¹ˆæ”¹. ä¹Ÿå¯ä»¥åœ¨ä¸‹ä¸€èŠ‚çœ‹ä»£ç . å½“ç„¶ä¹Ÿè¦è‡ªè¡Œå†™å®Œé‡Œé¢çš„callå’Œmessageæ–¹æ³•, å‚ç…§copyçš„å†™æ³•å³å¯</p></blockquote>
<p>#3, UITableViewCellé•¿æŒ‰æ˜¾ç¤ºèœå•
##æ ‡å‡†èœå•é¡¹
UITableViewé‡Œé¢é•¿é¡¹æ¡ç›®æ˜¾ç¤ºæ ‡å‡†èœå•, åªéœ€è¦å®ç°ä¸‹è¿°ä»£ç†æ–¹æ³•å³å¯:</p>
<pre><code>- (BOOL)tableView:(UITableView *)tableView shouldShowMenuForRowAtIndexPath:(NSIndexPath *)indexPath {
    return YES;
}

- (BOOL)tableView:(UITableView *)tableView canPerformAction:(SEL)action forRowAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender {
    return (action == @selector(copy:)); // åªæ˜¾ç¤ºCopy
}

- (void)tableView:(UITableView *)tableView performAction:(SEL)action forRowAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender {
    if (action == @select(copy:)) {
        UIPasteboard *paste = [UIPasteboard generalPasteboard];
        paste.string = cell.detailLabel.text; // è‡ªè¡Œå†™ä¸šåŠ¡é€»è¾‘
    }
}
</code></pre>
<p>#4, TableViewCellæ·»åŠ è‡ªå®šä¹‰èœå•é¡¹</p><p>åŒæ ·ä¹Ÿå¾—å­ç±»åŒ–ä¸€ä¸ªTableViewCell,ç›®çš„ä¹Ÿæ˜¯ä¸ºäº†è¦†ç›–åŒæ ·çš„å‡ ä¸ªæ–¹æ³•:</p>
<pre><code>- (BOOL)canPerformAction:(SEL)action withSender:(id)sender {
    return (action == @selector(copy:) || action == @selector(call:) || action == @selector(message:)); // æ­¤å¤„æˆ‘ä»¬æŠŠä¸‰ä¸ªè¡Œä¸ºéƒ½å†™å…¨äº†, å›ç­”ä¸Šä¸€èŠ‚çš„é—®é¢˜
}

- (BOOL)canBecomeFirstResponder {
    return YES;
}
</code></pre>
<p>ä½†å› ä¸ºtableViewå·²ç»å®ç°äº†èœå•, æ‰€ä»¥ä¸éœ€è¦æ˜¾å¼ä¸ºæ¯ä¸ªcellå»<code>becomeFirtResponder</code>äº†.</p><p>æ·»åŠ èœå•é¡¹çš„æ–¹æ³•åŒä¸Š, å†™èœå•è¡Œä¸ºçš„æ–¹æ³•åŒ<code>copy:</code>, éƒ½æ˜¯ä¸€æ ·çš„.</p><blockquote>
<p>æ³¨: ä½ ä»¬æˆ–è®¸å·²ç»å‘ç°äº†, æ·»åŠ è‡ªå®šä¹‰èœå•é¡¹çš„æ—¶å€™, ä»ç„¶éœ€è¦<code>canPerformAction</code>, åœ¨è¿™é‡Œ, ä¸tableViewä»£ç†é‡Œé¢çš„åŒåæ–¹æ³•æœ‰ä»€ä¹ˆå…³ç³»? æ˜¯çš„, ä¸¤ä¸ªéƒ½è¦å†™, tableViewé‡Œé¢çš„åªä¼šå½±å“æ ‡å‡†èœå•, æ–‡æ¡£è¯´åªæ”¯æŒè¿™ä¸¤ä¸ª<code>UIResponderStandardEditActions</code> (copy/paste)</p></blockquote>
<blockquote>
<p>æ³¨: ç„¶è€Œ, <code>- (void)tableView:(UITableView *)tableView performAction:(SEL)action forRowAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender</code>è¿™ä¸ªæ–¹æ³•å´æœ‰ç‚¹åˆ«æ‰­, ä¸€æ¥ä¸éœ€è¦å»å®ç°äº†, äºŒæ¥åˆä¸èƒ½æ³¨é‡Šæ‰(ä½ ä»¬è‡ªå·±è¯•ä¸€ä¸‹), ç­‰äºä¸€å®šè¦ç•™ä¸€ä¸ªç©ºçš„æ–¹æ³•ä½“åœ¨é‚£é‡Œâ€¦</p></blockquote>
</div>
        
        <div class="prism-action-bar">
            <div class="comment-action action-item"><a class="no-link text-uppercase" href="/archives/UIMenuController%E7%9A%84%E4%BD%BF%E7%94%A8/#prism__comment" target="_self"><i class="fa fa-comment"></i>Comment</a></div>
        </div>
        
    </article>
    
    <article class="yue prism-post-item col-md-8 offset-md-2">
        <h1 class="prism-post-title"><a class="no-link" href="/archives/OC%E9%9D%99%E6%80%81%E5%BA%93%E9%87%8CNSClassFromString%E5%BE%97%E5%88%B0nil%E7%9A%84%E8%A7%A3%E5%86%B3/" target="_self">OCé™æ€åº“é‡ŒNSClassFromStringå¾—åˆ°nilçš„è§£å†³</a></h1>
        <div class="prism-post-time">
            <a class="no-link" href="/archives/OC%E9%9D%99%E6%80%81%E5%BA%93%E9%87%8CNSClassFromString%E5%BE%97%E5%88%B0nil%E7%9A%84%E8%A7%A3%E5%86%B3/" target="_self">
                <time class="text-uppercase">
                    March 15 2018
                </time>
            </a>
        </div>
        <div class="prism-content"><p>å¦‚æœä½ åœ¨é™æ€åº“ä¸­æœ‰ä»ç±»ååå°„å›ç±»çš„ä»£ç , å¦‚ä¸‹:</p>
<pre><code>NSString *myClassStr = @&quot;myClass&quot;;  
Class myClazz = NSClassFromString(myClassStr);  
if (myClazz) {  
    id myClassInit = [[myClazz alloc] init];  
}
</code></pre>
<p>æœ‰æ—¶å€™(ç»å¸¸)ä¼šå‡ºç°å¾—åˆ°äº†Classä¸ºnilçš„æƒ…å†µ, ç½‘ä¸Šæœç´¢, ä¸€èˆ¬æ˜¯è¿™ä¹ˆè¯´çš„:</p><blockquote>
<p>The class object named by aClassName, or nil if no class by that name is currently loaded. If aClassName is nil, returns nil.</p></blockquote>
<p>æ¥è‡ªäº64ä½ç³»ç»Ÿçš„ä¸€ä¸ªbug:</p><blockquote>
<p>IMPORTANT: For 64-bit and iPhone OS applications, there is a linker bug that prevents -ObjC from loading objects files from static libraries that contain only categories and no classes. The workaround is to use the -all_load or -force_load flags. -all_load forces the linker to load all object files from every archive it sees, even those without Objective-C code. -force_load is available in Xcode 3.2 and later. It allows finer grain control of archive loading. Each -force_load option must be followed by a path to an archive, and every object file in that archive will be loaded.</p></blockquote>
<p>å°±æˆ‘çš„å®æµ‹</p><ul>
<li>é¦–å…ˆ, ä½ éœ€è¦åœ¨ä½ çš„ä¸»é¡¹ç›®(çš„target)å¯¹<code>build setting</code>è¿›è¡Œæ›´æ”¹, è€Œ<strong>ä¸æ˜¯</strong>é™æ€åº“çš„é¡¹ç›®!</li>
<li>å…¶æ¬¡, <code>-all_load</code>æœ‰æ•ˆ, <code>-force_load</code>ç”šè‡³ç¼–è¯‘éƒ½è¿‡ä¸äº†</li>
<li>æœ€å, ç»“åˆä¸Šé¢, å°±æ˜¯åœ¨ä¸»é¡¹ç›®(å¼•ç”¨é™æ€åº“çš„é¡¹ç›®)çš„build settingé‡Œé¢æœç´¢<code>other linker flags</code>, ç„¶åæŠŠ<code>-all_load</code>åŠ è¿›å»å°±è¡Œäº†</li>
</ul>
</div>
        
        <div class="prism-action-bar">
            <div class="comment-action action-item"><a class="no-link text-uppercase" href="/archives/OC%E9%9D%99%E6%80%81%E5%BA%93%E9%87%8CNSClassFromString%E5%BE%97%E5%88%B0nil%E7%9A%84%E8%A7%A3%E5%86%B3/#prism__comment" target="_self"><i class="fa fa-comment"></i>Comment</a></div>
        </div>
        
    </article>
    
    <article class="yue prism-post-item col-md-8 offset-md-2">
        <h1 class="prism-post-title"><a class="no-link" href="/archives/%E9%80%9A%E8%BF%87GPS%E6%95%B0%E6%8D%AE%E5%8F%8D%E5%90%91%E5%9C%B0%E7%90%86%E4%BF%A1%E6%81%AF%E7%BC%96%E7%A0%81%E5%BE%97%E5%88%B0%E5%BD%93%E5%89%8D%E4%BD%8D%E7%BD%AE%E4%BF%A1%E6%81%AF/" target="_self">é€šè¿‡GPSæ•°æ®åå‘åœ°ç†ä¿¡æ¯ç¼–ç å¾—åˆ°å½“å‰ä½ç½®ä¿¡æ¯</a></h1>
        <div class="prism-post-time">
            <a class="no-link" href="/archives/%E9%80%9A%E8%BF%87GPS%E6%95%B0%E6%8D%AE%E5%8F%8D%E5%90%91%E5%9C%B0%E7%90%86%E4%BF%A1%E6%81%AF%E7%BC%96%E7%A0%81%E5%BE%97%E5%88%B0%E5%BD%93%E5%89%8D%E4%BD%8D%E7%BD%AE%E4%BF%A1%E6%81%AF/" target="_self">
                <time class="text-uppercase">
                    January 14 2018
                </time>
            </a>
        </div>
        <div class="prism-content"><h1>æ£€æŸ¥å¯ç”¨æ€§</h1>
<p>è¿™å±äºåŸºç¡€çŸ¥è¯†, ä¸èµ˜è¿°, æ€»çš„æ¥è¯´,ä½ çš„è®¾å¤‡çš„æ”¯æŒè¦æ‰“å¼€, æ·»åŠ CoreLocationçš„framework, å¼•ç”¨å¤´æ–‡ä»¶, æ·»åŠ å§”æ‰˜,ç„¶å, å¥½çš„å®è·µæ˜¯åœ¨ä½¿ç”¨å‰ç¼–ç¨‹æ£€æŸ¥ç›¸å…³å¯ç”¨æ€§:</p>
<pre><code>- (CLLocationManager *)locationManager
{
    if(!_locationManager){
        if([CLLocationManager locationServicesEnabled]){
            _locationManager = [[CLLocationManager alloc] init];
            _locationManager.delegate = self;
            _locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters;
            CLAuthorizationStatus status = [CLLocationManager authorizationStatus];
            if (status == kCLAuthorizationStatusNotDetermined) {
                NSLog(@&quot; not determined&quot;);
                if([_locationManager respondsToSelector:@selector(requestWhenInUseAuthorization)]){
                    [_locationManager requestAlwaysAuthorization];
                }
            }else if (status == kCLAuthorizationStatusDenied) {
                NSLog(@&quot;denied&quot;);
            }else if (status == kCLAuthorizationStatusRestricted) {
                NSLog(@&quot;restricted&quot;);
            }else if (status == kCLAuthorizationStatusAuthorizedAlways) {
                NSLog(@&quot;always allowed&quot;);
            }else if (status == kCLAuthorizationStatusAuthorizedWhenInUse) {
                NSLog(@&quot;when in use allowed&quot;);
            }else{
            }
        }else _locationManager = nil;
    }
    return _locationManager;
}
</code></pre>
<p>æ³¨æ„<code>kCLAuthorizationStatusNotDetermined</code>çŠ¶æ€, iOS8ä»¥å, éœ€è¦æ‰‹åŠ¨ç¼–è¾‘info.plistæ–‡ä»¶, æ·»åŠ ä¸¤ä¸ªè¯·æ±‚ç”¨æˆ·æˆæƒæ—¶çš„æ–‡æ¡ˆ, æ‰èƒ½æ­£å¸¸ä½¿ç”¨, è¿™é‡Œè§‰å¾—åŒªå¤·æ‰€æ€:</p>
<pre><code>&lt;key&gt;NSLocationWhenInUseUsageDescription&lt;/key&gt;&lt;string&gt;è¯·æˆæƒä½¿ç”¨åœ°ç†ä½ç½®æœåŠ¡&lt;/string&gt;
&lt;key&gt;NSLocationAlwaysUsageDescription&lt;/key&gt;&lt;string&gt;è¯·æˆæƒä½¿ç”¨åœ°ç†ä½ç½®æœåŠ¡&lt;/string&gt;
</code></pre>
<p>ä»¥ä¸Š, å¯éšä¾¿å‚è€ƒç½‘ä¸Šä»»ä½•<a href="http://kittenyang.com/cllocationmanager/">ä¸€ç¯‡æ•™ç¨‹</a></p><h1>è¯·æ±‚åœ°ç†ä½ç½®å¹¶åå‘ç¼–ç </h1>
<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯, è‹¹æœçš„<code>CLGeocoder</code> APIå¹¶ä¸å…è®¸ä½ é¢‘ç¹è°ƒç”¨, ä¸€åˆ†é’Ÿä¸€æ¬¡ä¸ºå®œ, æ‰€ä»¥ä½ åƒä¸‡ä¸è¦<code>[self.locationManager startUpdatingLocation]</code>, ç„¶ååœ¨<code>locationManager:didChangeAuthorizationStatus:</code>
æ–¹æ³•é‡Œå»decode, å› ä¸ºåªæ˜¯ä¸ºäº†è·å–åŸå¸‚, ç²¾åº¦è¦æ±‚ä¸é«˜, å¹¶ä¸”ä¸éœ€è¦æŒç»­æ›´æ–°, æ‰€ä»¥æˆ‘ä»¬å°±ä¸updateäº†, åªrequestä¸€æ¬¡, ç„¶ååœ¨è·å–ä½ç½®å¤±è´¥çš„æ—¶å€™å†æ‰‹åŠ¨requestä¸€æ¬¡:</p>
<pre><code>+ (void)locationManager:(nonnull CLLocationManager *)manager didFailWithError:(nonnull NSError *)error{
    NSLog(@&quot;fail with error:\n %@&quot;, error);
    [self.locationManager requestLocation];
}
</code></pre>
<p>ç›¸å…³è§£é‡Šå‚è€ƒ<a href="http://stackoverflow.com/questions/17867422/kclerrordomain-error-2-after-geocoding-repeatedly-with-clgeocoder">è¿™ç¯‡æ–‡ç« </a></p><p>#è¯­è¨€çš„é—®é¢˜</p><p>å› ä¸ºä¹ æƒ¯ç”¨è‹±æ–‡ç³»ç»Ÿ, å°±ç¢°åˆ°è¯·æ±‚å›æ¥çš„ä¿¡æ¯æ˜¯è‹±æ–‡çš„åŸå› , è¿™é‡Œè‹¹æœæ˜¯å›ºåŒ–èµ·æ¥çš„, æš‚æ—¶ä¸æ”¯æŒç”¨å‚æ•°æ¥æŒ‡å®šè¿”å›æ•°æ®çš„æ˜¾ç¤ºè¯­è¨€, å€Ÿé‰´<a href="http://stackoverflow.com/questions/20388891/cllocationmanager-reversegeocodelocation-language">è¿™ç¯‡æ–‡ç« </a>çš„æ€è·¯, åœ¨è¯·æ±‚å‰æŠŠå½“å‰è¯­è¨€è®¾ç½®ä¿å­˜èµ·æ¥, ä¸´æ—¶æ”¹æˆä¸­æ–‡, è¯·æ±‚ç»“æŸåå†ä¿®æ”¹å›æ¥:</p>
<pre><code>+ (void)locationManager:(nonnull CLLocationManager *)manager didUpdateLocations:(nonnull NSArray *)locations{
    CLLocation *location = [locations lastObject];
    CLGeocoder *geocoder = [CLGeocoder new];
    // ä¿®æ”¹è¯­è¨€ä¸ºä¸­æ–‡
    NSArray *currentLanguageArray = [[NSUserDefaults standardUserDefaults] objectForKey:@&quot;AppleLanguages&quot;];
    [[NSUserDefaults standardUserDefaults] setObject: [NSArray arrayWithObjects:@&quot;zh_Hans&quot;, nil] forKey:@&quot;AppleLanguages&quot;];
    [geocoder reverseGeocodeLocation:location completionHandler:^(NSArray&lt;CLPlacemark *&gt; * __nullable placemarks, NSError * __nullable error) {
        // æ¢å¤è¯­è¨€
        [[NSUserDefaults standardUserDefaults] setObject:currentLanguageArray forKey:@&quot;AppleLanguages&quot;];
        if(error){
            NSLog(@&quot;reverse error:%@&quot;, [error localizedDescription]);
        }else{
            if([placemarks count] &gt; 0){
                CLPlacemark *mark = [placemarks firstObject];
                NSLog(@&quot;%@&quot;, mark);
                NSLog(@&quot;åŸå¸‚å:%@&quot;, mark.locality);
            }
        }
    }];
}
</code></pre>
</div>
        
        <div class="prism-action-bar">
            <div class="comment-action action-item"><a class="no-link text-uppercase" href="/archives/%E9%80%9A%E8%BF%87GPS%E6%95%B0%E6%8D%AE%E5%8F%8D%E5%90%91%E5%9C%B0%E7%90%86%E4%BF%A1%E6%81%AF%E7%BC%96%E7%A0%81%E5%BE%97%E5%88%B0%E5%BD%93%E5%89%8D%E4%BD%8D%E7%BD%AE%E4%BF%A1%E6%81%AF/#prism__comment" target="_self"><i class="fa fa-comment"></i>Comment</a></div>
        </div>
        
    </article>
    
    <article class="yue prism-post-item col-md-8 offset-md-2">
        <h1 class="prism-post-title"><a class="no-link" href="/archives/%E6%88%91%E6%9C%80%E5%B8%B8%E7%94%A8%E7%9A%84%E5%87%A0%E4%B8%AAXcode%E5%BF%AB%E6%8D%B7%E9%94%AE/" target="_self">æˆ‘æœ€å¸¸ç”¨çš„å‡ ä¸ªXcodeå¿«æ·é”®</a></h1>
        <div class="prism-post-time">
            <a class="no-link" href="/archives/%E6%88%91%E6%9C%80%E5%B8%B8%E7%94%A8%E7%9A%84%E5%87%A0%E4%B8%AAXcode%E5%BF%AB%E6%8D%B7%E9%94%AE/" target="_self">
                <time class="text-uppercase">
                    March 16 2017
                </time>
            </a>
        </div>
        <div class="prism-content"><blockquote>
<p>âŒ˜(command) â(return) âŒ¥(option/alt) â‡§(shift) âŒƒ(control/ctrl)</p></blockquote>

<pre><code>å¿«é€Ÿæ‰“å¼€æ–‡ä»¶ âŒ˜ + â‡§ + O(å­—æ¯)
å¿«é€Ÿæœç´¢æ–‡æœ¬ âŒ˜ + â‡§ + F
åˆ†æ æ˜¾ç¤º âŒ˜ + âŒ¥ + â
é€€å‡ºåˆ†æ æ˜¾ç¤º âŒ˜ + â
è®©æ–‡ä»¶åœ¨åˆ†æ çš„å³ä¾§æ˜¾ç¤º âŒ¥ + click
æ˜¾ç¤ºå‡ºæµ®å±‚é€‰æ‹©æ‰“å¼€ä½ç½®
å¯¼èˆªä¸­ç‚¹å‡»æ–‡ä»¶ â‡§ + âŒ¥ + click
ç¼–è¾‘åŒºåŸŸä¸­ç‚¹å‡»æ–‡ä»¶å â‡§ + âŒ¥ + âŒ˜ + click
éšè—/æ˜¾ç¤ºå·¦ä¾§å¯¼èˆªåŒº âŒ˜ + 0(æ•°å­—)
éšè—/æ˜¾ç¤ºå³ä¾§åŠŸèƒ½åŒº âŒ˜ + âŒ¥ + 0(æ•°å­—)
éšè—/æ˜¾ç¤ºä¸‹æ–¹è°ƒè¯•åŒº âŒ˜ + â‡§ + Y
æ‰“å¼€/å…³é—­è‡ªåŠ¨è¡¥å…¨ Esc
å¿«é€Ÿç±»/æ–¹æ³•æç¤º âŒ¥ + click
è‡ªåŠ¨ç¼©è¿› âŒƒ + I(å­—æ¯i)
å¯¼èˆªä¸­æ ‡ç­¾é¡µçš„é€‰æ‹© âŒ˜ + (1...6)
ç¼–è¾‘åŒºæ–‡ä»¶çš„é€‰æ‹© âŒƒ + (1...5)
è·³è½¬åˆ°æ–¹æ³• âŒƒ + 6
ç¼–è¯‘ âŒ˜ + B
ç¼–è¯‘å¹¶è¿è¡Œ âŒ˜ + R
æ¸…ç†é¡¹ç›® âŒ˜ + â‡§ + K
ä¸­æ­¢ä»»åŠ¡(ç¼–è¯‘/æ¸…ç†) âŒ˜ + .
</code></pre>
</div>
        
        <div class="prism-action-bar">
            <div class="comment-action action-item"><a class="no-link text-uppercase" href="/archives/%E6%88%91%E6%9C%80%E5%B8%B8%E7%94%A8%E7%9A%84%E5%87%A0%E4%B8%AAXcode%E5%BF%AB%E6%8D%B7%E9%94%AE/#prism__comment" target="_self"><i class="fa fa-comment"></i>Comment</a></div>
        </div>
        
    </article>
    
    <article class="yue prism-post-item col-md-8 offset-md-2">
        <h1 class="prism-post-title"><a class="no-link" href="/archives/%E6%8A%8AGAE%E7%A8%8B%E5%BA%8F%E9%80%9A%E8%BF%87SSH%E9%83%A8%E7%BD%B2%E5%88%B0VPS/" target="_self">æŠŠGAEç¨‹åºé€šè¿‡SSHéƒ¨ç½²åˆ°VPS</a></h1>
        <div class="prism-post-time">
            <a class="no-link" href="/archives/%E6%8A%8AGAE%E7%A8%8B%E5%BA%8F%E9%80%9A%E8%BF%87SSH%E9%83%A8%E7%BD%B2%E5%88%B0VPS/" target="_self">
                <time class="text-uppercase">
                    January 14 2017
                </time>
            </a>
        </div>
        <div class="prism-content"><p>å¤§éƒ¨åˆ†åœ¨<a href="https://cloud.google.com/appengine/downloads">æ–‡æ¡£</a>ä¸Šéƒ½å†™äº†, å†™è¿™ç¯‡æ–‡ç« çš„ç›®çš„æ˜¯å‘ç°ç°åœ¨<code>appcfg.py update xxxx</code>çš„æ—¶å€™ä¼šæ‰“å¼€æµè§ˆå™¨è®¿é—®googleè¯·æ±‚æˆæƒ(åå°å†…å»ºäº†ä¸€ä¸ªæœ¬åœ°server, ç«¯å£æ˜¯<code>8090</code>, æˆæƒæˆåŠŸåä¼šå¸¦æˆæƒç è¯·æ±‚æœ¬åœ°çš„8090ç«¯å£, æ‰€ä»¥æˆ‘ä»¬åœ¨ ssh ç¯å¢ƒä¸­æ˜¯æ²¡æœ‰æµè§ˆå™¨çš„, è¯¥æ€ä¹ˆè§£å†³å‘¢?</p><p>æˆ‘ç© linux ä¸å¤š, å°±ä»¥æˆ‘çš„çŸ¥è¯†é‡è¿™ä¹ˆè§£å†³:</p><ol>
<li>ç¢°åˆ°éœ€è¦è®¿é—®ç½‘ç«™çš„æ—¶å€™, ç¨‹åºå·²ç»ç»™å‡ºäº†æç¤º, è¦ä½ é€€å‡º, ä½ å½“ç„¶ä¸é€€å‡º, è€Œæ˜¯æŠŠç½‘å€å¤åˆ¶å‡ºæ¥, åœ¨æœ¬åœ°æ‰“å¼€, æˆæƒæˆåŠŸå, æœ¬åœ°æµè§ˆå™¨ä¼šè¯·æ±‚<code>127.0.0.1:8090</code>, å½“ç„¶, ä»€ä¹ˆéƒ½ä¸ä¼šå‘ç”Ÿ, ä½†ä»åœ°å€æ é‡ŒæŠŠåœ°å€å¤åˆ¶åˆ°å‰ªè´´æ¿.</li>
<li>å›åˆ°SSH, æŠŠå½“å‰ä»»åŠ¡æ”¾åˆ°åå°(<code>ctrl+z</code>)</li>
<li>ç”¨<code>curl</code>è®¿é—®å‰ªè´´æ¿é‡Œçš„åœ°å€</li>
<li>ç»§ç»­<code>ctrl+z</code>æŠŠ<code>curl</code>è¯·æ±‚æ”¾åˆ°åå°</li>
<li><code>jobs</code>å‘½ä»¤æŸ¥ä¸€ä¸‹, å¦‚æœåå°æ²¡æœ‰åˆ«çš„ä»»åŠ¡çš„è¯, <code>appcfg</code>ä»»åŠ¡çš„id åº”è¯¥æ˜¯1, <code>curl</code>ä»»åŠ¡id åº”è¯¥æ˜¯2(ç°åœ¨ä»¥æˆ‘çš„1å’Œ2ä¸ºå‡†)</li>
<li>æŠŠ<code>appcfg</code>æåˆ°å‰å°: <code>fg %1</code></li>
<li>ä½ ä¼šçœ‹åˆ°ç¨‹åºé¡ºåˆ©è¿›è¡Œä¸‹å»äº†</li>
<li>ç»§ç»­, <code>fg %2</code>æŠŠ curl ä»»åŠ¡æåˆ°å‰å°, ä½ ä¼šçœ‹åˆ°æç¤º, ä»€ä¹ˆæˆæƒæˆåŠŸä¹‹ç±»çš„</li>
</ol>
<p>æ¼”ç¤º:</p>
<pre><code>root@walker:~/KindleEar# appcfg.py update app.yaml module-worker.yaml
07:52 AM Host: appengine.google.com
07:52 AM Application: kindleearwalker; version: 1
07:52 AM Starting update of app: kindleearwalker, version: 1
07:52 AM Getting current resource limits.
Your browser has been opened to visit:

    https://accounts.google.com/o/oauth2/auth?scope=æ¼”ç¤ºæ•°æ®
    # step1: è¯·å¤åˆ¶æ­¤ç½‘å€, å¹¶å¿½ç•¥è¦ä½ é€€å‡ºæ¢ç”µè„‘çš„æç¤º

If your browser is on a different machine then exit and re-run this
application with the command-line parameter

  --noauth_local_webserver

# step2: ç°åœ¨å¼€å§‹æŠŠä»»åŠ¡æ”¾åˆ°åå°
^Z
[1]+  Stopped                 appcfg.py update app.yaml module-worker.yaml
# step3: æŠŠä»æœ¬æœºæµè§ˆå™¨å¤åˆ¶çš„å›è°ƒ url è®¿é—®ä¸€ä¸‹
root@walker:~/KindleEar# curl http://localhost:8090/?code=4/CYdQFQLiLBFwa7ajsU1acb1Xx9Kpal6SxMuPIS-dRYo#
# step4: æŠŠè®¿é—®ä»»åŠ¡æ”¾åˆ°åå°
^Z
[2]+  Stopped                 curl http://localhost:8090/?code=4/CYdQFQLiLBFwa7ajsU1acb1Xx9Kpal6SxMuPIS-dRYo#
# step 5: æŸ¥çœ‹ä¸€ä¸‹ä»»åŠ¡å’Œ ID
root@walker:~/KindleEar# jobs
[1]-  Stopped                 appcfg.py update app.yaml module-worker.yaml
[2]+  Stopped                 curl http://localhost:8090/?code=4/xxxxx#
# step 6: æŠŠappcgfçš„ä»»åŠ¡æåˆ°å‰å°
root@walker:~/KindleEar# fg %1
appcfg.py update app.yaml module-worker.yaml
Authentication successful.
07:54 AM Scanning files on local disk.
07:54 AM Cloning 15 static files.
07:54 AM Cloning 387 application files.
07:54 AM Uploading 3 files and blobs.
07:54 AM Uploaded 3 files and blobs.
.........çœç•¥
07:54 AM Compilation completed.
07:54 AM Starting deployment.
07:54 AM Checking if deployment succeeded.
07:54 AM Deployment successful.
07:54 AM Checking if updated app version is serving.
07:54 AM Completed update of app: kindleearwalker, module: worker, version: 1
# step 7: see? æˆåŠŸäº†, çœ‹çœ‹å‰©ä¸‹çš„ä»»åŠ¡å§
root@walker:~/KindleEar# jobs
[2]+  Stopped                 curl http://localhost:8090/?code=4/xxxxxxx#
# step 8: æåˆ°å‰å°æ¥ç»“æŸå§
root@walker:~/KindleEar# fg %2
curl http://localhost:8090/?code=4/CYdQFQLiLBFwa7ajsU1acb1Xx9Kpal6SxMuPIS-dRYo#
&lt;html&gt;&lt;head&gt;&lt;title&gt;Authentication Status&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;p&gt;The authentication flow has completed.&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;root@walker:~/KindleEar#
</code></pre>
</div>
        
        <div class="prism-action-bar">
            <div class="comment-action action-item"><a class="no-link text-uppercase" href="/archives/%E6%8A%8AGAE%E7%A8%8B%E5%BA%8F%E9%80%9A%E8%BF%87SSH%E9%83%A8%E7%BD%B2%E5%88%B0VPS/#prism__comment" target="_self"><i class="fa fa-comment"></i>Comment</a></div>
        </div>
        
    </article>
    
    <article class="yue prism-post-item col-md-8 offset-md-2">
        <h1 class="prism-post-title"><a class="no-link" href="/archives/-bin-bash%E5%92%8C-bin-sh%E7%9A%84%E5%8C%BA%E5%88%AB/" target="_self">-bin-bashå’Œ-bin-shçš„åŒºåˆ«</a></h1>
        <div class="prism-post-time">
            <a class="no-link" href="/archives/-bin-bash%E5%92%8C-bin-sh%E7%9A%84%E5%8C%BA%E5%88%AB/" target="_self">
                <time class="text-uppercase">
                    March 26 2010
                </time>
            </a>
        </div>
        <div class="prism-content"><p>[è¯¥æ–‡ä¸ä¸¥è°¨, æ–‡æœ«æœ‰è¡¥å……]</p><p>è„šæœ¬test.shå†…å®¹ï¼š</p>
<pre><code>#!/bin/sh
source pcy.sh #pcy.shå¹¶ä¸å­˜åœ¨
echo hello
</code></pre>
<p>æ‰§è¡Œ./test.shï¼Œå±å¹•è¾“å‡ºä¸ºï¼š</p>
<pre><code>./test.sh: line 2: pcy.sh: No such file or directory
</code></pre>
<p>ç”±æ­¤å¯è§ï¼Œåœ¨<code>#!/bin/sh</code>çš„æƒ…å†µä¸‹ï¼Œsourceä¸æˆåŠŸï¼Œ<strong>ä¸ä¼šè¿è¡Œ</strong>sourceåé¢çš„ä»£ç ã€‚
ä¿®æ”¹test.shè„šæœ¬çš„ç¬¬ä¸€è¡Œï¼Œå˜ä¸º<code>#!/bin/bash</code>ï¼Œå†æ¬¡æ‰§è¡Œ./test.shï¼Œå±å¹•è¾“å‡ºä¸ºï¼š</p>
<pre><code>./test.sh: line 2: pcy.sh: No such file or directory
hello
</code></pre>
<p>ç”±æ­¤å¯è§ï¼Œåœ¨<code>#!/bin/bash</code>çš„æƒ…å†µä¸‹ï¼Œè™½ç„¶sourceä¸æˆåŠŸï¼Œä½†æ˜¯è¿˜æ˜¯è¿è¡Œäº†sourceåé¢çš„echoè¯­å¥ã€‚
ä½†æ˜¯ç´§æ¥ç€æˆ‘åˆè¯•ç€è¿è¡Œäº†ä¸€ä¸‹<code>sh ./test.sh</code>ï¼Œè¿™æ¬¡å±å¹•è¾“å‡ºä¸ºï¼š</p>
<pre><code>./test.sh: line 2: pcy.sh: No such file or directory
</code></pre>
<p>è¡¨ç¤ºè™½ç„¶è„šæœ¬ä¸­æŒ‡å®šäº†#!/bin/bashï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨sh æ–¹å¼è¿è¡Œï¼Œå¦‚æœsourceä¸æˆåŠŸï¼Œä¹Ÿä¸ä¼šè¿è¡Œsourceåé¢çš„ä»£ç ã€‚</p><p>ä¸ºä»€ä¹ˆä¼šæœ‰è¿™æ ·çš„åŒºåˆ«å‘¢ï¼Ÿ</p><p>junruåŒå­¦ä½œäº†è§£é‡Š</p><ol>
<li>shä¸€èˆ¬è®¾æˆbashçš„è½¯é“¾</li>
</ol>

<pre><code>[work@zjm-testing-app46 cy]$ ll /bin/sh
lrwxrwxrwx 1 root root 4 Nov 13 2006 /bin/sh -&gt; bash
</code></pre>
<ol start="2">
<li>åœ¨ä¸€èˆ¬çš„linuxç³»ç»Ÿå½“ä¸­ï¼ˆå¦‚redhatï¼‰ï¼Œä½¿ç”¨shè°ƒç”¨æ‰§è¡Œè„šæœ¬ç›¸å½“äºæ‰“å¼€äº†bashçš„POSIXæ ‡å‡†æ¨¡å¼</li>
<li>ä¹Ÿå°±æ˜¯è¯´ /bin/sh ç›¸å½“äº /bin/bash --posix</li>
</ol>
<p>æ‰€ä»¥ï¼Œshè·Ÿbashçš„åŒºåˆ«ï¼Œå®é™…ä¸Šå°±æ˜¯bashæœ‰æ²¡æœ‰å¼€å¯posixæ¨¡å¼çš„åŒºåˆ«</p><p>soï¼Œå¯ä»¥é¢„æƒ³çš„æ˜¯ï¼Œå¦‚æœç¬¬ä¸€è¡Œå†™æˆ #!/bin/bash --posixï¼Œé‚£ä¹ˆè„šæœ¬æ‰§è¡Œæ•ˆæœè·Ÿ#!/bin/shæ˜¯ä¸€æ ·çš„ï¼ˆéµå¾ªposixçš„ç‰¹å®šè§„èŒƒï¼Œæœ‰å¯èƒ½å°±åŒ…æ‹¬è¿™æ ·çš„è§„èŒƒï¼šâ€œå½“æŸè¡Œä»£ç å‡ºé”™æ—¶ï¼Œä¸ç»§ç»­å¾€ä¸‹è§£é‡Šâ€ï¼‰</p><p>æ¥æº: <a href="http://www.cnblogs.com/baizhantang/archive/2012/09/11/2680453.html"><a href="http://www.cnblogs.com/baizhantang/archive/2012/09/11/2680453.html">http://www.cnblogs.com/baizhantang/archive/2012/09/11/2680453.html</a></a></p><h1>å…¶å®ƒè§£é‡Š</h1>
<p>ç­‰ç­‰,  è¿™é‡Œå°±å®Œäº†å—? è¿™é‡Œæœ‰æ›´æ˜ç¡®çš„è¯´æ³•</p><p>åœ¨<code>CentOS</code>é‡Œï¼Œ/bin/shæ˜¯ä¸€ä¸ªæŒ‡å‘/bin/bashçš„ç¬¦å·é“¾æ¥: (åªæ˜¯åœ¨ CentOS é‡Œå“¦)</p>
<pre><code>[root@centosraw ~]# ls -l /bin/*sh
-rwxr-xr-x. 1 root root 903272 Feb 22 05:09 /bin/bash
-rwxr-xr-x. 1 root root 106216 Oct 17  2012 /bin/dash
lrwxrwxrwx. 1 root root      4 Mar 22 10:22 /bin/sh -&gt; bash
</code></pre>
<p><strong>ä½†åœ¨Mac OSä¸Šä¸æ˜¯</strong>ï¼Œ/bin/shå’Œ/bin/bashæ˜¯ä¸¤ä¸ª<strong>ä¸åŒ</strong>çš„æ–‡ä»¶ï¼Œå°½ç®¡å®ƒä»¬çš„å¤§å°åªç›¸å·®100å­—èŠ‚å·¦å³:</p>
<pre><code>iMac:~ wuxiao$ ls -l /bin/*sh
-r-xr-xr-x  1 root  wheel  1371648  6 Nov 16:52 /bin/bash
-rwxr-xr-x  2 root  wheel   772992  6 Nov 16:52 /bin/csh
-r-xr-xr-x  1 root  wheel  2180736  6 Nov 16:52 /bin/ksh
-r-xr-xr-x  1 root  wheel  1371712  6 Nov 16:52 /bin/sh
-rwxr-xr-x  2 root  wheel   772992  6 Nov 16:52 /bin/tcsh
-rwxr-xr-x  1 root  wheel  1103984  6 Nov 16:52 /bin/zsh
</code></pre>
<p>æ¥æº: <a href="https://github.com/qinjx/30min_guides/blob/master/shell.md"><a href="https://github.com/qinjx/30min_guides/blob/master/shell.md">https://github.com/qinjx/30min_guides/blob/master/shell.md</a></a></p></div>
        
        <div class="prism-action-bar">
            <div class="comment-action action-item"><a class="no-link text-uppercase" href="/archives/-bin-bash%E5%92%8C-bin-sh%E7%9A%84%E5%8C%BA%E5%88%AB/#prism__comment" target="_self"><i class="fa fa-comment"></i>Comment</a></div>
        </div>
        
    </article>
    
</section>

<div class="container">
    <section id="prism__page__pagination" class="prism-pagination" class="col-md-8 offset-md-2">
        <ul>
            
            <li class="next">
                <a class="no-link" href="/page/7/" target="_self"><i class="fa fa-chevron-left" aria-hidden="true"></i>Newer</a>
            </li>
            
            
            <li class="prev text-muted">
                <span title="Viewing the last page.">Older<i class="fa fa-chevron-right" aria-hidden="true"></i></span>
            </li>
            
        </ul>
    </section>
</div>


</main>

            <footer id="prism__footer">
                <section>
                    <div>
                        <nav class="social-links">
                            <ul><li><a class="no-link" title="Twitter" href="https://twitter.com/walkerwzy" target="_blank" rel="noopener noreferrer nofollow"><i class="gi gi-twitter"></i></a></li><li><a class="no-link" title="GitHub" href="https://github.com/walkerwzy" target="_blank" rel="noopener noreferrer nofollow"><i class="gi gi-github"></i></a></li><li><a class="no-link" title="Weibo" href="https://weibo.com/1071696872" target="_blank" rel="noopener noreferrer nofollow"><i class="gi gi-weibo"></i></a></li></ul>
                        </nav>
                    </div>

                    <section id="prism__external_links">
                        <ul>
                            
                            <li>
                                <a class="no-link" target="_blank" href="https://github.com/AlanDecode/Maverick" rel="noopener noreferrer nofollow">Maverick</a>ï¼šğŸ„â€ Go My Own Way.
                                <span>|</span>
                            </li>
                            
                            <li>
                                <a class="no-link" target="_blank" href="https://www.imalan.cn" rel="noopener noreferrer nofollow">Triple NULL</a>ï¼šHome page for AlanDecode.
                                <span>|</span>
                            </li>
                            
                        </ul>
                    </section>

                    <div class="copyright">
                        <p class="copyright-text">
                            <span class="brand">walker's code blog</span>
                            <span>Copyright Â© 2022 AlanDecode</span>
                        </p>
                        <p class="copyright-text powered-by">
                            | Powered by <a href="https://github.com/AlanDecode/Maverick" class="no-link" target="_blank" rel="noopener noreferrer nofollow">Maverick</a> | Theme <a href="https://github.com/Reedo0910/Maverick-Theme-Prism" target="_blank" class="no-link" rel="noopener noreferrer nofollow">Prism</a>
                        </p>
                    </div>
                    <div class="footer-addon">
                        
                    </div>
                </section>
                <script>
                    var site_build_date = "2019-12-06T12:00+08:00"

                </script>
                <script src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/prism-efa8685153.js"></script>
            </footer>
        </div>
    </div>
    </div>

    <script src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/ExSearch/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/ExSearch/ExSearch-493cb9cd89.js"></script>

    <!--katex-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/katex.min.js"></script>
    <script>
        mathOpts = {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "\\[", right: "\\]", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false }
            ]
        };

    </script>
    <script defer src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/auto-render.min.js" onload="renderMathInElement(document.body, mathOpts);"></script>

    
</body>

</html>