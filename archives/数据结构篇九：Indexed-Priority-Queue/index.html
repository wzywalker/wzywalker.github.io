<!DOCTYPE HTML>
<html lang="english">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="true">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Maverick,AlanDecode,Galileo,blog" />
    <meta name="generator" content="Maverick 1.2.1" />
    <meta name="template" content="Prism" />
    <link rel="alternate" type="application/rss+xml" title="walker's code blog &raquo; RSS 2.0" href="/feed/index.xml" />
    <link rel="alternate" type="application/atom+xml" title="walker's code blog &raquo; ATOM 1.0" href="/feed/atom/index.xml" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/prism-b9d78ff38a.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/ExSearch/ExSearch-182e5a8869.css">
    <link href="https://fonts.googleapis.com/css?family=Fira+Code&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
    <script>
        var ExSearchConfig = {
            root: "",
            api: "https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/1bbb2a43193d2f7fa8ad9f28a2369945.json"
        }

    </script>
    
<title>æ•°æ®ç»“æ„ç¯‡ä¹ï¼šIndexed Priority Queue - walker's code blog</title>
<meta name="author" content="walker" />
<meta name="description" content="è¿™æ˜¯ä¸€ä½ google å·¥ç¨‹å¸ˆåˆ†äº«çš„8å°æ—¶çš„æ•°æ®ç»“æ„çš„è§†é¢‘,æˆ‘çš„ç¬”è®°" />
<meta property="og:title" content="æ•°æ®ç»“æ„ç¯‡ä¹ï¼šIndexed Priority Queue - walker's code blog" />
<meta property="og:description" content="è¿™æ˜¯ä¸€ä½ google å·¥ç¨‹å¸ˆåˆ†äº«çš„8å°æ—¶çš„æ•°æ®ç»“æ„çš„è§†é¢‘,æˆ‘çš„ç¬”è®°" />
<meta property="og:site_name" content="walker's code blog" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/archives/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AF%87%E4%B9%9D%EF%BC%9AIndexed-Priority-Queue/" />
<meta property="og:image" content="" />
<meta property="article:published_time" content="2021-11-12T08:00:00-00.00" />
<meta name="twitter:title" content="æ•°æ®ç»“æ„ç¯‡ä¹ï¼šIndexed Priority Queue - walker's code blog" />
<meta name="twitter:description" content="è¿™æ˜¯ä¸€ä½ google å·¥ç¨‹å¸ˆåˆ†äº«çš„8å°æ—¶çš„æ•°æ®ç»“æ„çš„è§†é¢‘,æˆ‘çš„ç¬”è®°" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="" />


    
</head>

<body>
    <div class="container prism-container">
        <header class="prism-header" id="prism__header">
            <h1 class="text-uppercase brand"><a class="no-link" href="/" target="_self">walker's code blog</a></h1>
            <p>coder, reader</p>
            <nav class="prism-nav"><ul><li><a class="no-link text-uppercase " href="/" target="_self">Home</a></li><li><a class="no-link text-uppercase " href="/archives/" target="_self">Archives</a></li><li><a class="no-link text-uppercase " href="/about/" target="_self">About</a></li><li><a href="#" target="_self" class="search-form-input no-link text-uppercase">Search</a></li></ul></nav>
        </header>
        <div class="prism-wrapper" id="prism__wrapper">
            
<main>
    <section class="prism-section row" id="prism__content">
        <article class="yue col-md-8 offset-md-2">
            <h1 class="prism-post-title">æ•°æ®ç»“æ„ç¯‡ä¹ï¼šIndexed Priority Queue</h1>
            <div class="prism-post-time">
                <time class="text-uppercase">
                    November 12 2021
                </time>
            </div>
            <div class="prism-content-body">
                <p>è¿™æ˜¯ä¸€ä½ google å·¥ç¨‹å¸ˆåˆ†äº«çš„8å°æ—¶çš„<a href="https://www.youtube.com/watch?v=RBSGKlAvoiM">æ•°æ®ç»“æ„</a>çš„è§†é¢‘,æˆ‘çš„ç¬”è®°</p><hr />
<h1>Indexed Priority Queue</h1>
<ul>
<li>a traditional priority queue variant</li>
<li>top node supports <code>quick update and deletions of key-value paris</code></li>
</ul>
<figure  style="flex: 77.8894472361809" ><img width="1240" height="796" src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/archives/assets/5e238bf5e89b7b2188cfb748c4e5990e.png" alt=""/></figure><p>è§‚å¯Ÿè¿™ä¸ªå›¾ï¼Œæ•°æ®æ˜¯Anna, Bella...ç­‰ç­‰ï¼Œ</p><ul>
<li>é¦–å…ˆï¼Œä¸ºè¿™ä¸€å †æ•°æ®è¿›è¡Œä»»æ„æ’åºï¼Œå¾—åˆ°ä¸€å †ç´¢å¼•(0,1,...)</li>
<li>ç„¶åç»„ä¸€ä¸ªbinary heapï¼Œè¿™æ ·æ¯ä¸ªå…ƒç´ åˆè·å¾—ä¸€ä¸ªç´¢å¼•ï¼Œå°±æ˜¯åœ¨heapä¸Šçš„åºå·ï¼ˆ<code>Position Map</code>ï¼‰</li>
</ul>
<p>é€šè¿‡ä¸¤ç»„ç´¢å¼•è¿…é€Ÿæ‰¾åˆ°keyï¼ˆå°±æ˜¯äººåï¼‰åœ¨å †ä¸­çš„ä½ç½®ï¼Œæ¯”å¦‚ï¼š</p><ul>
<li>Georgeï¼Œki = 6, pm = 1</li>
<li>kelly, ki = 10, pm = 10</li>
<li>...</li>
</ul>
<p>ç°åœ¨èƒ½è¿…é€Ÿæ‰¾åˆ°æ•°æ®æºåœ¨å †ä¸Šçš„ä½ç½®äº†ï¼Œé‚£ä¹ˆå¦‚æœåè¿‡æ¥å‘¢ï¼Ÿæ¯”å¦‚å †ä¸Šç´¢å¼•3æ˜¯æ•°æ®æºçš„è°ï¼Ÿ</p><ul>
<li>pm = 3 -&gt; ki = 8 -&gt; Issac <strong>BINGO!!!</strong></li>
</ul>
<p>ä½†ç¥å¥‡çš„äº‹å‘ç”Ÿäº†ï¼Œæœ‰äººå¸Œæœ›å¤ç”¨kiè¿™ä¸ªè‡ªç„¶æ•°åºåˆ—ï¼ˆé—²çš„è›‹ç–¼ï¼Ÿï¼‰ï¼Œäºæ˜¯å¤šåšäº†ä¸€ä¸ªæ•°ç»„ï¼ŒæŠŠkiå®šä¹‰ä¸ºheapä¸Šçš„ç´¢å¼•ï¼Œä¸å…ƒç´ åŸæ¥çš„kiè¿›è¡Œæ˜ å°„ï¼ˆ<code>Inverse Map</code>ï¼‰:IM
<figure  style="flex: 68.88888888888889" ><img width="1240" height="900" src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/archives/assets/71be1add8c1a0cde72e08fc72adbd071.png" alt=""/></figure></p><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™å¼ å›¾ä¸Šå¼ ä¸ªkiåˆ°imçš„æ˜ å°„ï¼Œä¸pmåˆ°kiçš„æ˜ å°„å…¶å®æ˜¯ä¸€æ ·çš„ï¼Œä¹Ÿå°±æ˜¯è¯´é‡å®šä¹‰äº†ä¸€ä¸‹ï¼Œå¹¶æ²¡æœ‰å¼•å…¥æ–°çš„ä¸œè¥¿ã€‚(pmè¡¨é‡Œæ‰¾åˆ°3ï¼Œå¯¹åº”çš„ç¬¬ä¸€è¡Œkiè¡¨é‡Œå°±æ˜¯8ï¼‰</p><p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ç›´æ¥ç”¨kiçš„3å°±èƒ½æ‰¾åˆ°imçš„8ï¼Œç»§è€Œæ‰¾åˆ°æ•°æ®æºçš„<em>Issac</em>äº†ã€‚</p><h2>Insertion</h2>
<p>ä¸Šé¢çš„æ•°ç»„ï¼Œæˆ‘ä»¬å¾€é‡Œé¢æ·»åŠ ç¬¬12æ¡æ•°æ®è¯•è¯•:</p><ul>
<li>{ki:12, pm: 12, im:12, value:2}</li>
<li>æ˜¾ç„¶è¿åäº†binary heapçš„ invariantï¼Œå‘ä¸Šå†’æ³¡ï¼Œä¹Ÿå°±æ˜¯è·Ÿ{ki:12, pm:5, im:2, value:4}çš„èŠ‚ç‚¹äº’æ¢</li>
<li>æ­¤æ—¶ï¼Œæ•°æ®æºè‚¯å®šä¸ä¼šå˜ï¼Œä½†æ˜¯èŠ‚ç‚¹å˜äº†ï¼Œpmçš„å€¼å°±è¦äº¤æ¢ï¼ˆ5ï¼Œ 12 äº’æ¢ï¼‰</li>
<li>pmå˜äº†ï¼ŒæŠŠpmå½“æˆkiçš„æ˜ å°„è¡¨imä¹Ÿè¦å˜ï¼ˆ12ï¼Œ 11äº’æ¢ï¼‰</li>
</ul>
<figure  style="flex: 224.63768115942028" ><img width="1240" height="276" src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/archives/assets/47da2e700214e5e2de16aa42f5b92fb3.png" alt=""/></figure><p>ä»”ç»†è§‚å¯Ÿå›¾ç‰‡ï¼Œææ¸…æ¥šç¬¬ä¸€è¡Œkiåœ¨ä¸¤æ¬¡äº’æ¢æ—¶çš„èº«ä»½å°±æ˜ç™½äº†</p><ul>
<li>pmçš„äº’æ¢æ˜¯ç›´è§‚çš„ï¼Œå°±æ˜¯èŠ‚ç‚¹çš„ä½ç½®</li>
<li>çŸ¥é“pmäº’æ¢çš„ä¾æ®åï¼ˆ2ï¼Œ5ï¼‰ï¼Œåœ¨ç¬¬ä¸€è¡Œæ‰¾2ï¼Œ5å¯¹åº”çš„imå€¼äº’æ¢ï¼Œå› ä¸ºåœ¨è¿™ä¸ªæ˜ å°„é‡Œï¼Œç›¸å½“äºpmä¸åŸkiçš„æ˜ å°„ï¼Œpmæ­¤æ—¶æ˜¯ï¼ˆ2ï¼Œ5ï¼‰äº†ã€‚</li>
</ul>
<p>åŒæ ·é€»è¾‘ç»§ç»­å†’æ³¡å°±æ˜¯äº†ã€‚</p><p>pseudo code:</p><div class="highlight"><pre><span></span><span class="c1"># Inserts a value into the min indexed binary </span>
<span class="c1"># heap. The key index must not already be in </span>
<span class="c1"># the heap and the value must not be null. </span>
<span class="n">function</span> <span class="n">insert</span><span class="p">(</span><span class="n">ki</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="n">values</span><span class="p">[</span><span class="n">ki</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="c1"># â€˜szâ€™ is the current size of the heap</span>
    <span class="n">pm</span><span class="p">[</span><span class="n">ki</span><span class="p">]</span> <span class="o">=</span> <span class="n">sz</span>  <span class="c1"># å¯¹åº”ä¸Šå›¾ï¼Œæ„æ€å°±ç¬¬ä¸€è¡Œç´¢å¼•å™¨æ˜¯ki</span>
    <span class="n">im</span><span class="p">[</span><span class="n">sz</span><span class="p">]</span> <span class="o">=</span> <span class="n">ki</span>  <span class="c1"># å¯¹åº”ä¸Šå›¾ï¼Œæ„æ€å°±æ˜¯ä¸€è¡Œç´¢å¼•å™¨æ˜¯pm</span>
    <span class="n">swim</span><span class="p">(</span><span class="n">sz</span><span class="p">)</span>     <span class="c1"># è¿™é‡Œä¼ è¿›å»çš„pmï¼Œå³heapä¸ŠèŠ‚ç‚¹çš„ç´¢å¼•</span>
    <span class="n">sz</span> <span class="o">=</span> <span class="n">sz</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c1"># æ·»åŠ æˆåŠŸï¼ŒsizeåŠ 1</span>
</pre></div>
<p>ç†è®ºä¸Šï¼Œæ·»åŠ å…ƒç´ åˆ°æœ€åä¸€ä¸ª, szå’Œkiåº”è¯¥æ˜¯ç›¸ç­‰çš„ï¼ˆå› ä¸ºéƒ½æ˜¯å°¾å·´ä¸Šï¼‰</p><div class="highlight"><pre><span></span><span class="c1"># Swims up node i (zero based) until heap </span>
<span class="c1"># invariant is satisfied.</span>
<span class="n">function</span> <span class="n">swim</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
    <span class="c1"># æ¯”çˆ¶èŠ‚ç‚¹å°å°±å†’æ³¡ï¼Œæ³¨æ„å…¥å‚iæ˜¯èŠ‚ç‚¹ä¸Šçš„ç´¢å¼•ï¼Œå³pm</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">p</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">less</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">p</span><span class="p">)):</span> 
        <span class="n">swap</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>  <span class="c1"># æ‰€ä»¥è¿™é‡Œä¼ çš„ä¹Ÿæ˜¯pm</span>
        <span class="n">i</span><span class="o">=</span><span class="n">p</span>
        <span class="n">p</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>

<span class="n">function</span> <span class="n">swap</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">):</span> 
    <span class="c1"># æˆ‘ä»¬äº¤æ¢äº†èŠ‚ç‚¹ï¼Œéœ€è¦äº¤æ¢pmè¡¨é‡Œçš„å€¼ï¼Œå’Œimè¡¨é‡Œçš„å€¼</span>
    <span class="c1"># äº¤æ¢pmçš„å€¼éœ€è¦æ•°æ®æºçš„ç´¢å¼•ï¼Œå³kiï¼Œè€Œkièƒ½ä»imè¡¨é‡Œç”¨pmç®—å‡ºæ¥</span>
    <span class="c1"># æ‰€ä»¥ki = im[pm] è¿™é‡Œi,jæ˜¯pmï¼Œæ‰€ä»¥im[i]è‡ªç„¶å°±æ˜¯iå¯¹åº”ki</span>
    <span class="c1"># pm[ki]å½“ç„¶å°±æ˜¯pm[im[i]]äº†ï¼š</span>
    <span class="n">pm</span><span class="p">[</span><span class="n">im</span><span class="p">[</span><span class="n">j</span><span class="p">]],</span> <span class="n">pm</span><span class="p">[</span><span class="n">im</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">j</span><span class="p">,</span> <span class="n">i</span>
    <span class="n">im</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">im</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">im</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">im</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

<span class="n">function</span> <span class="n">less</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">values</span><span class="p">[</span><span class="n">im</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">&lt;</span> <span class="n">values</span><span class="p">[</span><span class="n">im</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span>
</pre></div>
<p>è¿˜æ˜¯é‚£å¥è¯ï¼Œç†è§£æ¸…æ¥šé‚£ä¸‰è¡Œæ˜ å°„è¡¨é‡Œç¬¬ä¸€è¡Œçš„åŠ¨æ€å«ä¹‰ï¼Œå°±ä¸ä¼šæœ‰é—®é¢˜ã€‚</p><ul>
<li>pmè¡¨è¦key indexæ¥ç´¢å¼•</li>
<li>imè¡¨è¦node indexæ¥ç´¢å¼•</li>
</ul>
<p>åœ¨æ“ä½œæ—¶ï¼Œåªéœ€è¦çŸ¥é“ä¼ å…¥çš„æ˜¯å“ªç§ç´¢å¼•ï¼ŒåŠæ—¶è½¬åŒ–å°±è¡Œäº†ã€‚</p><p>æœ‰äº†ç´¢å¼•ï¼Œlookupçš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯å¸¸é‡æ—¶é—´äº†ï¼šO(1)</p><h2>Polling and Removals</h2>
<p>æ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šçš„,ä»ç„¶æ˜¯æ‰¾åˆ°èŠ‚ç‚¹,ä¸æœ€åä¸€ä¸ªäº¤æ¢,ç§»é™¤æœ€åä¸€ä¸ªèŠ‚ç‚¹,ç„¶åå†çœ‹æœ€åä¸€ä¸ªåœ¨å †é‡Œæ˜¯ä¸Šå‡è¿˜æ˜¯ä¸‹é™.
ä»ç„¶æ˜¯è®°å¾—æ¯ä¸€æ­¥äº¤æ¢,ç›¸åº”çš„å‡ ä¸ªç´¢å¼•å€¼ä¹Ÿéœ€è¦éšä¹‹äº¤æ¢.(polling å…¶å®å°±æ˜¯ç§»é™¤ç¬¬1ä¸ªèŠ‚ç‚¹,æœ¬è´¨ä¸Šè¿˜æ˜¯ removal)
<figure class="vertical-figure" style="flex: 36.70811130846655" ><img width="1240" height="1689" src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/archives/assets/581b8563020c36307eae7a9bf618a7e0.png" alt=""/></figure></p><p>pseudo code</p><div class="highlight"><pre><span></span><span class="c1"># Deletes the node with the key index ki</span>
<span class="c1"># in the heap. The key index ki must exist </span>
<span class="c1"># and be present in the heap.</span>
<span class="n">function</span> <span class="n">remove</span><span class="p">(</span><span class="n">ki</span><span class="p">):</span>
    <span class="c1"># æ³¨æ„ï¼Œè¿™é‡Œé€è¿›æ¥çš„æ˜¯kiï¼Œè€Œä¸æ˜¯node index(pm)</span>
    <span class="c1"># è¯´æ˜ä¸šåŠ¡éœ€æ±‚ä¸€èˆ¬æ˜¯æ“ä½œæ•°æ®æºï¼Œè€Œä¸æ˜¯æ“ä½œå †</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">pm</span><span class="p">[</span><span class="n">ki</span><span class="p">]</span>    <span class="c1"># è½¬æˆèŠ‚ç‚¹ç´¢å¼•</span>
    <span class="n">sz</span> <span class="o">=</span> <span class="n">sz</span> <span class="o">-</span> <span class="mi">1</span>   <span class="c1"># ä¸æœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢ï¼Œç”¨sizeæ¥åšèŠ‚ç‚¹ç´¢å¼•</span>

    <span class="c1"># ä¸‹é¢ä¸‰ä¸ªå­å‡½æ•°é€å…¥çš„å°±æ˜¯èŠ‚ç‚¹ç´¢å¼•äº†</span>
    <span class="n">swap</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">sz</span><span class="p">)</span> 
    <span class="n">sink</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">swim</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

    <span class="n">values</span><span class="p">[</span><span class="n">ki</span><span class="p">]</span> <span class="o">=</span> <span class="n">null</span>  <span class="c1"># æ•°æ®æºå¯¹åº”çš„å€¼ç½®ç©ºï¼Œæ‰€ä»¥ç”¨ki</span>
    <span class="n">pm</span><span class="p">[</span><span class="n">ki</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>        <span class="c1"># æ•°æ®æºå¯¹åº”çš„èŠ‚ç‚¹ç½®ç©ºï¼Œæ‰€ä»¥ç”¨ki</span>
    <span class="n">im</span><span class="p">[</span><span class="n">sz</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>        <span class="c1"># åæŸ¥è¡¨ç”¨èŠ‚ç‚¹ç´¢å¼•ï¼Œæ­¤å¤„sizeå°±æ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„ç´¢å¼•</span>
</pre></div>
<p>sink pseudo code</p><div class="highlight"><pre><span></span><span class="c1"># Sinks the node at index i by swapping </span>
<span class="c1"># itself with the smallest of the left </span>
<span class="c1"># or the right child node.</span>
<span class="n">function</span> <span class="n">sink</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
    <span class="c1"># è¿™æ˜¯å †æ“ä½œ,ä¼ å…¥çš„ç´¢å¼•ä¹Ÿæ˜¯èŠ‚ç‚¹ç´¢å¼•,æ²¡é—®é¢˜</span>
    <span class="c1"># sinkæ˜¯ä¸‹æ²‰ï¼Œä½†ä¸æ˜¯è·ŸBTSä¸€æ ·æ‰¾å·¦ä¾§æœ€å¤§å³åˆ™æœ€å°é‚£ç§ç›´æ¥æ¢</span>
    <span class="c1"># è€Œæ˜¯ä¸€å±‚å±‚å¾€ä¸‹æ¢</span>
    <span class="c1"># å³ä¸€æ¬¡whileåªè·Ÿå·¦å³å­çº§æ¯”å¤§å°ï¼Œç¡®å®æ¯”å­çº§è¿˜å°çš„è¯ï¼Œå°±æ›¿æ¢ï¼Œç„¶åå†è·Ÿä¸‹ä¸€å±‚æ¯”è¾ƒ</span>
    <span class="k">while</span> <span class="n">true</span><span class="p">:</span>
        <span class="c1"># åˆ©ç”¨äºŒå‰æ ‘ç‰¹æ€§ç®—å‡ºå­èŠ‚ç‚¹</span>
        <span class="c1"># é»˜è®¤å·¦è¾¹æœ€å°ï¼Œç„¶åå†çœ‹å³è¾¹æ˜¯ä¸æ˜¯æ›´å°</span>
        <span class="n">left</span> <span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span>
        <span class="n">right</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span>
        <span class="n">smallest</span> <span class="o">=</span> <span class="n">left</span>
    <span class="c1"># å³è¾¹ä¸è¶Šç•Œï¼Œä¸”å°äºå·¦è¾¹ï¼Œå°±è®¾å³è¾¹</span>
    <span class="k">if</span> <span class="n">right</span> <span class="o">&lt;</span> <span class="n">sz</span> <span class="ow">and</span> <span class="n">less</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">left</span><span class="p">):</span>
        <span class="n">smallest</span> <span class="o">=</span> <span class="n">right</span>
    <span class="c1"># å·¦ä¾§éƒ½è¶Šç•Œäº†ï¼Œæˆ–å·²ç»æ¯”æœ€å°å€¼å¤§äº†ï¼Œè¯´æ˜ä¸éœ€è¦ä¸‹æ²‰äº†</span>
    <span class="k">if</span> <span class="n">left</span> <span class="o">&gt;=</span> <span class="n">sz</span> <span class="ow">or</span> <span class="n">less</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">smallest</span><span class="p">):</span>
        <span class="k">break</span>
    <span class="c1"># åªè¦æ²¡æœ‰breakï¼Œè¯´æ˜èƒ½äº¤æ¢ï¼Œç„¶åæŠŠäº¤æ¢åçš„ä½œä¸ºä¸‹ä¸€ä¸ªå¾ªç¯çš„èµ·ç‚¹</span>
    <span class="n">swap</span><span class="p">(</span><span class="n">smallest</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">smallest</span>
</pre></div>
<h2>Updates</h2>
<p>æ›´æ–°èŠ‚ç‚¹è¦ç®€å•çš„å¤š:</p><ul>
<li>ç”¨kiæ‰¾åˆ°valueï¼ŒæŠŠå€¼æ›´æ–°</li>
<li>ç„¶åæ ¹æ®æ–°valueå®é™…æƒ…å†µä¸Šæµ®æˆ–ä¸‹æ²‰</li>
</ul>
<div class="highlight"><pre><span></span><span class="c1"># Updates the value of a key in the binary </span>
<span class="c1"># heap. The key index must exist and the</span>
<span class="c1"># value must not be null.</span>
<span class="n">function</span> <span class="n">update</span><span class="p">(</span><span class="n">ki</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">pm</span><span class="p">[</span><span class="n">ki</span><span class="p">]</span>
    <span class="n">values</span><span class="p">[</span><span class="n">ki</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="n">sink</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">swim</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
<h2>Decrease and Increase key</h2>
<p>ä¸å¥½è¯´ï¼Œå…ˆçœ‹ä»£ç å§ï¼š</p><div class="highlight"><pre><span></span><span class="c1"># For both these functions assume ki and value </span>
<span class="c1"># are valid inputs and we are dealing with a</span>
<span class="c1"># min indexed binary heap.</span>
<span class="n">function</span> <span class="n">decreaseKey</span><span class="p">(</span><span class="n">ki</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">less</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">values</span><span class="p">[</span><span class="n">ki</span><span class="p">]):</span> 
        <span class="n">values</span><span class="p">[</span><span class="n">ki</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span> 
        <span class="n">swim</span><span class="p">(</span><span class="n">pm</span><span class="p">[</span><span class="n">ki</span><span class="p">])</span>

<span class="n">function</span> <span class="n">increaseKey</span><span class="p">(</span><span class="n">ki</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span> 
    <span class="k">if</span> <span class="n">less</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="n">ki</span><span class="p">],</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">values</span><span class="p">[</span><span class="n">ki</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span> 
        <span class="n">sink</span><span class="p">(</span><span class="n">pm</span><span class="p">[</span><span class="n">ki</span><span class="p">])</span>
</pre></div>
<p>ä»£ç é‡Œæ˜¯è·Ÿä¸€ä¸ªå›ºå®šå€¼æ¯”è¾ƒï¼Œåªè¦kiå¯¹åº”çš„å€¼æ¯”å®ƒå¤§(desreaseKey)æˆ–å°(increaseKeyï¼‰ï¼Œå°±ç”¨è¿™ä¸ªå›ºå®šå€¼æ¥æ›¿æ¢å®ƒï¼Œå¹¶ä¸”åœ¨valueæ”¹å˜åæ ¹æ®å®é™…æƒ…å†µä¸Šæµ®æˆ–ä¸‹æ²‰ã€‚</p>
            </div>
        </article>
        <div class="prism-post-meta col-md-8 offset-md-2">
    <span>walker</span>
    
    <span>/</span>
    <span>
        <a class="category no-link" href="/category/posts/" target="_self">
        posts
        </a>
    </span>
    
    
    <span>/</span>
    
    <span class="prism-tag">
        <a class="no-link" href="/tag/data%20struct/" target="_self">#data struct</a>
    </span>
    
    <span class="prism-tag">
        <a class="no-link" href="/tag/queue/" target="_self">#queue</a>
    </span>
    
    <span class="prism-tag">
        <a class="no-link" href="/tag/indexed%20priority%20queue/" target="_self">#indexed priority queue</a>
    </span>
    
    
    
    <span>/</span>
    <span class="leancloud_visitors" id="/archives/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AF%87%E4%B9%9D%EF%BC%9AIndexed-Priority-Queue/" data-flag-title="æ•°æ®ç»“æ„ç¯‡ä¹ï¼šIndexed Priority Queue"><span class="leancloud-visitors-count"></span> Views</span>
    
</div>
    </section>

    
<section id="prism__pagination" class="prism-pagination" class="col-md-8 offset-md-2">
    <ul>
        
        <li class="next">
            <a class="no-link" href="/archives/Thread-in-iOS/" target="_self" title="Thread-in-iOS"><i class="fa fa-chevron-left" aria-hidden="true"></i>Newer</a>
        </li>
        
        
        <li class="prev">
            <a class="no-link" href="/archives/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AF%87%E5%85%AB%EF%BC%9ABalanced-Binary-Search-Trees%28BBST%29/" target="_self" title="æ•°æ®ç»“æ„ç¯‡å…«ï¼šBalanced Binary Search Trees(BBST)">Older<i class="fa fa-chevron-right" aria-hidden="true"></i></a>
        </li>
        
    </ul>
</section>


    
    <script>
        var initValine = function() {
            new Valine({"enable": true, "el": "#vcomments", "appId": "7tP92LoqK2cggW61DvJmWBo0-gzGzoHsz", "appKey": "iQCtrtlr8eKrQllM03GMESMJ", "visitor": true, "recordIP": true});
        }

    </script>
    <script defer src='https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js' onload="initValine()"></script>
    <div class="prism-comment-section container" id="prism__comment">
        <div class="row">
            <div class="col-md-8 offset-md-2">
                <div id="vcomments"></div>
            </div>
        </div>
    </div>
    

</main>

            <footer id="prism__footer">
                <section>
                    <div>
                        <nav class="social-links">
                            <ul><li><a class="no-link" title="Twitter" href="https://twitter.com/walkerwzy" target="_blank" rel="noopener noreferrer nofollow"><i class="gi gi-twitter"></i></a></li><li><a class="no-link" title="GitHub" href="https://github.com/walkerwzy" target="_blank" rel="noopener noreferrer nofollow"><i class="gi gi-github"></i></a></li><li><a class="no-link" title="Weibo" href="https://weibo.com/1071696872" target="_blank" rel="noopener noreferrer nofollow"><i class="gi gi-weibo"></i></a></li></ul>
                        </nav>
                    </div>

                    <section id="prism__external_links">
                        <ul>
                            
                            <li>
                                <a class="no-link" target="_blank" href="https://github.com/AlanDecode/Maverick" rel="noopener noreferrer nofollow">Maverick</a>ï¼šğŸ„â€ Go My Own Way.
                                <span>|</span>
                            </li>
                            
                            <li>
                                <a class="no-link" target="_blank" href="https://www.imalan.cn" rel="noopener noreferrer nofollow">Triple NULL</a>ï¼šHome page for AlanDecode.
                                <span>|</span>
                            </li>
                            
                        </ul>
                    </section>

                    <div class="copyright">
                        <p class="copyright-text">
                            <span class="brand">walker's code blog</span>
                            <span>Copyright Â© 2022 AlanDecode</span>
                        </p>
                        <p class="copyright-text powered-by">
                            | Powered by <a href="https://github.com/AlanDecode/Maverick" class="no-link" target="_blank" rel="noopener noreferrer nofollow">Maverick</a> | Theme <a href="https://github.com/Reedo0910/Maverick-Theme-Prism" target="_blank" class="no-link" rel="noopener noreferrer nofollow">Prism</a>
                        </p>
                    </div>
                    <div class="footer-addon">
                        
                    </div>
                </section>
                <script>
                    var site_build_date = "2019-12-06T12:00+08:00"

                </script>
                <script src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/prism-efa8685153.js"></script>
            </footer>
        </div>
    </div>
    </div>

    <script src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/ExSearch/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/ExSearch/ExSearch-493cb9cd89.js"></script>

    <!--katex-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/katex.min.js"></script>
    <script>
        mathOpts = {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "\\[", right: "\\]", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false }
            ]
        };

    </script>
    <script defer src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/auto-render.min.js" onload="renderMathInElement(document.body, mathOpts);"></script>

    
</body>

</html>