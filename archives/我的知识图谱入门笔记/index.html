<!DOCTYPE HTML>
<html lang="english">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="true">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Maverick,AlanDecode,Galileo,blog" />
    <meta name="generator" content="Maverick 1.2.1" />
    <meta name="template" content="Prism" />
    <link rel="alternate" type="application/rss+xml" title="walker's code blog &raquo; RSS 2.0" href="/feed/index.xml" />
    <link rel="alternate" type="application/atom+xml" title="walker's code blog &raquo; ATOM 1.0" href="/feed/atom/index.xml" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/prism-b9d78ff38a.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/ExSearch/ExSearch-182e5a8869.css">
    <link href="https://fonts.googleapis.com/css?family=Fira+Code&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
    <script>
        var ExSearchConfig = {
            root: "",
            api: "https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/40cba7715e63db76fe2969c8abddf3cd.json"
        }

    </script>
    
<title>æˆ‘çš„çŸ¥è¯†å›¾è°±å…¥é—¨ç¬”è®° - walker's code blog</title>
<meta name="author" content="walker" />
<meta name="description" content="Knowledge Graph" />
<meta property="og:title" content="æˆ‘çš„çŸ¥è¯†å›¾è°±å…¥é—¨ç¬”è®° - walker's code blog" />
<meta property="og:description" content="Knowledge Graph" />
<meta property="og:site_name" content="walker's code blog" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/archives/%E6%88%91%E7%9A%84%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/" />
<meta property="og:image" content="" />
<meta property="article:published_time" content="2021-06-17T00:00:00-00.00" />
<meta name="twitter:title" content="æˆ‘çš„çŸ¥è¯†å›¾è°±å…¥é—¨ç¬”è®° - walker's code blog" />
<meta name="twitter:description" content="Knowledge Graph" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="" />


    
</head>

<body>
    <div class="container prism-container">
        <header class="prism-header" id="prism__header">
            <h1 class="text-uppercase brand"><a class="no-link" href="/" target="_self">walker's code blog</a></h1>
            <p>coder, reader</p>
            <nav class="prism-nav"><ul><li><a class="no-link text-uppercase " href="/" target="_self">Home</a></li><li><a class="no-link text-uppercase " href="/archives/" target="_self">Archives</a></li><li><a class="no-link text-uppercase " href="/about/" target="_self">About</a></li><li><a href="#" target="_self" class="search-form-input no-link text-uppercase">Search</a></li></ul></nav>
        </header>
        <div class="prism-wrapper" id="prism__wrapper">
            
<main>
    <section class="prism-section row" id="prism__content">
        <article class="yue col-md-8 offset-md-2">
            <h1 class="prism-post-title">æˆ‘çš„çŸ¥è¯†å›¾è°±å…¥é—¨ç¬”è®°</h1>
            <div class="prism-post-time">
                <time class="text-uppercase">
                    June 17 2021
                </time>
            </div>
            <div class="prism-content-body">
                <h1>Knowledge Graph</h1>
<ul>
<li>ä¿¡æ¯æ˜¯æŒ‡å¤–éƒ¨çš„å®¢è§‚äº‹å®ã€‚ä¸¾ä¾‹ï¼šè¿™é‡Œæœ‰ä¸€ç“¶æ°´ï¼Œå®ƒç°åœ¨æ˜¯7Â°ã€‚</li>
<li>çŸ¥è¯†æ˜¯å¯¹å¤–éƒ¨å®¢è§‚è§„å¾‹çš„å½’çº³å’Œæ€»ç»“ã€‚ä¸¾ä¾‹ï¼šæ°´åœ¨é›¶åº¦çš„æ—¶å€™ä¼šç»“å†°ã€‚</li>
</ul>
<p>æ¢å¥è¯è¯´ï¼ŒçŸ¥è¯†å›¾è°±æ˜¯ç”±ä¸€æ¡æ¡çŸ¥è¯†ç»„æˆï¼Œæ¯æ¡çŸ¥è¯†è¡¨ç¤ºä¸ºä¸€ä¸ªSPOä¸‰å…ƒç»„(Subject-Predicate-Object)ã€‚</p><p>$\boxed{Subject} \xrightarrow{Predicate} \boxed{Object}$</p><h1>è¯­ä¹‰ç½‘ç»œ(Semantic Network)</h1>
<p>è¯­ä¹‰ç½‘ç»œç”±ç›¸äº’è¿æ¥çš„èŠ‚ç‚¹å’Œè¾¹ç»„æˆï¼ŒèŠ‚ç‚¹è¡¨ç¤ºæ¦‚å¿µæˆ–è€…å¯¹è±¡ï¼Œè¾¹è¡¨ç¤ºä»–ä»¬ä¹‹é—´çš„å…³ç³»(is-aå…³ç³»ï¼Œæ¯”å¦‚ï¼šçŒ«æ˜¯ä¸€ç§å“ºä¹³åŠ¨ç‰©ï¼›part-ofå…³ç³»ï¼Œæ¯”å¦‚ï¼šè„Šæ¤æ˜¯å“ºä¹³åŠ¨ç‰©çš„ä¸€éƒ¨åˆ†)</p><p>ã€‚åœ¨è¡¨ç°å½¢å¼ä¸Šï¼Œè¯­ä¹‰ç½‘ç»œå’ŒçŸ¥è¯†å›¾è°±ç›¸ä¼¼ï¼Œä½†è¯­ä¹‰ç½‘ç»œæ›´ä¾§é‡äºæè¿°æ¦‚å¿µä¸æ¦‚å¿µä¹‹é—´çš„å…³ç³»ï¼Œï¼ˆæœ‰ç‚¹åƒç”Ÿç‰©çš„å±‚æ¬¡åˆ†ç±»ä½“ç³»â€”â€”ç•Œé—¨çº²ç›®ç§‘å±ç§ï¼‰ï¼Œè€ŒçŸ¥è¯†å›¾è°±åˆ™æ›´åé‡äºæè¿°å®ä½“ä¹‹é—´çš„å…³è”ã€‚</p><h1>RDF(Resoure Description Framework)</h1>
<p>RDF(Resource Description Framework)ï¼Œå³èµ„æºæè¿°æ¡†æ¶ï¼Œæ˜¯W3Cåˆ¶å®šçš„ï¼Œç”¨äºæè¿°å®ä½“/èµ„æºçš„æ ‡å‡†æ•°æ®æ¨¡å‹ã€‚RDFå›¾ä¸­ä¸€å…±æœ‰ä¸‰ç§ç±»å‹ï¼ŒInternational Resource Identifiers(IRIs)ï¼Œblank nodes å’Œ literalsã€‚ä¸‹é¢æ˜¯SPOæ¯ä¸ªéƒ¨åˆ†çš„ç±»å‹çº¦æŸï¼š</p><ul>
<li>Subjectå¯ä»¥æ˜¯IRIæˆ–blank nodeã€‚å¯ä»¥ç†è§£ä¸º<code>URI</code></li>
<li>Predicateæ˜¯IRIã€‚</li>
<li>Objectä¸‰ç§ç±»å‹éƒ½å¯ä»¥ã€‚</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´å­—é¢é‡ä¸èƒ½åšä¸»è¯­ï¼Ÿ</p><p>å°†ç½—çº³å°”å¤šçš„åŸåä¸ä¸­æ–‡åå…³è”èµ·æ¥çš„RDFè¡¨ç¤ºï¼š</p><p>$\boxed{www.kg.com/person/1} \xrightarrow{kg:chineseName} \boxed{ç½—çº³å°”å¤šÂ·è·¯æ˜“æ–¯Â·çº³æ‰é‡Œå¥¥Â·è¾¾Â·åˆ©é©¬}$</p><blockquote>
<p>å¯è§ï¼Œä¸»è¯­çš„æŒ‡ä»£æ€§è¦å¼ºå¾ˆå¤šï¼Œæ‰€ä»¥å­—é¢é‡ï¼ˆå®¾è¯­ï¼‰ç”¨ä½œä¸»è¯­ä¼šä¸§å¤±è¿™ç§ç²¾ç¡®æ€§ï¼ˆå”¯ä¸€æ€§ï¼‰ã€‚</p></blockquote>
<ul>
<li>&quot;<code>www.kg.com/person/1</code>&quot;æ˜¯ä¸€ä¸ªIRIï¼Œç”¨æ¥å”¯ä¸€çš„è¡¨ç¤ºâ€œç½—çº³å°”å¤šâ€è¿™ä¸ªå®ä½“ã€‚&quot;kg:chineseName&quot;ä¹Ÿæ˜¯ä¸€ä¸ªIRIï¼Œç”¨æ¥è¡¨ç¤ºâ€œä¸­æ–‡åâ€è¿™æ ·ä¸€ä¸ªå±æ€§ã€‚&quot;kg:&quot;æ˜¯RDFæ–‡ä»¶ä¸­æ‰€å®šä¹‰çš„prefixï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</li>
<li>@<code>prefix kg</code>: <a href="http://www.kg.com/ontology/">http://www.kg.com/ontology/</a> å³ï¼Œkg:chineseNameå…¶å®å°±æ˜¯&quot;http:// www.kg.com/ontology/chineseName&quot;çš„ç¼©å†™ã€‚</li>
</ul>
<p>è¿™æ ·çŸ¥è¯†å›¾è°±çš„æ­£ç¡®è¡¨ç¤ºå…¶å®æ˜¯ï¼š</p><figure  style="flex: 81.6618911174785" ><img width="1140" height="698" src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/archives/assets/055b61a7e0a74762f15ece471ec22ee8.png" alt=""/></figure><p>è€Œä¸æ˜¯ç½‘ä¼ çš„ç®€å•çš„ç”»å‡ ä¸ªå¯¹è±¡è¿å‡ æ ¹çº¿ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œèƒ½ç”¨URIè¡¨ç¤ºçš„ï¼Œå°½é‡éƒ½ç”¨URIè¡¨ç¤ºã€‚</p><h1>Identifying graph-shaped problems(åº”ç”¨åœºæ™¯)</h1>
<ul>
<li><p>does our problem involve understanding <code>relationships</code> between entities?</p><ul>
<li>Recommendations</li>
<li>Next best action</li>
<li>Fraud detection</li>
<li>Identity resolution</li>
<li>Data lineage</li>
</ul>
</li>
<li><p>does our problem involve a lot of <code>self-referencing</code> to the same type of entity?</p><ul>
<li>Organisational hierachies</li>
<li>Social influencers</li>
<li>Friends of friends</li>
<li>Churn detection</li>
</ul>
</li>
<li><p>does the problem explore <code>relationships of varying or unknown depth</code>?</p><ul>
<li>Supply chain visibility</li>
<li>Bill of  Materials(BOM)</li>
<li>Network management</li>
</ul>
</li>
<li><p>does our problem involve discovering lots of <code>different routers or paths</code>?</p><ul>
<li>Logistics and routing</li>
<li>Infrastructure management</li>
<li>Dependency tracing</li>
</ul>
</li>
</ul>
<h1>Neo4j</h1>
<figure  style="flex: 88.44507845934379" ><img width="1240" height="701" src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/archives/assets/1da110e1163eb31331ea2c21528a4ae2.png" alt=""/></figure><ol>
<li><code>:person</code>, <code>:Car</code>, <code>:Vehicle</code> are <code>Label</code></li>
<li>even <code>relationship</code> can also have(own) properties</li>
</ol>
<h2>AsciiArt</h2>
<h3>for Nodes</h3>
<p><code>(p:Person:Mammal{name:'walker'})</code></p><h3>for Relationships</h3>
<p><code>- [:HIRED {type: 'fulltime'}] -&gt;</code></p><h2>CRUD</h2>
<h3>Create</h3>
<figure  style="flex: 87.94326241134752" ><img width="1240" height="705" src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/archives/assets/1664c809c2f78ab7dc14392c1ef00ac9.png" alt=""/></figure><h4>Constraints</h4>

<pre><code>CREATE  CONSTRAINT ON (p:Person)
ASSERT p.name IS UNIQUE
</code></pre>
<p>æ‰€ä»¥å¦‚ä¸‹è¯­å¥ä¼šæŠ¥é”™ï¼š</p>
<pre><code>CREATE (a:Person {name: &quot;Ann&quot;})
CREATE (a) - [:HAS_PET] -&gt; (:Dog {name: &quot;Sam&quot;})
</code></pre>
<p>è¦ç”¨<code>merge</code></p>
<pre><code>MERGE (a:Person {name: &quot;Ann&quot;})
CREATE (a) - [:HAS_PET] -&gt; (:Dog {name: &quot;Sam&quot;})
</code></pre>
<h4>Set</h4>
<p>å±æ€§å¯ä»¥ç”¨<code>JSON</code>æ ¼å¼å†™ï¼Œä¹Ÿå¯ä»¥ç”¨<code>SET</code>è¯­æ³•ï¼ˆä¸‹é¢çš„æŸ¥è¯¢è¯­å¥ä¹Ÿæ˜¯ä¸€æ ·ï¼‰</p>
<pre><code>MERGE (a:Person {name: &quot;Ann&quot;})
ON CREATE SET
    a.twitter = &quot;@ann&quot;
MERGE (a) - [:HAS_PET] -&gt; (:Dog {name: &quot;Sam&quot;})
</code></pre>
<p>åŒæ—¶ï¼Œçœ‹åˆ°äº†å—ï¼Ÿ<code>create</code>åªèƒ½å‡ºç°ä¸€æ¬¡ï¼ˆåŒä¸€ä¸ªå¯¹è±¡çš„è¯ï¼‰</p><h3>Read</h3>
<blockquote>
<p>who drives a car owned by a lover?</p></blockquote>
<div class="highlight"><pre><span></span><span class="k">MATCH</span><span class="w"></span>
<span class="p">(</span><span class="n">p1</span><span class="p">:</span><span class="n">Person</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">[:</span><span class="n">DRIVES</span><span class="p">]</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">(</span><span class="k">c</span><span class="p">:</span><span class="n">Car</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">[:</span><span class="n">OWNED_BY</span><span class="p">]</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">p2</span><span class="p">:</span><span class="n">Person</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="p">[:</span><span class="n">LOVES</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">P1</span><span class="p">)</span><span class="w"></span>
<span class="k">RETURN</span><span class="w"></span>
<span class="n">p1</span><span class="w"></span>
</pre></div>
<p>å…¶ä¸­ï¼Œå› ä¸ºé—®çš„æ˜¯loverï¼Œæ²¡æœ‰æŒ‡å‘æ€§ï¼Œæ‰€ä»¥å¦‚æœæ˜¯ä¸¤ä¸ªäº’ç›¸ç›¸çˆ±ï¼ŒååŠæˆªä¹Ÿå¯ä»¥æ˜¯p2æŒ‡å‘p1</p>
<pre><code>match p = (n) -[*1..2] -&gt; (m) where n.name='ç‰¹æœ—æ™®' return p
match p =  ({name: 'ç‰¹æœ—æ™®'}) - [*1..2] -&gt; () return p # ç®€åŒ–
match p = (n)-[m]-&gt;(q) where m.name = 'ä¸ˆå¤«' return n,q skip 10 limit 5
match p = (n)-[:ä¸ˆå¤«]-&gt;(q) return n,q skip 10 limit 5 # ç®€åŒ–
</code></pre>
<p>è§£è¯»ï¼š</p><ol>
<li>ä¸Šé¢å†™æ³•å¾ˆç®€ç•¥ï¼Œæ³¨æ„è§‚å¯Ÿä¸€ä¸‹</li>
<li>åˆä¸€æ¬¡æ¼”ç¤ºäº†ç›´æ¥ç”¨jsonæ¥åšwhereå’Œå•ç‹¬ç”¨<code>where</code>å…³é”®å­—çš„å†™æ³•åŒºåˆ«ï¼ˆè¦å¤šå‘½åä¸€ä¸ªå˜é‡ï¼‰</li>
<li>pè·Ÿnçš„åŒºåˆ«ï¼Œpæ˜¯è¿”äº†æ•´ä¸ªç½‘ç»œï¼Œå¦‚æœ<code>return n</code>ï¼Œé‚£ä¹ˆå°±æ˜¯nè‡ªèº«(ä¸€ä¸ªèŠ‚ç‚¹ï¼‰ã€‚</li>
</ol>
<p>4, ä½†æ˜¯å¦‚æœ<code>return n, m</code>ï¼Œé‚£ä¹ˆåˆæŠŠä¸€å±‚ç½‘ç»œç»™selectå‡ºæ¥äº† 
5. [*1..2]è¡¨ç¤ºè·Ÿè¸ªä¸¤å±‚
6. å¦‚æœä¸éœ€è¦å¯¹n,mè¿›è¡Œwhere,setæ“ä½œï¼Œå¯ä»¥ä¸è®¾ç½®å˜é‡
7. <code>relationship</code>ä¹Ÿå¯ä»¥è¿‡æ»¤ï¼Œä¹Ÿæœ‰nameç­‰å±æ€§
8. <code>limit</code>, <code>skip</code> ç­‰ç”¨æ³•</p><h4>Tabular Results</h4>
<div class="highlight"><pre><span></span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">:</span><span class="n">Person</span><span class="w"> </span><span class="err">{</span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="ss">&quot;Tom Hanks&quot;</span><span class="err">}</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">[</span><span class="n">r</span><span class="p">:</span><span class="n">ACTED_IN</span><span class="o">|</span><span class="n">DIRECTED</span><span class="p">]</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">m</span><span class="p">:</span><span class="n">Movie</span><span class="p">)</span><span class="w"></span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="n">r</span><span class="p">,</span><span class="n">m</span><span class="w"></span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="k">type</span><span class="p">(</span><span class="n">r</span><span class="p">),</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">title</span><span class="w"></span>
</pre></div>
<p>å‰è€…è¿”å›Graphï¼Œåè€…è¿”å›è¡¨æ ¼æ•°æ®</p><h3>Update</h3>
<blockquote>
<p>P.S. <code>where</code>æ˜¯å¯¹å±æ€§åšé™åˆ¶ï¼Œæ‰€ä»¥æŸ¥è¯¢æ¡ä»¶æ—¢å¯ä»¥å†™åœ¨å±æ€§é‡Œï¼Œä¹Ÿå¯ä»¥ç”¨<code>where</code>è¯­å¥æ¥åšè¿‡æ»¤.</p></blockquote>
<p>è¦å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œä¿®æ”¹ï¼Œç”¨<code>set</code>ï¼ˆæœ‰åˆ™æ”¹ï¼Œæ— åˆ™åŠ ï¼‰</p>
<pre><code>MATCH
(:Person {name: &quot;å¼ ä¸‰&quot;}) - [:LOVES] -&gt; (p:Person)
RETURN
p

MATCH
(p1:Person) - [:LOVES] -&gt; (p2:Person)
WHERE
p1.name = &quot;å¼ ä¸‰&quot;
SET
p2.age = 33  # set by property
# or
p2 += {age: 33, height: 180}  # set by JSON
RETURN
p2
</code></pre>
<p>å¯ä»¥æŠŠ<code>Neo4j</code>ç†è§£ä¸ºå‘½åå®ä½“è¯†åˆ«(<code>NER</code>)ï¼Œå³ä½ åˆ›é€ ä¸€å¥è¯ï¼Œä¸ºå¥å­é‡Œçš„æ¯ä¸ªå®ä½“æ‰“ä¸Šæ ‡ç­¾ï¼Œç„¶åä½ æƒ³è¦è°å°±ç”¨å®ä½“æ ‡ç­¾æŠŠå®ƒå–å‡ºæ¥ã€‚</p><p>æ¯”å¦‚â€œå¼ ä¸‰çˆ±æå››â€ï¼š</p>
<pre><code>step1: å†™æ¡†æ¶
CREATE () - [] -&gt; ()
step2: å¡«èŠ‚ç‚¹å’Œå…³è”
CREATE (:Person {name: &quot;å¼ ä¸‰&quot;}) - [:LOVES] -&gt; (:Person {name: &quot;æå››&quot;})
</code></pre>
<p>è€Œä½ è¦é—®å¼ ä¸‰çˆ±è°:</p>
<pre><code>MATCH
(:Person {name: &quot;å¼ ä¸‰&quot;}) - [:LOVES] -&gt; (p:Person)
RETURN
p
</code></pre>
<p>çœ‹åˆ°æŸ¥è¯¢è¯­å¥äº†å—ï¼Ÿé™¤äº†<code>CREATE</code>, <code>MATCH</code>ç­‰å…³é”®è¯ï¼Œå¥å­é¡ºåºæ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ç›´æ˜¯åœ¨â€œ<strong>é™ˆè¿°</strong>â€ä¸€ä»¶äº‹ã€‚</p><p>è€Œäº‹å®ä¸Šï¼Œè¿™ä¸ª<code>NER</code>åœ¨çŸ¥è¯†å›¾è°±ä¸­è¡¨ç¤ºä¸º<code>RDF</code>ã€‚</p><h3>Delete</h3>
<div class="highlight"><pre><span></span><span class="k">match</span><span class="w"> </span><span class="n">p</span><span class="o">=</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">n</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;å°æ˜&#39;</span><span class="w"> </span><span class="n">detach</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="n">n</span><span class="w"></span>
</pre></div>
<h2>Query</h2>
<h3>æœ€çŸ­è·ç¦»</h3>
<div class="highlight"><pre><span></span><span class="k">MATCH</span><span class="w"></span>
<span class="w">  </span><span class="p">(</span><span class="n">martin</span><span class="p">:</span><span class="n">Person</span><span class="w"> </span><span class="err">{</span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Martin Sheen&#39;</span><span class="err">}</span><span class="p">),</span><span class="w"></span>
<span class="w">  </span><span class="p">(</span><span class="n">oliver</span><span class="p">:</span><span class="n">Person</span><span class="w"> </span><span class="err">{</span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Oliver Stone&#39;</span><span class="err">}</span><span class="p">),</span><span class="w"></span>
<span class="w">  </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">shortestPath</span><span class="p">((</span><span class="n">martin</span><span class="p">)</span><span class="o">-</span><span class="p">[</span><span class="o">*</span><span class="p">..</span><span class="mi">15</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">oliver</span><span class="p">))</span><span class="w"> </span><span class="o">#</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">  </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">allShortestPath</span><span class="p">(....)</span><span class="w"> </span><span class="o">#</span><span class="w"> </span><span class="mi">2</span><span class="w"></span>
<span class="w">  </span><span class="k">WHERE</span><span class="w"> </span><span class="k">none</span><span class="p">(</span><span class="n">r</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="n">relationships</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="k">type</span><span class="p">(</span><span class="n">r</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;FATHER&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">#</span><span class="w"> </span><span class="mi">3</span><span class="w"></span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">p</span><span class="w"></span>
</pre></div>
<ol>
<li>é™å®šäº†15å±‚</li>
<li>Finds <code>all</code> the shortest paths between two nodes.</li>
<li>æ’é™¤äº†å…³ç³»<code>type</code>ä¸º<strong>FATHER</strong>çš„</li>
</ol>
<p>ç»™ä½ ä»¬çœ‹ä¸€ä¸‹ä¸€ä¸ª<code>relationships</code>é•¿å•¥æ ·ï¼š</p><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;identity&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">36629</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;start&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">31343</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;end&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">33922</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;author-&gt;title&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;author-&gt;title&quot;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<h3>æ¨¡ç³ŠåŒ¹é…(%)</h3>
<div class="highlight"><pre><span></span><span class="k">match</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">-</span><span class="p">[</span><span class="o">*</span><span class="mi">1</span><span class="p">..</span><span class="mi">2</span><span class="p">]</span><span class="o">-&gt;</span><span class="p">(</span><span class="n">b</span><span class="p">:</span><span class="n">content</span><span class="p">)</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;æç™½&#39;</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=~</span><span class="w"> </span><span class="s1">&#39;.*æ˜æœˆ.*&#39;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="w"></span>
</pre></div>
<p><code>.*</code>å°±ç›¸å½“äºsqlé‡Œçš„<code>%</code>å§</p><h3>get by id</h3>

<pre><code>MATCH (n)
WHERE id(n) IN [0, 3, 5]
RETURN n
</code></pre>
<ol>
<li>id(n) -&gt; search with id</li>
<li>multiple id use <code>in</code></li>
</ol>
<h3>outer join (optional relationships)</h3>
<div class="highlight"><pre><span></span><span class="k">match</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">:</span><span class="n">author</span><span class="w"> </span><span class="err">{</span><span class="n">name</span><span class="p">:</span><span class="s1">&#39;æç™½&#39;</span><span class="err">}</span><span class="p">)</span><span class="w"></span>
<span class="n">optional</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="c1">--&gt;(b)</span>
<span class="k">return</span><span class="w"> </span><span class="n">b</span><span class="w"></span>
</pre></div>
<p>åœ¨å®ä¾‹ä¸­ï¼ŒbåŒ…å«äº†ä¸¤ç§å®ä¾‹ï¼š</p><ol>
<li>title</li>
<li>introduce</li>
</ol>
<p>ç­‰åŒäºsqlä¸­userè¡¨outer joinäº†ä¸¤ä¸ªè¡¨(title, introduce)</p>
            </div>
        </article>
        <div class="prism-post-meta col-md-8 offset-md-2">
    <span>walker</span>
    
    <span>/</span>
    <span>
        <a class="category no-link" href="/category/posts/" target="_self">
        posts
        </a>
    </span>
    
    
    <span>/</span>
    
    <span class="prism-tag">
        <a class="no-link" href="/tag/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/" target="_self">#çŸ¥è¯†å›¾è°±</a>
    </span>
    
    <span class="prism-tag">
        <a class="no-link" href="/tag/neo4j/" target="_self">#neo4j</a>
    </span>
    
    
    
    <span>/</span>
    <span class="leancloud_visitors" id="/archives/%E6%88%91%E7%9A%84%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/" data-flag-title="æˆ‘çš„çŸ¥è¯†å›¾è°±å…¥é—¨ç¬”è®°"><span class="leancloud-visitors-count"></span> Views</span>
    
</div>
    </section>

    
<section id="prism__pagination" class="prism-pagination" class="col-md-8 offset-md-2">
    <ul>
        
        <li class="next">
            <a class="no-link" href="/archives/%E5%87%A0%E5%A4%A7%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95python%E5%AE%9E%E7%8E%B0/" target="_self" title="å‡ å¤§æ’åºç®—æ³•pythonå®ç°"><i class="fa fa-chevron-left" aria-hidden="true"></i>Newer</a>
        </li>
        
        
        <li class="prev">
            <a class="no-link" href="/archives/HMM%E3%80%81NER%E3%80%81PoS%E3%80%81Viterbi%E7%AC%94%E8%AE%B0/" target="_self" title="HMMã€NERã€PoSã€Viterbiç¬”è®°">Older<i class="fa fa-chevron-right" aria-hidden="true"></i></a>
        </li>
        
    </ul>
</section>


    
    <script>
        var initValine = function() {
            new Valine({"enable": true, "el": "#vcomments", "appId": "7tP92LoqK2cggW61DvJmWBo0-gzGzoHsz", "appKey": "iQCtrtlr8eKrQllM03GMESMJ", "visitor": true, "recordIP": true});
        }

    </script>
    <script defer src='https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js' onload="initValine()"></script>
    <div class="prism-comment-section container" id="prism__comment">
        <div class="row">
            <div class="col-md-8 offset-md-2">
                <div id="vcomments"></div>
            </div>
        </div>
    </div>
    

</main>

            <footer id="prism__footer">
                <section>
                    <div>
                        <nav class="social-links">
                            <ul><li><a class="no-link" title="Twitter" href="https://twitter.com/walkerwzy" target="_blank" rel="noopener noreferrer nofollow"><i class="gi gi-twitter"></i></a></li><li><a class="no-link" title="GitHub" href="https://github.com/walkerwzy" target="_blank" rel="noopener noreferrer nofollow"><i class="gi gi-github"></i></a></li><li><a class="no-link" title="Weibo" href="https://weibo.com/1071696872" target="_blank" rel="noopener noreferrer nofollow"><i class="gi gi-weibo"></i></a></li></ul>
                        </nav>
                    </div>

                    <section id="prism__external_links">
                        <ul>
                            
                            <li>
                                <a class="no-link" target="_blank" href="https://github.com/AlanDecode/Maverick" rel="noopener noreferrer nofollow">Maverick</a>ï¼šğŸ„â€ Go My Own Way.
                                <span>|</span>
                            </li>
                            
                            <li>
                                <a class="no-link" target="_blank" href="https://www.imalan.cn" rel="noopener noreferrer nofollow">Triple NULL</a>ï¼šHome page for AlanDecode.
                                <span>|</span>
                            </li>
                            
                        </ul>
                    </section>

                    <div class="copyright">
                        <p class="copyright-text">
                            <span class="brand">walker's code blog</span>
                            <span>Copyright Â© 2022 AlanDecode</span>
                        </p>
                        <p class="copyright-text powered-by">
                            | Powered by <a href="https://github.com/AlanDecode/Maverick" class="no-link" target="_blank" rel="noopener noreferrer nofollow">Maverick</a> | Theme <a href="https://github.com/Reedo0910/Maverick-Theme-Prism" target="_blank" class="no-link" rel="noopener noreferrer nofollow">Prism</a>
                        </p>
                    </div>
                    <div class="footer-addon">
                        
                    </div>
                </section>
                <script>
                    var site_build_date = "2019-12-06T12:00+08:00"

                </script>
                <script src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/prism-efa8685153.js"></script>
            </footer>
        </div>
    </div>
    </div>

    <script src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/ExSearch/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/ExSearch/ExSearch-493cb9cd89.js"></script>

    <!--katex-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/katex.min.js"></script>
    <script>
        mathOpts = {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "\\[", right: "\\]", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false }
            ]
        };

    </script>
    <script defer src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/auto-render.min.js" onload="renderMathInElement(document.body, mathOpts);"></script>

    
</body>

</html>