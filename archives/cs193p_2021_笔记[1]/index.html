<!DOCTYPE HTML>
<html lang="english">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="true">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Maverick,AlanDecode,Galileo,blog" />
    <meta name="generator" content="Maverick 1.2.1" />
    <meta name="template" content="Prism" />
    <link rel="alternate" type="application/rss+xml" title="walker's code blog &raquo; RSS 2.0" href="/feed/index.xml" />
    <link rel="alternate" type="application/atom+xml" title="walker's code blog &raquo; ATOM 1.0" href="/feed/atom/index.xml" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/prism-b9d78ff38a.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/ExSearch/ExSearch-182e5a8869.css">
    <link href="https://fonts.googleapis.com/css?family=Fira+Code&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
    <script>
        var ExSearchConfig = {
            root: "",
            api: "https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/6a68a4aadbc41b83c53b12cb3391dc62.json"
        }

    </script>
    
<title>cs193p_2021_ç¬”è®°[1] - walker's code blog</title>
<meta name="author" content="walker" />
<meta name="description" content="2020å¹´çœ‹äº†ä¸€éï¼Œåæ¥å­¦æ·±åº¦å­¦ä¹ å»äº†ï¼Œç„¶åå‘ç°2021ä¹Ÿå‡ºæ¥äº†ï¼Œä»ç„¶æ˜¯è§†é¢‘æˆè¯¾ï¼ˆå¯¹æˆ‘ä»¬æ²¡åŒºåˆ«ï¼‰ï¼Œçœ‹å®Œåæ•´ç†äº†ä¸¤å¹´è¯¾ç¨‹çš„ç¬”è®°ã€‚æœ¬æ–‡æ¶‰åŠå†…å®¹ï¼šstruct, enum, optional, protocol, viewbuilder, shapecs193p_2021_ç¬”è®°_2" />
<meta property="og:title" content="cs193p_2021_ç¬”è®°[1] - walker's code blog" />
<meta property="og:description" content="2020å¹´çœ‹äº†ä¸€éï¼Œåæ¥å­¦æ·±åº¦å­¦ä¹ å»äº†ï¼Œç„¶åå‘ç°2021ä¹Ÿå‡ºæ¥äº†ï¼Œä»ç„¶æ˜¯è§†é¢‘æˆè¯¾ï¼ˆå¯¹æˆ‘ä»¬æ²¡åŒºåˆ«ï¼‰ï¼Œçœ‹å®Œåæ•´ç†äº†ä¸¤å¹´è¯¾ç¨‹çš„ç¬”è®°ã€‚æœ¬æ–‡æ¶‰åŠå†…å®¹ï¼šstruct, enum, optional, protocol, viewbuilder, shapecs193p_2021_ç¬”è®°_2" />
<meta property="og:site_name" content="walker's code blog" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/archives/cs193p_2021_%E7%AC%94%E8%AE%B0%5B1%5D/" />
<meta property="og:image" content="" />
<meta property="article:published_time" content="2021-10-24T00:00:00-00.00" />
<meta name="twitter:title" content="cs193p_2021_ç¬”è®°[1] - walker's code blog" />
<meta name="twitter:description" content="2020å¹´çœ‹äº†ä¸€éï¼Œåæ¥å­¦æ·±åº¦å­¦ä¹ å»äº†ï¼Œç„¶åå‘ç°2021ä¹Ÿå‡ºæ¥äº†ï¼Œä»ç„¶æ˜¯è§†é¢‘æˆè¯¾ï¼ˆå¯¹æˆ‘ä»¬æ²¡åŒºåˆ«ï¼‰ï¼Œçœ‹å®Œåæ•´ç†äº†ä¸¤å¹´è¯¾ç¨‹çš„ç¬”è®°ã€‚æœ¬æ–‡æ¶‰åŠå†…å®¹ï¼šstruct, enum, optional, protocol, viewbuilder, shapecs193p_2021_ç¬”è®°_2" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="" />


    
</head>

<body>
    <div class="container prism-container">
        <header class="prism-header" id="prism__header">
            <h1 class="text-uppercase brand"><a class="no-link" href="/" target="_self">walker's code blog</a></h1>
            <p>coder, reader</p>
            <nav class="prism-nav"><ul><li><a class="no-link text-uppercase " href="/" target="_self">Home</a></li><li><a class="no-link text-uppercase " href="/archives/" target="_self">Archives</a></li><li><a class="no-link text-uppercase " href="/about/" target="_self">About</a></li><li><a href="#" target="_self" class="search-form-input no-link text-uppercase">Search</a></li></ul></nav>
        </header>
        <div class="prism-wrapper" id="prism__wrapper">
            
<main>
    <section class="prism-section row" id="prism__content">
        <article class="yue col-md-8 offset-md-2">
            <h1 class="prism-post-title">cs193p_2021_ç¬”è®°[1]</h1>
            <div class="prism-post-time">
                <time class="text-uppercase">
                    October 24 2021
                </time>
            </div>
            <div class="prism-content-body">
                <p>2020å¹´çœ‹äº†ä¸€éï¼Œåæ¥å­¦æ·±åº¦å­¦ä¹ å»äº†ï¼Œç„¶åå‘ç°2021ä¹Ÿå‡ºæ¥äº†ï¼Œä»ç„¶æ˜¯è§†é¢‘æˆè¯¾ï¼ˆå¯¹æˆ‘ä»¬æ²¡åŒºåˆ«ï¼‰ï¼Œçœ‹å®Œåæ•´ç†äº†ä¸¤å¹´è¯¾ç¨‹çš„ç¬”è®°ã€‚</p><p>æœ¬æ–‡æ¶‰åŠå†…å®¹ï¼š<code>struct, enum, optional, protocol, viewbuilder, shape</code></p><p><a href="https://www.jianshu.com/p/af0ad1bead34">cs193p_2021_ç¬”è®°_2</a>
<a href="https://www.jianshu.com/p/d103f8d12052">cs193p_2021_ç¬”è®°_3_Animation_Transition</a>
<a href="https://www.jianshu.com/p/41e7309c7f55">cs193p_2021_ç¬”è®°_4_Color_Image_Gesture</a>
<a href="https://www.jianshu.com/p/e3c2ee1628c6">cs193p_2021_ç¬”è®°_5_Property Wrapper</a>
<a href="https://www.jianshu.com/p/a315274a4fd2">cs193p_2021_ç¬”è®°_6_Persistence</a>
<a href="https://www.jianshu.com/p/f4ae879eef9c">cs193p_2021_ç¬”è®°_7_Document Architecture</a>
<a href="https://www.jianshu.com/p/2136bdc2c6f6">cs193p_2021_ç¬”è®°_8</a></p><hr />
<h1>struct and class</h1>
<p>æ‹¥æœ‰å·®ä¸å¤šçš„ç»“æ„</p><ul>
<li>stored vars</li>
<li>computed vars</li>
<li>constant lets</li>
<li>functions</li>
<li>initializers</li>
</ul>
<p>differents:
struct | class
-------|------
Value type | Reference type
Copied when passed or assigned | Passed around via pointers 
Copy on write | Automatically reference counted 
Functional programming | Object-oriented programming 
No inheritance | Inheritance (single) 
â€œFreeâ€ï¼ˆç¼ºçœï¼‰ init initializes ALL vars | â€œFreeâ€ init initializes NO vars 
Mutability must be explicitly stated | Always mutable (å³ä½¿ç”¨let, åªè¡¨ç¤ºä¸ä¼šæ”¹å˜æŒ‡é’ˆ)
Your â€œgo toâ€ data structure | Used in specific circumstances
Everything youâ€™ve seen so far is a struct (except View which is a protocol) | The ViewModel in MVVM is always a class (also, UIKit (old style iOS) is class-based)</p><h1>æ³›å‹ï¼Œå‡½æ•°ç±»å‹,é—­åŒ…</h1>
<ul>
<li>å…è®¸æœªçŸ¥ç±»å‹ï¼Œä½†swiftæ˜¯å¼ºç±»å‹ï¼Œæ‰€ä»¥ç”¨ç±»å‹å ä½ç¬¦ï¼Œç”¨ä½œå‚æ•°æ—¶å‚è€ƒ.netçš„æ³›å‹</li>
<li>å‡½æ•°ä¹Ÿæ˜¯ä¸€ç§ç±»å‹ï¼Œå¯ä»¥å½“ä½œå˜é‡ï¼Œå‚æ•°ï¼Œå‡ºç°åœ¨å˜é‡ï¼Œå‚æ•°çš„ä½ç½®</li>
<li>in-lineé£æ ¼çš„å‡½æ•°å«<code>closure</code>(é—­åŒ…)</li>
</ul>
<h1>enum</h1>
<ul>
<li>æšä¸¾æ˜¯å€¼ç±»å‹</li>
<li>æšä¸¾çš„æ¯ä¸ªstateéƒ½å¯ä»¥æœ‰<code>associated data</code>ï¼ˆç­‰äºæ˜¯æŠŠæ¯ä¸ªstateçœ‹æˆä¸€ä¸ªclass/structï¼Œassociated dataå°±å¯ä»¥ç†è§£ä¸º<strong>å±æ€§</strong>)</li>
</ul>
<div class="highlight"><pre><span></span><span class="kd">enum</span> <span class="nc">FastFoodMenuItem</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">hamburger</span><span class="p">(</span><span class="n">numberOfPatties</span><span class="p">:</span> <span class="nb">Int</span><span class="p">)</span>
    <span class="k">case</span> <span class="n">fries</span><span class="p">(</span><span class="n">size</span><span class="p">:</span> <span class="n">FryOrderSize</span><span class="p">)</span>
    <span class="k">case</span> <span class="n">drink</span><span class="p">(</span><span class="nb">String</span><span class="p">,</span> <span class="n">ounces</span><span class="p">:</span> <span class="nb">Int</span><span class="p">)</span> <span class="c1">// the unnamed String is the brand, e.g. â€œCokeâ€</span>
    <span class="k">case</span> <span class="n">cookie</span> <span class="p">}</span>

<span class="kd">enum</span> <span class="nc">FryOrderSize</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">large</span>
    <span class="k">case</span> <span class="n">small</span> <span class="p">}</span>

<span class="kd">let</span> <span class="nv">menuItem</span><span class="p">:</span> <span class="n">FastFoodMenuItem</span> <span class="p">=</span> <span class="n">FastFoodMenuItem</span><span class="p">.</span><span class="n">hamburger</span><span class="p">(</span><span class="n">patties</span><span class="p">:</span> <span class="mi">2</span><span class="p">)</span>
<span class="kd">var</span> <span class="nv">otherItem</span><span class="p">:</span> <span class="n">FastFoodMenuItem</span> <span class="p">=</span> <span class="n">FastFoodMenuItem</span><span class="p">.</span><span class="n">cookie</span>
<span class="kd">var</span> <span class="nv">yetAnotherItem</span> <span class="p">=</span> <span class="p">.</span><span class="n">cookie</span> <span class="c1">// Swift canâ€™t figure this out</span>
</pre></div>
<ol>
<li>FryOrderSizeåŒæ—¶åˆæ˜¯ä¸€ä¸ªæšä¸¾</li>
<li>çŠ¶æ€drinkæ‹¥æœ‰ä¸¤ä¸ªâ€œå±æ€§â€ï¼Œè€Œä¸”å…¶ä¸­ä¸€ä¸ªè¿˜<strong>æœªå‘½å</strong></li>
</ol>
<h2>break and fall through/defaults</h2>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nv">menuItem</span> <span class="p">=</span> <span class="n">FastFoodMenuItem</span><span class="p">.</span><span class="n">cookie</span>
<span class="k">switch</span> <span class="n">menuItem</span> <span class="p">{</span>
    <span class="k">case</span> <span class="p">.</span><span class="n">hamburger</span><span class="p">:</span> <span class="k">break</span>  <span class="c1">// break</span>
    <span class="k">case</span> <span class="p">.</span><span class="n">fries</span><span class="p">:</span> <span class="bp">print</span><span class="p">(</span><span class="err">â€œ</span><span class="n">fries</span><span class="err">â€</span><span class="p">)</span>
    <span class="k">default</span><span class="p">:</span> <span class="bp">print</span><span class="p">(</span><span class="err">â€œ</span><span class="n">other</span><span class="err">â€</span><span class="p">)</span> <span class="c1">// default</span>
<span class="p">}</span>
</pre></div>
<ol>
<li>å¦‚æœæŠŠdrinkå†™ä¸Šï¼Œä½†æ²¡æœ‰æ–¹æ³•ä½“ï¼Œåˆ™å«<code>fall through</code>ï¼Œåªä¼šå¾€åé¢ä¸€ä¸ªstate fall through</li>
<li>å¦‚æœæ¼å†™äº†drinkï¼Œåˆ™ä¼šåŒ¹é…åˆ°defaulté¡¹ï¼ˆcookieåŒç†ï¼‰</li>
</ol>
<h2>with associated data</h2>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nv">menuItem</span> <span class="p">=</span> <span class="n">FastFoodMenuItem</span><span class="p">.</span><span class="n">drink</span><span class="p">(</span><span class="err">â€œ</span><span class="n">Coke</span><span class="err">â€</span><span class="p">,</span> <span class="n">ounces</span><span class="p">:</span> <span class="mi">32</span><span class="p">)</span>
  <span class="k">switch</span> <span class="n">menuItem</span> <span class="p">{</span>
      <span class="k">case</span> <span class="p">.</span><span class="n">hamburger</span><span class="p">(</span><span class="kd">let</span> <span class="nv">pattyCount</span><span class="p">):</span> <span class="bp">print</span><span class="p">(</span><span class="err">â€œ</span><span class="n">a</span> <span class="n">burger</span> <span class="n">with</span> <span class="err">\</span><span class="p">(</span><span class="n">pattyCount</span><span class="p">)</span> <span class="n">patties</span><span class="p">!</span><span class="err">â€</span><span class="p">)</span>
      <span class="k">case</span> <span class="p">.</span><span class="n">fries</span><span class="p">(</span><span class="kd">let</span> <span class="nv">size</span><span class="p">):</span> <span class="bp">print</span><span class="p">(</span><span class="err">â€œ</span><span class="n">a</span> <span class="err">\</span><span class="p">(</span><span class="n">size</span><span class="p">)</span> <span class="n">order</span> <span class="n">of</span> <span class="n">fries</span><span class="p">!</span><span class="err">â€</span><span class="p">)</span>
      <span class="k">case</span> <span class="p">.</span><span class="n">drink</span><span class="p">(</span><span class="kd">let</span> <span class="nv">brand</span><span class="p">,</span> <span class="kd">let</span> <span class="nv">ounces</span><span class="p">):</span> <span class="bp">print</span><span class="p">(</span><span class="err">â€œ</span><span class="n">a</span> <span class="err">\</span><span class="p">(</span><span class="n">ounces</span><span class="p">)</span><span class="n">oz</span> <span class="err">\</span><span class="p">(</span><span class="n">brand</span><span class="p">)</span><span class="err">â€</span><span class="p">)</span>
      <span class="k">case</span> <span class="p">.</span><span class="n">cookie</span><span class="p">:</span> <span class="bp">print</span><span class="p">(</span><span class="err">â€œ</span><span class="n">a</span> <span class="n">cookie</span><span class="p">!</span><span class="err">â€</span><span class="p">)</span>
 <span class="p">}</span>
</pre></div>
<h2>å¯ä»¥æ‹¥æœ‰æ–¹æ³•</h2>
<p>è¿™å°±å¯ä»¥æ‰©å±•å‡ºcomputed vars</p><div class="highlight"><pre><span></span><span class="kd">enum</span> <span class="nc">FastFoodMenuItem</span> <span class="p">{</span> <span class="p">...</span>
      <span class="kd">func</span> <span class="nf">isIncludedInSpecialOrder</span><span class="p">(</span><span class="n">number</span><span class="p">:</span> <span class="nb">Int</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Bool</span> <span class="p">{</span>
          <span class="k">switch</span> <span class="kc">self</span> <span class="p">{</span>
            <span class="k">case</span> <span class="p">.</span><span class="n">hamburger</span><span class="p">(</span><span class="kd">let</span> <span class="nv">pattyCount</span><span class="p">):</span> <span class="k">return</span> <span class="n">pattyCount</span> <span class="p">==</span> <span class="n">number</span>
            <span class="k">case</span> <span class="p">.</span><span class="n">fries</span><span class="p">,</span> <span class="p">.</span><span class="n">cookie</span><span class="p">:</span> <span class="k">return</span> <span class="kc">true</span> <span class="c1">// a drink and cookie in every special order </span>
            <span class="k">case</span> <span class="p">.</span><span class="n">drink</span><span class="p">(</span><span class="kc">_</span><span class="p">,</span> <span class="kd">let</span> <span class="nv">ounces</span><span class="p">):</span> <span class="k">return</span> <span class="n">ounces</span> <span class="p">==</span> <span class="mi">16</span> <span class="c1">// &amp; 16oz drink of any kind</span>
 <span class="p">}</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<h2>Iterable</h2>
<p>conform <code>CaseIterable</code>åè®®å°±èƒ½è¢«éå†ï¼Œå› ä¸ºå¢åŠ äº†ä¸€ä¸ª<code>allCases</code>çš„é™æ€å˜é‡ï¼š</p><div class="highlight"><pre><span></span><span class="kd">enum</span> <span class="nc">TeslaModel</span><span class="p">:</span> <span class="n">CaseIterable</span> <span class="p">{</span>
      <span class="k">case</span> <span class="n">X</span>
      <span class="k">case</span> <span class="n">S</span>
      <span class="k">case</span> <span class="n">Three</span>
      <span class="k">case</span> <span class="n">Y</span>
<span class="p">}</span>
<span class="k">for</span> <span class="n">model</span> <span class="k">in</span> <span class="n">TeslaModel</span><span class="p">.</span><span class="n">allCases</span> <span class="p">{</span>
    <span class="n">reportSalesNumbers</span><span class="p">(</span><span class="k">for</span><span class="p">:</span> <span class="n">model</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">reportSalesNumbers</span><span class="p">(</span><span class="k">for</span> <span class="n">model</span><span class="p">:</span> <span class="n">TeslaModel</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">switch</span> <span class="n">model</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>SwiftUIå®ä¾‹ï¼Œ <code>LazyVGrid</code>ä¸­ï¼š</p><div class="highlight"><pre><span></span><span class="kd">struct</span> <span class="nc">GridItem</span> <span class="p">{</span>
    <span class="p">...</span>
    <span class="kd">enum</span> <span class="nc">Size</span> <span class="p">{</span>
        <span class="k">case</span> <span class="n">adaptive</span><span class="p">(</span><span class="n">minimum</span><span class="p">:</span> <span class="n">CGFloat</span><span class="p">,</span> <span class="n">maximum</span><span class="p">:</span> <span class="n">CGFloat</span> <span class="p">=</span> <span class="p">.</span><span class="n">infinity</span><span class="p">)</span>
        <span class="k">case</span> <span class="n">fixed</span><span class="p">(</span><span class="n">CGFloat</span><span class="p">)</span>
        <span class="k">case</span> <span class="n">flexible</span><span class="p">(</span><span class="n">minimum</span><span class="p">:</span> <span class="n">CGFloat</span> <span class="p">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">maximum</span><span class="p">:</span> <span class="n">CGFloat</span> <span class="p">=</span> <span class="p">.</span><span class="n">infinity</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<ol>
<li><code>associated data</code>è¿˜èƒ½å¸¦é»˜è®¤å€¼</li>
<li>æ ¸å¿ƒä½œç”¨æ˜¯å‘Šè¯‰ç³»ç»Ÿgriditemçš„sizeæ˜¯é‡‡ç”¨å“ªç§æ–¹æ¡ˆï¼ˆæšä¸¾ï¼‰ï¼Œé¡ºä¾¿è®¾ç½®äº†è¿™ç§æ–¹æ¡ˆä¸‹çš„å‚æ•°ã€‚æ‰€ä»¥è¿™ç§åœºæ™¯åœ¨swiftä¸‹å®Œå…¨å¯ä»¥ç”¨æšä¸¾åšåˆ°</li>
</ol>
<h1>Optionals</h1>
<p>å¯é ç±»å‹å…¶å®å°±æ˜¯ä¸€ä¸ª<code>Enum</code></p><div class="highlight"><pre><span></span><span class="kd">enum</span> <span class="nc">Optional</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="p">{</span> <span class="c1">// a generic type, like Array&lt;Element&gt; or MemoryGame&lt;CardContent&gt; </span>
    <span class="k">case</span> <span class="kr">none</span>
    <span class="k">case</span> <span class="n">some</span><span class="p">(</span><span class="n">T</span><span class="p">)</span> <span class="c1">// the some case has associated value of type T }</span>
</pre></div>
<p>å®ƒåªæœ‰ä¸¤ä¸ªçŠ¶æ€ï¼Œè¦ä¹ˆæ˜¯noneï¼Œè¦ä¹ˆå°±æ˜¯is setçš„çŠ¶æ€ï¼Œå…·ä½“çš„å€¼å…¶å®æ˜¯ç»‘å®šåˆ°äº†<code>associate data</code>é‡Œå»äº†</p><p>æ‰€ä»¥ä½ ç°åœ¨çŸ¥é“äº†æœ‰ä¸€ç§å–æ³•å…¶å®å°±æ˜¯ä»<code>some</code>é‡Œé¢æ¥å–äº†ã€‚</p><h2>è¯­æ³•ç³–</h2>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nv">hello</span><span class="p">:</span> <span class="nb">String</span><span class="p">?</span>
<span class="kd">var</span> <span class="nv">hello</span><span class="p">:</span> <span class="nb">String</span><span class="p">?</span> <span class="p">=</span> <span class="err">â€œ</span><span class="n">hello</span><span class="err">â€</span>
<span class="kd">var</span> <span class="nv">hello</span><span class="p">:</span> <span class="nb">String</span><span class="p">?</span> <span class="p">=</span> <span class="kc">nil</span>
<span class="c1">// å…¶å®æ˜¯ï¼š</span>
<span class="kd">var</span> <span class="nv">hello</span><span class="p">:</span> <span class="nb">Optional</span><span class="p">&lt;</span><span class="nb">String</span><span class="p">&gt;</span> <span class="p">=</span> <span class="p">.</span><span class="kr">none</span>
<span class="kd">var</span> <span class="nv">hello</span><span class="p">:</span> <span class="nb">Optional</span><span class="p">&lt;</span><span class="nb">String</span><span class="p">&gt;</span> <span class="p">=</span> <span class="p">.</span><span class="n">some</span><span class="p">(</span><span class="err">â€œ</span><span class="n">hello</span><span class="err">â€</span><span class="p">)</span>
<span class="kd">var</span> <span class="nv">hello</span><span class="p">:</span> <span class="nb">Optional</span><span class="p">&lt;</span><span class="nb">String</span><span class="p">&gt;</span> <span class="p">=</span> <span class="p">.</span><span class="kr">none</span>
</pre></div>
<p>ä½¿ç”¨ï¼š</p><div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nv">hello</span><span class="p">:</span> <span class="nb">String</span><span class="p">?</span> <span class="p">=</span> <span class="p">...</span>
<span class="bp">print</span><span class="p">(</span><span class="n">hello</span><span class="p">!)</span> 
<span class="c1">// å…¶å®æ˜¯ï¼š</span>
<span class="k">switch</span> <span class="n">hello</span> <span class="p">{</span>
    <span class="k">case</span> <span class="p">.</span><span class="kr">none</span><span class="p">:</span> <span class="c1">// raise an exception (crash) </span>
    <span class="k">case</span> <span class="p">.</span><span class="n">some</span><span class="p">(</span><span class="kd">let</span> <span class="nv">data</span><span class="p">):</span> <span class="bp">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">if</span> <span class="kd">let</span> <span class="nv">safehello</span> <span class="p">=</span> <span class="n">hello</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="n">safehello</span><span class="p">)</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// do something else</span>
<span class="p">}</span>
<span class="c1">// å…¶å®æ˜¯ï¼š</span>
<span class="k">switch</span> <span class="n">hello</span> <span class="p">{</span>
    <span class="k">case</span> <span class="p">.</span><span class="kr">none</span><span class="p">:</span> <span class="p">{</span> <span class="c1">// do something else } </span>
    <span class="k">case</span> <span class="p">.</span><span class="n">some</span><span class="p">(</span><span class="kd">let</span> <span class="nv">data</span><span class="p">):</span> <span class="bp">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// è¿˜æœ‰ä¸€ç§ï¼š</span>

<span class="kd">let</span> <span class="nv">x</span><span class="p">:</span> <span class="nb">String</span><span class="p">?</span> <span class="p">=</span> <span class="p">...</span>
<span class="kd">let</span> <span class="nv">y</span> <span class="p">=</span> <span class="n">x</span> <span class="p">??</span> <span class="err">â€œ</span><span class="n">foo</span><span class="err">â€</span>
<span class="c1">// å…¶å®æ˜¯ï¼š</span>
<span class="k">switch</span> <span class="n">x</span> <span class="p">{</span>
    <span class="k">case</span> <span class="p">.</span><span class="kr">none</span><span class="p">:</span> <span class="n">y</span> <span class="p">=</span> <span class="err">â€œ</span><span class="n">foo</span><span class="err">â€</span>
    <span class="k">case</span> <span class="p">.</span><span class="n">some</span><span class="p">(</span><span class="kd">let</span> <span class="nv">data</span><span class="p">):</span> <span class="n">y</span> <span class="p">=</span> <span class="n">data</span>
<span class="p">}</span>
</pre></div>
<ol>
<li>æ‰€ä»¥ç”¨<code>!</code>æ¥è§£åŒ…æ˜¯ä¼šæŠ¥é”™çš„åŸç†åœ¨æ­¤</li>
<li><code>guard</code>çš„åŸç†åŒæ ·æ˜¯<code>switch</code></li>
<li>é»˜è®¤å€¼çš„åŸç†ä½ åº”è¯¥ä¹Ÿèƒ½çŒœåˆ°äº†</li>
<li>ä¸‰ä¸ªè¯­æ³•ç³–ï¼Œå¯¹åº”çš„åº•å±‚å°±æ˜¯ä¸€å¥switchï¼Œå…¶å®å°±æ˜¯<code>.none</code>æ—¶çš„ä¸‰ç§å¤„ç†æ–¹æ¡ˆ</li>
</ol>
<p>å½“ç„¶ï¼Œè¿˜å¯ä»¥<code>chain</code>èµ·æ¥
let x: String? = ...
let y = x?foo()?bar?.z</p><p>// å°è¯•è¿˜åŸä¸€ä¸‹ï¼š</p><div class="highlight"><pre><span></span><span class="k">switch</span> <span class="n">x</span> <span class="p">{</span>
    <span class="k">case</span> <span class="p">.</span><span class="kr">none</span><span class="p">:</span> <span class="n">y</span> <span class="p">=</span> <span class="kc">nil</span>
    <span class="k">case</span> <span class="p">.</span><span class="n">some</span><span class="p">(</span><span class="kd">let</span> <span class="nv">xval</span><span class="p">)::</span>
        <span class="k">switch</span> <span class="n">xval</span><span class="p">.</span><span class="n">foo</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">case</span> <span class="p">.</span><span class="kr">none</span><span class="p">:</span> <span class="n">y</span> <span class="p">=</span> <span class="kc">nil</span>
            <span class="k">case</span> <span class="p">.</span><span class="n">some</span><span class="p">(</span><span class="kd">let</span> <span class="nv">xfooval</span><span class="p">):</span>
                <span class="k">switch</span> <span class="n">xfooval</span><span class="p">.</span><span class="n">bar</span> <span class="p">{</span>
                    <span class="k">case</span> <span class="p">.</span><span class="kr">none</span><span class="p">:</span> <span class="n">y</span> <span class="p">=</span> <span class="kc">nil</span>
                    <span class="k">case</span> <span class="p">.</span><span class="n">some</span><span class="p">(</span><span class="kd">let</span> <span class="nv">xfbarval</span><span class="p">):</span>
                        <span class="n">y</span> <span class="p">=</span> <span class="n">xfbarval</span><span class="p">.</span><span class="n">z</span>
                <span class="p">}</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>è®°ä½æ¯ä¸€ä¸ªå¥å·å¯¹åº”ä¸€ä¸ªswitchï¼Œç„¶ååœ¨<code>.none</code>çš„çŠ¶æ€ä¸‹å®‰å…¨é€€å‡ºå°±æ˜¯<code>?</code>çš„ç”¨æ³•äº†ã€‚</p><h1>@ViewBuilder</h1>
<ol>
<li>ä»»æ„<code>func</code>æˆ–<code>åªè¯»çš„è®¡ç®—å±æ€§</code>éƒ½å¯ä»¥æ ‡è¯†ä¸º<code>@ViewBuilder</code>ï¼Œä¸€æ—¦æ ‡è¯†ï¼Œå®ƒé‡Œé¢çš„å†…å®¹å°†ä¼šè¢«è§£æä¸º<code>a list of Views</code>ï¼ˆä¹Ÿä»…ä»…æ˜¯è¿™ä¸ªï¼Œæœ€å¤šå†åŠ ä¸Šif-elseæ¥é€‰æ‹©æ˜¯â€œå“ªäº›viewâ€ï¼Œä¸èƒ½å†å®šä¹‰å˜é‡å’Œå†™å…¶å®ƒä»£ç äº†ï¼‰<ul>
<li>ä¸€ä¸ªå…¸å‹ä¾‹å­å°±æ˜¯Viewé‡Œé¢æ‰£å‡ºæ¥çš„ä»£ç (æ¯”å¦‚å­view)åšæˆæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯éœ€è¦åŠ ä¸Š@ViewBuilderçš„</li>
<li>æˆ–è€…æ”¹è¯­æ³•</li>
<li>æˆ–è€…åªæœ‰ä¸€ä¸ªViewï¼Œå°±ä¸ä¼šäº§ç”Ÿè¯­æ³•æ­§ä¹‰ï¼Œä¹Ÿæ˜¯å¯ä»¥ä¸åŠ @ViewBuilderçš„</li>
</ul>
</li>
<li>æ‰€ä»¥ä¸éœ€è¦returnï¼Œè€Œå¦‚æœä½ ä¸æ‰“æ ‡ï¼Œä¹Ÿæ˜¯å¯ä»¥é€šè¿‡returnæ¥æ„å»ºviewçš„<ul>
<li>ä½†æ˜¯å°±ä¸æ”¯æŒé»˜è®¤è¿”å›listæˆ–é€šè¿‡if-elseè¿”view listçš„è¯­æ³•äº†</li>
</ul>
</li>
<li><code>@ViewBuilder</code>ä¹Ÿå¯ä»¥æ ‡è¯†ä¸ºæ–¹æ³•çš„å‚æ•°ï¼Œè¡¨ç¤ºéœ€è¦æ¥å—ä¸€ä¸ªè¿”å›viewsçš„å‡½æ•°</li>
</ol>
<div class="highlight"><pre><span></span><span class="kd">init</span><span class="p">(</span><span class="n">items</span><span class="p">:</span> <span class="p">[</span><span class="n">Item</span><span class="p">],</span> <span class="p">@</span><span class="n">ViewBuilder</span> <span class="n">content</span><span class="p">:</span> <span class="p">@</span><span class="n">escaping</span> <span class="p">(</span><span class="n">Item</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="n">ItemView</span><span class="p">)</span> <span class="p">{...}</span>
</pre></div>
<p>åŒæ—¶ä¹Ÿæ³¨æ„ä¸€ä¸‹<code>@escaping</code>ï¼Œå‡¡æ˜¯å‡½æ•°è¿”å›åæ‰å¯èƒ½è¢«è°ƒç”¨çš„é—­åŒ…ï¼ˆé€ƒé€¸é—­åŒ…ï¼‰å°±éœ€è¦ï¼Œè€Œæˆ‘ä»¬çš„viewæ˜¯åœ¨éœ€è¦çš„æ—¶å€™æ‰åˆ›å»ºï¼Œæˆ–åå¤ç§»é™¤å¹¶é‡å»ºï¼ˆé‡ç»˜ï¼‰çš„ï¼Œæ˜¾ç„¶ç¬¦åˆé€ƒé€¸é—­åŒ…çš„ç‰¹å¾ã€‚</p><blockquote>
<p>viewbuilderæ”¯æŒçš„æ§åˆ¶æµç¨‹ä»£ç æŒ‡çš„æ˜¯<code>if-else</code>å’Œ<code>ForEach</code>, æ‰€ä»¥<code>for...in...</code>æ˜¯ä¸è¡Œçš„ã€‚</p></blockquote>
<h1>Protocol</h1>
<p>æ¥å£ï¼Œåè®®ï¼Œçº¦æŸ... ä½¿ç”¨åœºæ™¯ï¼š</p><ul>
<li>ç”¨ä½œç±»å‹(Type):<ul>
<li>func travelAround(using moveable: Moveable)</li>
<li>let foo = [Moveable]</li>
</ul>
</li>
<li>ç”¨ä½œæ¥å£:<ul>
<li>struct cardView: View</li>
<li>class myGame: ObservableObject</li>
<li>behaviors: Identifiable, Hashable, ... Animatable</li>
</ul>
</li>
<li>ç”¨ä½œçº¦æŸï¼š
  struct Game<Content> <code>where</code> Content: Equtable   // ç±»
  extension Array <code>where</code> Element: Hashable {...}  // æ‰©å±•
  init(data: Data) <code>where</code> Data: Collection, Data.Element: Identifiable // æ–¹æ³•</li>
<li>OCé‡Œçš„delegate</li>
<li>code sharing (by <code>extension</code>)<ul>
<li><code>extension</code> to a protocol</li>
<li>this is how Views get forecolor, font and all their other modifiers</li>
<li>also `firstIndex(where:) get implemented</li>
<li>an <code>extension</code> can add <em>default implementation</em> for a func or a var<ul>
<li>that's how <code>objectWillChange</code> comes from</li>
</ul>
</li>
<li><code>extension</code>å¯ä»¥ä½œç”¨åˆ°æ‰€æœ‰æœä»åŒä¸€åè®®çš„å¯¹è±¡<ul>
<li>func filter(_ isIncluded: (Element) -&gt; Bool) -&gt; Array<Element></li>
<li>åªä¸º<code>Sequence</code> protocolå†™äº†ä¸€ä»½filterçš„æ‰©å±•ä»£ç ï¼Œä½†èƒ½ä½œç”¨äºArray, Range, String, Dictionary</li>
<li>ç­‰ä¸€åˆ‡conform to the <code>Sequence</code> protocolçš„ç±»</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>SwiftUIçš„<code>View</code> protocoléå¸¸ç®€å•ï¼Œconform ä¸€ä¸ªè¿”å›<code>some view</code>çš„<code>body</code>æ–¹æ³•å°±è¡Œäº†ï¼Œä½†æ˜¯åˆä¸ºå®ƒå†™äº†æ— æ•°<code>extension</code>ï¼Œæ¯”å¦‚<code>foregroundColor</code>, <code>padding</code>, etc. ç¤ºæ„å›¾ï¼š</p><figure  style="flex: 146.20253164556962" ><img width="924" height="316" src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/archives/assets/9bfb49031e316c1d1d1bc4a5d6b57427.png" alt=""/></figure><h2>Generics(æ³›å‹)</h2>
<p>ä¸¾ä¾‹ï¼š</p><div class="highlight"><pre><span></span><span class="kd">protocol</span> <span class="nc">Identifiable</span> <span class="p">{</span>
    <span class="kd">associatedtype</span> <span class="n">ID</span><span class="p">:</span> <span class="nb">Hashable</span>
    <span class="kd">var</span> <span class="nv">id</span><span class="p">:</span> <span class="n">ID</span> <span class="p">{</span> <span class="kr">get</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<ol>
<li>ä¸åƒstructï¼Œprotocolå¹¶ä¸æ˜¯ç”¨<code>Identifiable&lt;ID&gt;</code>æ¥è¡¨ç¤ºæ³›å‹ï¼Œè€Œæ˜¯åœ¨ä½œç”¨åŸŸå†…å®šä¹‰</li>
<li>ä¸Šä¾‹ä¸­ï¼ŒIDæ—¢å®šä¹‰äº†ç±»åˆ«åˆ«åï¼Œè¿˜è§„èŒƒäº†çº¦æŸ</li>
</ol>
<ul>
<li>æ‰€ä»¥ä½ Identifiableçš„ç±», æ˜¯éœ€è¦æœ‰ä¸€ä¸ªHashableçš„IDçš„</li>
<li>è€ŒHashableçš„å¯¹è±¡ï¼Œåˆæ˜¯éœ€è¦Equatableçš„(å› ä¸ºhashä¼šç¢°æ’å‡ºç›¸åŒçš„ç»“æœï¼Œéœ€è¦æä¾›æ£€æŸ¥ç›¸ç­‰çš„æ–¹æ³•)</li>
<li>-&gt; <code>protocol inheritancee</code></li>
</ul>
<h1>Shape</h1>
<ul>
<li>Shape is a <code>protocol</code> that inherits from <code>View</code>.</li>
<li>In other words, all Shapes are also Views.</li>
<li>Examples of Shapes already in SwiftUI: RoundedRectangle, Circle, Capsule, etc.</li>
<li>by default, Shapes draw themselfs by <code>filling</code> with the current foreground color.</li>
</ul>
<div class="highlight"><pre><span></span><span class="kd">func</span> <span class="nf">fill</span><span class="p">&lt;</span><span class="n">S</span><span class="p">&gt;(</span><span class="kc">_</span> <span class="n">whatToFillWith</span><span class="p">:</span> <span class="n">S</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="n">some</span> <span class="n">view</span> <span class="k">where</span> <span class="n">S</span><span class="p">:</span> <span class="n">ShapeStyle</span>
</pre></div>
<p><code>ShapeStyle</code> protocol turns a <code>Shape</code> into a <code>View</code>: Color, ImagePaint, AngularGradinet, LinearGradient</p><p>è‡ªå®šä¹‰shapeæœ€å¥½ç”¨path(ç³»ç»Ÿçš„å·²ç»é€šè¿‡extensionå®ç°å¥½äº†viewçš„body)ï¼š</p><div class="highlight"><pre><span></span><span class="kd">func</span> <span class="nf">path</span><span class="p">(</span><span class="k">in</span> <span class="n">rect</span><span class="p">:</span> <span class="n">CGRect</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="n">Path</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">a</span> <span class="n">Path</span> 
<span class="p">}</span>
</pre></div>

            </div>
        </article>
        <div class="prism-post-meta col-md-8 offset-md-2">
    <span>walker</span>
    
    <span>/</span>
    <span>
        <a class="category no-link" href="/category/posts/" target="_self">
        posts
        </a>
    </span>
    
    
    <span>/</span>
    
    <span class="prism-tag">
        <a class="no-link" href="/tag/cs193p/" target="_self">#cs193p</a>
    </span>
    
    <span class="prism-tag">
        <a class="no-link" href="/tag/viewbuilder/" target="_self">#viewbuilder</a>
    </span>
    
    <span class="prism-tag">
        <a class="no-link" href="/tag/protocol/" target="_self">#protocol</a>
    </span>
    
    
    
    <span>/</span>
    <span class="leancloud_visitors" id="/archives/cs193p_2021_%E7%AC%94%E8%AE%B0%5B1%5D/" data-flag-title="cs193p_2021_ç¬”è®°[1]"><span class="leancloud-visitors-count"></span> Views</span>
    
</div>
    </section>

    
<section id="prism__pagination" class="prism-pagination" class="col-md-8 offset-md-2">
    <ul>
        
        <li class="next">
            <a class="no-link" href="/archives/cs193p_2021_%E7%AC%94%E8%AE%B0%5B2%5D/" target="_self" title="cs193p_2021_ç¬”è®°[2]"><i class="fa fa-chevron-left" aria-hidden="true"></i>Newer</a>
        </li>
        
        
        <li class="prev">
            <a class="no-link" href="/archives/%E6%9D%8E%E5%AE%8F%E6%AF%85MACHINE-LEARNING-2021-SPRING%E7%AC%94%E8%AE%B0/" target="_self" title="æå®æ¯…MACHINE LEARNING 2021 SPRINGç¬”è®°">Older<i class="fa fa-chevron-right" aria-hidden="true"></i></a>
        </li>
        
    </ul>
</section>


    
    <script>
        var initValine = function() {
            new Valine({"enable": true, "el": "#vcomments", "appId": "7tP92LoqK2cggW61DvJmWBo0-gzGzoHsz", "appKey": "iQCtrtlr8eKrQllM03GMESMJ", "visitor": true, "recordIP": true});
        }

    </script>
    <script defer src='https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js' onload="initValine()"></script>
    <div class="prism-comment-section container" id="prism__comment">
        <div class="row">
            <div class="col-md-8 offset-md-2">
                <div id="vcomments"></div>
            </div>
        </div>
    </div>
    

</main>

            <footer id="prism__footer">
                <section>
                    <div>
                        <nav class="social-links">
                            <ul><li><a class="no-link" title="Twitter" href="https://twitter.com/walkerwzy" target="_blank" rel="noopener noreferrer nofollow"><i class="gi gi-twitter"></i></a></li><li><a class="no-link" title="GitHub" href="https://github.com/walkerwzy" target="_blank" rel="noopener noreferrer nofollow"><i class="gi gi-github"></i></a></li><li><a class="no-link" title="Weibo" href="https://weibo.com/1071696872" target="_blank" rel="noopener noreferrer nofollow"><i class="gi gi-weibo"></i></a></li></ul>
                        </nav>
                    </div>

                    <section id="prism__external_links">
                        <ul>
                            
                            <li>
                                <a class="no-link" target="_blank" href="https://github.com/AlanDecode/Maverick" rel="noopener noreferrer nofollow">Maverick</a>ï¼šğŸ„â€ Go My Own Way.
                                <span>|</span>
                            </li>
                            
                            <li>
                                <a class="no-link" target="_blank" href="https://www.imalan.cn" rel="noopener noreferrer nofollow">Triple NULL</a>ï¼šHome page for AlanDecode.
                                <span>|</span>
                            </li>
                            
                        </ul>
                    </section>

                    <div class="copyright">
                        <p class="copyright-text">
                            <span class="brand">walker's code blog</span>
                            <span>Copyright Â© 2022 AlanDecode</span>
                        </p>
                        <p class="copyright-text powered-by">
                            | Powered by <a href="https://github.com/AlanDecode/Maverick" class="no-link" target="_blank" rel="noopener noreferrer nofollow">Maverick</a> | Theme <a href="https://github.com/Reedo0910/Maverick-Theme-Prism" target="_blank" class="no-link" rel="noopener noreferrer nofollow">Prism</a>
                        </p>
                    </div>
                    <div class="footer-addon">
                        
                    </div>
                </section>
                <script>
                    var site_build_date = "2019-12-06T12:00+08:00"

                </script>
                <script src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/prism-efa8685153.js"></script>
            </footer>
        </div>
    </div>
    </div>

    <script src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/ExSearch/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/ExSearch/ExSearch-493cb9cd89.js"></script>

    <!--katex-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/katex.min.js"></script>
    <script>
        mathOpts = {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "\\[", right: "\\]", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false }
            ]
        };

    </script>
    <script defer src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/auto-render.min.js" onload="renderMathInElement(document.body, mathOpts);"></script>

    
</body>

</html>