<!DOCTYPE HTML>
<html lang="english">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="true">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Maverick,AlanDecode,Galileo,blog" />
    <meta name="generator" content="Maverick 1.2.1" />
    <meta name="template" content="Prism" />
    <link rel="alternate" type="application/rss+xml" title="walker's code blog &raquo; RSS 2.0" href="/feed/index.xml" />
    <link rel="alternate" type="application/atom+xml" title="walker's code blog &raquo; ATOM 1.0" href="/feed/atom/index.xml" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/prism-b9d78ff38a.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/ExSearch/ExSearch-182e5a8869.css">
    <link href="https://fonts.googleapis.com/css?family=Fira+Code&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
    <script>
        var ExSearchConfig = {
            root: "",
            api: "https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/0580defaee8ea1d43e0366a6550267a1.json"
        }

    </script>
    
<title>hitTestç¤ºä¾‹ - walker's code blog</title>
<meta name="author" content="walker" />
<meta name="description" content="å¾€çª—å£é‡Œæ·»åŠ ä¸¤ä¸ªè‡ªå®šä¹‰çš„viewï¼Œè¿™æ ·æ¯ä¸ªviewçš„hitTestæ–¹æ³•è¢«è®¿é—®çš„æ—¶å€™æˆ‘ä»¬å°±èƒ½logä¸€ä¸‹ï¼šimport UIKit" />
<meta property="og:title" content="hitTestç¤ºä¾‹ - walker's code blog" />
<meta property="og:description" content="å¾€çª—å£é‡Œæ·»åŠ ä¸¤ä¸ªè‡ªå®šä¹‰çš„viewï¼Œè¿™æ ·æ¯ä¸ªviewçš„hitTestæ–¹æ³•è¢«è®¿é—®çš„æ—¶å€™æˆ‘ä»¬å°±èƒ½logä¸€ä¸‹ï¼šimport UIKit" />
<meta property="og:site_name" content="walker's code blog" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/archives/hittest/" />
<meta property="og:image" content="" />
<meta property="article:published_time" content="2022-02-19T21:03:00-00.00" />
<meta name="twitter:title" content="hitTestç¤ºä¾‹ - walker's code blog" />
<meta name="twitter:description" content="å¾€çª—å£é‡Œæ·»åŠ ä¸¤ä¸ªè‡ªå®šä¹‰çš„viewï¼Œè¿™æ ·æ¯ä¸ªviewçš„hitTestæ–¹æ³•è¢«è®¿é—®çš„æ—¶å€™æˆ‘ä»¬å°±èƒ½logä¸€ä¸‹ï¼šimport UIKit" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="" />


    
</head>

<body>
    <div class="container prism-container">
        <header class="prism-header" id="prism__header">
            <h1 class="text-uppercase brand"><a class="no-link" href="/" target="_self">walker's code blog</a></h1>
            <p>coder, reader</p>
            <nav class="prism-nav"><ul><li><a class="no-link text-uppercase " href="/" target="_self">Home</a></li><li><a class="no-link text-uppercase " href="/archives/" target="_self">Archives</a></li><li><a class="no-link text-uppercase " href="/about/" target="_self">About</a></li><li><a href="#" target="_self" class="search-form-input no-link text-uppercase">Search</a></li></ul></nav>
        </header>
        <div class="prism-wrapper" id="prism__wrapper">
            
<main>
    <section class="prism-section row" id="prism__content">
        <article class="yue col-md-8 offset-md-2">
            <h1 class="prism-post-title">hitTestç¤ºä¾‹</h1>
            <div class="prism-post-time">
                <time class="text-uppercase">
                    February 19 2022
                </time>
            </div>
            <div class="prism-content-body">
                <p>å¾€çª—å£é‡Œæ·»åŠ ä¸¤ä¸ªè‡ªå®šä¹‰çš„viewï¼Œè¿™æ ·æ¯ä¸ªviewçš„<code>hitTest</code>æ–¹æ³•è¢«è®¿é—®çš„æ—¶å€™æˆ‘ä»¬å°±èƒ½logä¸€ä¸‹ï¼š</p><div class="highlight"><pre><span></span><span class="kd">import</span> <span class="nc">UIKit</span>

<span class="kd">class</span> <span class="nc">ViewController</span><span class="p">:</span> <span class="bp">UIViewController</span> <span class="p">{</span>

    <span class="kr">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="kc">super</span><span class="p">.</span><span class="n">viewDidLoad</span><span class="p">()</span>

        <span class="kd">let</span> <span class="nv">view1</span> <span class="p">=</span> <span class="n">View1</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span> <span class="n">CGRect</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="mi">110</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mi">110</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="mi">150</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="mi">150</span><span class="p">))</span>
        <span class="kd">let</span> <span class="nv">view2</span> <span class="p">=</span> <span class="n">View2</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span> <span class="n">CGRect</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="mi">170</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mi">170</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="mi">150</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="mi">150</span><span class="p">))</span>
        <span class="n">view1</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="p">=</span> <span class="p">.</span><span class="n">yellow</span>
        <span class="n">view2</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="p">=</span> <span class="p">.</span><span class="n">red</span>

        <span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">addSubview</span><span class="p">(</span><span class="n">view1</span><span class="p">)</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">addSubview</span><span class="p">(</span><span class="n">view2</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">View1</span> <span class="p">:</span> <span class="bp">UIView</span> <span class="p">{</span>
    <span class="kr">override</span> <span class="kd">func</span> <span class="nf">hitTest</span><span class="p">(</span><span class="kc">_</span> <span class="n">point</span><span class="p">:</span> <span class="n">CGPoint</span><span class="p">,</span> <span class="n">with</span> <span class="n">event</span><span class="p">:</span> <span class="bp">UIEvent</span><span class="p">?)</span> <span class="p">-&gt;</span> <span class="bp">UIView</span><span class="p">?</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&quot;enter v1 </span><span class="si">\(</span><span class="n">point</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">super</span><span class="p">.</span><span class="n">hitTest</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">with</span><span class="p">:</span> <span class="n">event</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">View2</span> <span class="p">:</span> <span class="bp">UIView</span> <span class="p">{</span>
    <span class="kr">override</span> <span class="kd">func</span> <span class="nf">hitTest</span><span class="p">(</span><span class="kc">_</span> <span class="n">point</span><span class="p">:</span> <span class="n">CGPoint</span><span class="p">,</span> <span class="n">with</span> <span class="n">event</span><span class="p">:</span> <span class="bp">UIEvent</span><span class="p">?)</span> <span class="p">-&gt;</span> <span class="bp">UIView</span><span class="p">?</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&quot;enter v2, </span><span class="si">\(</span><span class="n">point</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">super</span><span class="p">.</span><span class="n">hitTest</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">with</span><span class="p">:</span> <span class="n">event</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>è¿è¡Œï¼š</p><figure class="vertical-figure" style="flex: 46.42857142857143" ><img width="650" height="700" src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/archives/assets/5b4c2daa70dc2e8941de89fdb19c2bfa.png" alt="image-20220219014246803"/></figure><p>åœ¨ç©ºç™½å¤„(<strong>bottom view</strong>)ç‚¹äº†ä¸€ä¸‹ï¼Œè¾“å‡ºï¼š</p><div class="highlight"><pre><span></span>enter v2, <span class="o">(</span>-48.66007995605469, <span class="m">306</span>.0133361816406<span class="o">)</span>
enter v1, <span class="o">(</span><span class="m">11</span>.339920043945312, <span class="m">366</span>.0133361816406<span class="o">)</span>
enter v2, <span class="o">(</span>-48.66007995605469, <span class="m">306</span>.0133361816406<span class="o">)</span>
enter v1, <span class="o">(</span><span class="m">11</span>.339920043945312, <span class="m">366</span>.0133361816406<span class="o">)</span>
enter v2, <span class="o">(</span>-43.33333333333334, <span class="m">325</span>.3333333333333<span class="o">)</span>
enter v1, <span class="o">(</span><span class="m">16</span>.666666666666657, <span class="m">385</span>.3333333333333<span class="o">)</span>
enter v2, <span class="o">(</span>-43.33333333333334, <span class="m">325</span>.3333333333333<span class="o">)</span>
enter v1, <span class="o">(</span><span class="m">16</span>.666666666666657, <span class="m">385</span>.3333333333333<span class="o">)</span>
</pre></div>
<p>åœ¨çº¢æ¡†ä¸Š(<strong>top view</strong>)ç‚¹ä¸€ä¸‹ï¼Œè¾“å‡ºï¼š</p><div class="highlight"><pre><span></span>enter v2, <span class="o">(</span><span class="m">38</span>.66666666666666, <span class="m">48</span>.66666666666666<span class="o">)</span>
enter v2, <span class="o">(</span><span class="m">38</span>.66666666666666, <span class="m">48</span>.66666666666666<span class="o">)</span>
</pre></div>
<p>åœ¨é»„æ¡†(<strong>middle view</strong>)ç‚¹ä¸€ä¸‹ï¼Œè¾“å‡ºï¼š</p><div class="highlight"><pre><span></span>enter v2, <span class="o">(</span>-31.210678100585938, -27.8685302734375<span class="o">)</span>
enter v2, <span class="o">(</span>-31.210678100585938, -27.8685302734375<span class="o">)</span>
enter v2, <span class="o">(</span>-25.0, -22.333333333333343<span class="o">)</span>
enter v1, <span class="o">(</span><span class="m">35</span>.0, <span class="m">37</span>.66666666666666<span class="o">)</span>
enter v2, <span class="o">(</span>-25.0, -22.333333333333343<span class="o">)</span>
enter v1, <span class="o">(</span><span class="m">35</span>.0, <span class="m">37</span>.66666666666666<span class="o">)</span>
</pre></div>
<ul>
<li>æˆ‘ä»¬çŸ¥é“<code>hitTest</code>æœºåˆ¶æ˜¯äº‹ä»¶ä¼ é€’é“¾ç”±åº•å‘ä¸Šï¼Œå“åº”é“¾ç”±ä¸Šåˆ°ä¸‹ï¼Œ</li>
<li>æ‰€ä»¥æœ€åº•å±‚çš„<strong>bottom view</strong>æœ€å…ˆæ¥åˆ°äº‹ä»¶å°±å¼€å§‹æ‰¾å“åº”è€…</li>
<li>å®ƒå¼€å§‹ä»å®ƒçš„æœ€é¡¶å±‚subviewå¼€å§‹æ‰¾å“åº”è€…(<code>v2</code>)ï¼Œç„¶åå†å¾€ä¸‹(<code>v1</code>)ï¼Œå‡æ²¡æ‰¾åˆ°ï¼Œæ‰€ä»¥å°±æ˜¯è‡ªå·±äº†</li>
<li>ä¸ºä½•è°ƒäº†å››æ¬¡å‘¢ï¼Ÿï¼ˆæœªæ·±ç©¶ï¼‰<blockquote>
Yes, itâ€™s normal. The system may tweak the point being hit tested between the calls. Since hitTest should be a pure function with no side-effects, this should be fine.</blockquote>
</li>
<li>ç¬¬äºŒæ¬¡æµ‹è¯•ï¼Œç›´æ¥åœ¨æœ€é¡¶å±‚viewå°±æ‰¾åˆ°äº†ï¼ˆæ‰€è°“çš„æ‰¾åˆ°ï¼Œå°±æ˜¯ç‚¹å‡»çš„ä½ç½®åœ¨è¿™ä¸ªviewçš„boundså†…ï¼Œåé¢è¯´ï¼‰</li>
<li>è‡³äºä¸ºä»€ä¹ˆåæ ‡ä¼šå˜ï¼Ÿï¼ˆæœªæ·±ç©¶ï¼‰</li>
<li>ç¬¬ä¸‰æ¬¡æµ‹è¯•ï¼Œç‚¹äº†v1ï¼Œå¯ä»¥çœ‹åˆ°æ—¥å¿—ï¼Œåœ¨v2é‚£é‡Œè·‘äº†3æ¬¡ï¼Œå†è·‘äº†v1ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆè¿˜æ˜¯æ²¡è¿”å›ï¼Œè¿˜è·‘äº†ä¸€æ¬¡v2åæ‰è®¤å®šv1</li>
</ul>
<p>å¤§ä½“å¯ä»¥çŸ¥é“hitTestçš„æœºåˆ¶äº†å§ï¼Ÿä»¥ä¼ é€’é“¾çš„ç»ˆç‚¹é‚£ä¸ªviewä¸ºåŸºç¡€ï¼Œåœ¨subviewsé€†å‘éå†ï¼ˆè‡ªé¡¶å‘ä¸‹ï¼‰ï¼Œä¸€ç›´åˆ°è‡ªå·±ã€‚</p><h2>åº”ç”¨1</h2>
<p>æ¥ä¸ªç®€å•åœºæ™¯ï¼Œå¦‚æœé»„è‰²çš„viewæ˜¯æœ‰è§¦æ‘¸äº‹ä»¶çš„ï¼Œå¹¶ä¸”è¦æ±‚è¢«è¦†ç›–çš„åŒºåŸŸä¹Ÿèƒ½å“åº”ï¼Œè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p><p>æ€è€ƒï¼š</p><ul>
<li>æˆ‘ä»¬çŸ¥é“ç‚¹å‡»çš„ä½ç½®ï¼Œè‚¯å®šæ˜¯åœ¨é»„æ¡†èŒƒå›´å†…çš„ï¼Œæ‰€ä»¥è¦çš„å°±æ˜¯ä¸€ä¸ªå…¥å£ï¼Œç”¨æ¥åˆ¤æ–­è¿™ä¸ªç‚¹ä¸é»„æ¡†çš„å…³ç³»ï¼Œä¸€æ—¦ç¡®è®¤ç‚¹çš„èŒƒå›´æ˜¯åœ¨é»„æ¡†é‡Œï¼Œå°±æŠŠè®¤ä¸ºé»„æ¡†æ˜¯äº‹ä»¶å“åº”è€…ã€‚</li>
<li>å› æ­¤æ”¹ä¸‹demoï¼ŒåŠ äº†äº‹ä»¶ï¼Œè¿˜åŠ äº†ä¸€ä¸ªparent viewï¼ˆè¿™æ ·æ‰èƒ½åœ¨ç”¨å±æ€§çš„æ–¹å¼æŠŠé»„æ¡†å¼•ç”¨å‡ºæ¥ï¼‰</li>
</ul>
<div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">ViewController</span><span class="p">:</span> <span class="bp">UIViewController</span> <span class="p">{</span>

    <span class="kr">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="kc">super</span><span class="p">.</span><span class="n">viewDidLoad</span><span class="p">()</span>


        <span class="kd">let</span> <span class="nv">view1</span> <span class="p">=</span> <span class="bp">UIView</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span> <span class="n">CGRect</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="mi">110</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mi">110</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="mi">150</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="mi">150</span><span class="p">))</span>
        <span class="kd">let</span> <span class="nv">view2</span> <span class="p">=</span> <span class="bp">UIView</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span> <span class="n">CGRect</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="mi">170</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mi">170</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="mi">150</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="mi">150</span><span class="p">))</span>
        <span class="n">view1</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="p">=</span> <span class="p">.</span><span class="n">yellow</span>
        <span class="n">view2</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="p">=</span> <span class="p">.</span><span class="n">red</span>

        <span class="kd">let</span> <span class="nv">tap</span> <span class="p">=</span> <span class="bp">UITapGestureRecognizer</span><span class="p">(</span><span class="n">target</span><span class="p">:</span> <span class="kc">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="k">#selector</span><span class="p">(</span><span class="n">tap</span><span class="p">(</span><span class="kc">_</span><span class="p">:)))</span>
        <span class="n">view1</span><span class="p">.</span><span class="n">addGestureRecognizer</span><span class="p">(</span><span class="n">tap</span><span class="p">)</span>
        <span class="n">view1</span><span class="p">.</span><span class="n">isUserInteractionEnabled</span> <span class="p">=</span> <span class="kc">true</span>

        <span class="kd">let</span> <span class="nv">view</span> <span class="p">=</span> <span class="n">View</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="n">view1</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">view2</span><span class="p">)</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">addSubview</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="kr">@objc</span> <span class="kd">func</span> <span class="nf">tap</span><span class="p">(</span><span class="kc">_</span> <span class="n">sender</span><span class="p">:</span> <span class="bp">UIGestureRecognizer</span><span class="p">)</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&quot;view1 taped&quot;</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">View</span><span class="p">:</span> <span class="bp">UIView</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">view1</span><span class="p">:</span> <span class="bp">UIView</span>
    <span class="kd">var</span> <span class="nv">view2</span><span class="p">:</span> <span class="bp">UIView</span>
    <span class="kd">init</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="bp">UIView</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="bp">UIView</span><span class="p">)</span> <span class="p">{</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">view1</span> <span class="p">=</span> <span class="n">a</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">view2</span> <span class="p">=</span> <span class="n">b</span>
        <span class="kc">super</span><span class="p">.</span><span class="kd">init</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span> <span class="bp">UIScreen</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">bounds</span><span class="p">)</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">addSubview</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">addSubview</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="kr">required</span> <span class="kd">init</span><span class="p">?(</span><span class="n">coder</span><span class="p">:</span> <span class="bp">NSCoder</span><span class="p">)</span> <span class="p">{</span>
        <span class="bp">fatalError</span><span class="p">(</span><span class="s">&quot;init(coder:) has not been implemented&quot;</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="kr">override</span> <span class="kd">func</span> <span class="nf">hitTest</span><span class="p">(</span><span class="kc">_</span> <span class="n">point</span><span class="p">:</span> <span class="n">CGPoint</span><span class="p">,</span> <span class="n">with</span> <span class="n">event</span><span class="p">:</span> <span class="bp">UIEvent</span><span class="p">?)</span> <span class="p">-&gt;</span> <span class="bp">UIView</span><span class="p">?</span> <span class="p">{</span>
      <span class="kd">let</span> <span class="nv">loc_v1</span> <span class="p">=</span> <span class="kc">self</span><span class="p">.</span><span class="n">convert</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">to</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">view1</span><span class="p">)</span>
          <span class="c1">// ä¸»è¦å°±æ˜¯è¿™ä¸€å¥</span>
        <span class="k">if</span><span class="p">(</span><span class="kc">self</span><span class="p">.</span><span class="n">view1</span><span class="p">.</span><span class="n">point</span><span class="p">(</span><span class="n">inside</span><span class="p">:</span> <span class="n">loc_v1</span><span class="p">,</span> <span class="n">with</span><span class="p">:</span> <span class="n">event</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">self</span><span class="p">.</span><span class="n">view1</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">super</span><span class="p">.</span><span class="n">hitTest</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">with</span><span class="p">:</span> <span class="n">event</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<ul>
<li><code>let loc_v1 = self.convert(point, to: self.view1)</code>æ„æ€æ˜¯è¿™ä¸ªç‚¹ä»¥view1ä¸ºåæ ‡ç³»çš„ä½ç½®</li>
<li><code>if(self.view1.point(inside: loc_v1, with: event))</code> è¿™å°±æ˜¯åˆ¤æ–­è¿™ä¸ªç‚¹åœ¨ä¸åœ¨view1çš„boundsé‡Œé¢äº†</li>
</ul>
<p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ç®€å•ç²—æš´åœ°â€œé€®ä½æ¯ä¸€ä¸ªæœºä¼šâ€ï¼Œé—®æ˜¯ä¸æ˜¯ä½ ï¼Œæ˜¯ä¸æ˜¯ä½ ã€‚</p><h2>åº”ç”¨2</h2>
<p>å¦‚æœä¸€ä¸ªæŒ‰é’®å¾ˆå°ï¼Œä½ è¦æ‰©å¤§ä»–çš„ç‚¹å‡»åŒºåŸŸæ€ä¹ˆåšï¼Ÿç½‘ä¸Šæœ‰å¾ˆå¤šæ–¹æ³•ï¼Œå…³è”å±æ€§å•Šï¼Œäº¤æ¢æ–¹æ³•å•Šï¼Œå¯ä»¥å»æœæœï¼Œæˆ‘ä»¬è¿™é‡Œç»§ç»­ä¸Šé¢çš„ä¾‹å­ï¼ŒçŸ¥é“æœ‰ä¸€ä¸ª<code>point(inside:with)</code>æ–¹æ³•ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯è¿™ä¸ªç‚¹åœ¨ä¸åœ¨æˆ‘çš„è§†å›¾åŒºåŸŸå†…</p><p>å®ƒå½“ç„¶ä¹Ÿæ˜¯å¯ä»¥è¢«é‡å†™ï¼Œè‡ªå®šä¹‰åœ¨ä»€ä¹ˆæ ·çš„èŒƒå›´å†…ï¼Œéƒ½ç®—<code>inside</code>ï¼Œä¸‹é¢æ˜¯ç½‘ä¸ŠæŠ„çš„ä¸€æ®µä»£ç </p>
<pre><code>- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent*)event {
   //è·å–å½“å‰buttonçš„å®é™…å¤§å°
    CGRect bounds = self.bounds;
    //è‹¥åŸçƒ­åŒºå°äº44x44ï¼Œåˆ™æ”¾å¤§çƒ­åŒºï¼Œå¦åˆ™ä¿æŒåŸå¤§å°ä¸å˜
    CGFloat widthDelta = MAX(44.0 - bounds.size.width, 0);
    CGFloat heightDelta = MAX(44.0 - bounds.size.height, 0);
    //æ‰©å¤§bounds
    bounds = CGRectInset(bounds, -0.5 * widthDelta, -0.5 * heightDelta);
    //å¦‚æœç‚¹å‡»çš„ç‚¹ åœ¨ æ–°çš„boundsé‡Œï¼Œå°±è¿”å›YES
    return CGRectContainsPoint(bounds, point);
}
</code></pre>
<p>è¿™ä¸ªä¾‹å­ä¸»è¦å°±æ˜¯åˆ©ç”¨åº•å±‚çš„<code>CGRectContainsPoint</code>æ–¹æ³•ï¼Œä¼ å…¥äº†æ–°çš„<code>bounds</code>ï¼Œå¯ä»¥ç†è§£ä¸ºäººä¸ºä¿®æ”¹å…¥å‚å§ã€‚ä»£ç ä¹Ÿå¾ˆæ˜ç¡®äº†ï¼Œè‡ªå·±æ ¹æ®å½“å‰çš„boundsåˆç†åšä¸€ä¸ªå¤§ä¸€ç‚¹çš„boundsï¼Œäº¤ç»™ç³»ç»Ÿå»åšå°±è¡Œäº†ã€‚</p>
            </div>
        </article>
        <div class="prism-post-meta col-md-8 offset-md-2">
    <span>walker</span>
    
    <span>/</span>
    <span>
        <a class="category no-link" href="/category/posts/" target="_self">
        posts
        </a>
    </span>
    
    
    <span>/</span>
    
    <span class="prism-tag">
        <a class="no-link" href="/tag/hitTest/" target="_self">#hitTest</a>
    </span>
    
    
    
    <span>/</span>
    <span class="leancloud_visitors" id="/archives/hittest/" data-flag-title="hitTestç¤ºä¾‹"><span class="leancloud-visitors-count"></span> Views</span>
    
</div>
    </section>

    
<section id="prism__pagination" class="prism-pagination" class="col-md-8 offset-md-2">
    <ul>
        
        <li class="next">
            <a class="no-link" href="/archives/cocoapods_private_library/" target="_self" title="CocoaPodsåˆ›å»ºç§æœ‰åº“è¿‡ç¨‹æ‹¾é—"><i class="fa fa-chevron-left" aria-hidden="true"></i>Newer</a>
        </li>
        
        
        <li class="prev">
            <a class="no-link" href="/archives/Layer/" target="_self" title="Programming iOS 14 - Layer">Older<i class="fa fa-chevron-right" aria-hidden="true"></i></a>
        </li>
        
    </ul>
</section>


    
    <script>
        var initValine = function() {
            new Valine({"enable": true, "el": "#vcomments", "appId": "7tP92LoqK2cggW61DvJmWBo0-gzGzoHsz", "appKey": "iQCtrtlr8eKrQllM03GMESMJ", "visitor": true, "recordIP": true});
        }

    </script>
    <script defer src='https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js' onload="initValine()"></script>
    <div class="prism-comment-section container" id="prism__comment">
        <div class="row">
            <div class="col-md-8 offset-md-2">
                <div id="vcomments"></div>
            </div>
        </div>
    </div>
    

</main>

            <footer id="prism__footer">
                <section>
                    <div>
                        <nav class="social-links">
                            <ul><li><a class="no-link" title="Twitter" href="https://twitter.com/walkerwzy" target="_blank" rel="noopener noreferrer nofollow"><i class="gi gi-twitter"></i></a></li><li><a class="no-link" title="GitHub" href="https://github.com/walkerwzy" target="_blank" rel="noopener noreferrer nofollow"><i class="gi gi-github"></i></a></li><li><a class="no-link" title="Weibo" href="https://weibo.com/1071696872" target="_blank" rel="noopener noreferrer nofollow"><i class="gi gi-weibo"></i></a></li></ul>
                        </nav>
                    </div>

                    <section id="prism__external_links">
                        <ul>
                            
                            <li>
                                <a class="no-link" target="_blank" href="https://github.com/AlanDecode/Maverick" rel="noopener noreferrer nofollow">Maverick</a>ï¼šğŸ„â€ Go My Own Way.
                                <span>|</span>
                            </li>
                            
                            <li>
                                <a class="no-link" target="_blank" href="https://www.imalan.cn" rel="noopener noreferrer nofollow">Triple NULL</a>ï¼šHome page for AlanDecode.
                                <span>|</span>
                            </li>
                            
                        </ul>
                    </section>

                    <div class="copyright">
                        <p class="copyright-text">
                            <span class="brand">walker's code blog</span>
                            <span>Copyright Â© 2022 AlanDecode</span>
                        </p>
                        <p class="copyright-text powered-by">
                            | Powered by <a href="https://github.com/AlanDecode/Maverick" class="no-link" target="_blank" rel="noopener noreferrer nofollow">Maverick</a> | Theme <a href="https://github.com/Reedo0910/Maverick-Theme-Prism" target="_blank" class="no-link" rel="noopener noreferrer nofollow">Prism</a>
                        </p>
                    </div>
                    <div class="footer-addon">
                        
                    </div>
                </section>
                <script>
                    var site_build_date = "2019-12-06T12:00+08:00"

                </script>
                <script src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/prism-efa8685153.js"></script>
            </footer>
        </div>
    </div>
    </div>

    <script src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/ExSearch/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/ExSearch/ExSearch-493cb9cd89.js"></script>

    <!--katex-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/katex.min.js"></script>
    <script>
        mathOpts = {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "\\[", right: "\\]", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false }
            ]
        };

    </script>
    <script defer src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/auto-render.min.js" onload="renderMathInElement(document.body, mathOpts);"></script>

    
</body>

</html>