<!DOCTYPE HTML>
<html lang="english">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="true">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Maverick,AlanDecode,Galileo,blog" />
    <meta name="generator" content="Maverick 1.2.1" />
    <meta name="template" content="Prism" />
    <link rel="alternate" type="application/rss+xml" title="walker's code blog &raquo; RSS 2.0" href="/feed/index.xml" />
    <link rel="alternate" type="application/atom+xml" title="walker's code blog &raquo; ATOM 1.0" href="/feed/atom/index.xml" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/prism-b9d78ff38a.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/ExSearch/ExSearch-182e5a8869.css">
    <link href="https://fonts.googleapis.com/css?family=Fira+Code&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
    <script>
        var ExSearchConfig = {
            root: "",
            api: "https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/f936562262a4e7a521f97d6cbfa2ba93.json"
        }

    </script>
    
<title>é‡è£…macç³»ç»Ÿåsshå¼‚å¸¸ - walker's code blog</title>
<meta name="author" content="walker" />
<meta name="description" content="è¡¨ç°åœ¨ä¸¤ä¸ªæ–¹é¢: ssh ç™»å½•æœåŠ¡å™¨, å’Œé€šè¿‡ssh ä½¿ç”¨ git, æŠ¥çš„é”™éƒ½æ˜¯Permissino denied (publickey)gitå¼‚å¸¸çš„è§£å†³" />
<meta property="og:title" content="é‡è£…macç³»ç»Ÿåsshå¼‚å¸¸ - walker's code blog" />
<meta property="og:description" content="è¡¨ç°åœ¨ä¸¤ä¸ªæ–¹é¢: ssh ç™»å½•æœåŠ¡å™¨, å’Œé€šè¿‡ssh ä½¿ç”¨ git, æŠ¥çš„é”™éƒ½æ˜¯Permissino denied (publickey)gitå¼‚å¸¸çš„è§£å†³" />
<meta property="og:site_name" content="walker's code blog" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/archives/%E9%87%8D%E8%A3%85mac%E7%B3%BB%E7%BB%9F%E5%90%8Essh%E5%BC%82%E5%B8%B8/" />
<meta property="og:image" content="" />
<meta property="article:published_time" content="2019-08-03T00:00:00-00.00" />
<meta name="twitter:title" content="é‡è£…macç³»ç»Ÿåsshå¼‚å¸¸ - walker's code blog" />
<meta name="twitter:description" content="è¡¨ç°åœ¨ä¸¤ä¸ªæ–¹é¢: ssh ç™»å½•æœåŠ¡å™¨, å’Œé€šè¿‡ssh ä½¿ç”¨ git, æŠ¥çš„é”™éƒ½æ˜¯Permissino denied (publickey)gitå¼‚å¸¸çš„è§£å†³" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="" />


    
</head>

<body>
    <div class="container prism-container">
        <header class="prism-header" id="prism__header">
            <h1 class="text-uppercase brand"><a class="no-link" href="/" target="_self">walker's code blog</a></h1>
            <p>coder, reader</p>
            <nav class="prism-nav"><ul><li><a class="no-link text-uppercase " href="/" target="_self">Home</a></li><li><a class="no-link text-uppercase " href="/archives/" target="_self">Archives</a></li><li><a class="no-link text-uppercase " href="/about/" target="_self">About</a></li><li><a href="#" target="_self" class="search-form-input no-link text-uppercase">Search</a></li></ul></nav>
        </header>
        <div class="prism-wrapper" id="prism__wrapper">
            
<main>
    <section class="prism-section row" id="prism__content">
        <article class="yue col-md-8 offset-md-2">
            <h1 class="prism-post-title">é‡è£…macç³»ç»Ÿåsshå¼‚å¸¸</h1>
            <div class="prism-post-time">
                <time class="text-uppercase">
                    August 03 2019
                </time>
            </div>
            <div class="prism-content-body">
                <p>è¡¨ç°åœ¨ä¸¤ä¸ªæ–¹é¢: <code>ssh ç™»å½•æœåŠ¡å™¨</code>, å’Œ<code>é€šè¿‡ssh ä½¿ç”¨ git</code>, æŠ¥çš„é”™éƒ½æ˜¯<code>Permissino denied (publickey)</code></p><h2>gitå¼‚å¸¸çš„è§£å†³</h2>
<p>æ ¹æ®<a href="https://help.github.com/articles/error-permission-denied-publickey/">githubæ–‡æ¡£</a>, æˆ‘å¯ä»¥è§£å†³ç¬¬äºŒä¸ªé—®é¢˜, ç¬¬ä¸€ä¸ªé—®é¢˜(ssh login)è§£å†³åå†æ¥æ›´æ–°.</p><p>ä½¿ç”¨gitå‡ºç°é—®é¢˜, å¹¶ä¸å±€é™äº github, æˆ‘è¿ gitlab ä¹Ÿæ˜¯ä¸€æ ·. å…¶å®æ ¹æ®æ–‡æ¡£ä¸€é¡¹é¡¹æ£€æµ‹,æˆ‘åœ¨<code>ssh-add -l</code>è¿™ä¸€å¥å‘ç°äº†é—®é¢˜, è™½ç„¶æˆ‘ç”Ÿæˆäº†å¯†é’¥, ä½†æ˜¯å®ƒçš„è¾“å‡ºæ˜¾ç¤ºæˆ‘æ²¡æœ‰ç§é’¥, ç…§å¦‚ä¸‹è§£å†³å³å¯:</p><blockquote>
<p><strong>Tip</strong>: On most systems the default private keys (~/.ssh/id_rsa</p></blockquote>
<p>, ~/.ssh/id_dsa and ~/.ssh/identity) are <strong>automatically</strong> added to the SSH authentication agent. You shouldn't need to run <code>ssh-add path/to/key</code>
 unless you override the file name when you generate a key.</p><p>ä¹Ÿå°±æ˜¯è¯´, æŠŠä½ çš„id_rsaæ–‡ä»¶æ‰‹åŠ¨æŒ‡å®šä¸€ä¸‹<code>ssh_add æ–‡ä»¶è·¯å¾„</code>(ä¸çŸ¥é“ä¸ºä»€ä¹ˆä¼šå‡ºè¿™ç§é¬¼é—®é¢˜)</p><h2>SSHè‡ªåŠ¨ç™»å½•å¼‚å¸¸çš„è§£å†³</h2>
<p>è¿™æ˜¯è¡¥å……çš„å†…å®¹, åˆšåˆšè§£å†³.</p><p>é¦–å…ˆ, ä½ ç™»ä¸ä¸Šè¿™æ˜¯æœåŠ¡ç«¯çš„é—®é¢˜, æ²¡æœ‰æŠŠä½ çš„å…¬é’¥å†™åˆ°<code>~/.ssh/authorized_keys</code>é‡Œé¢å», ä½ æƒ³åŠæ³•æŠŠå®ƒå†™è¿›å»(å½“ä½  <code>ssh</code> ä¸ä¸Šå»çš„æ—¶å€™, <code>scp</code>å½“ç„¶ä¹Ÿä¸è¡Œ)</p><p>å†™è¿›å»å, ä»ç„¶æŠ¥é”™, æˆ‘ä»¬ç»§ç»­çœ‹æ—¥å¿—:
<code>ssh root@mydomain.com -v</code> æˆ– <code>ssh root@mydomain.com -vvv</code> (æ›´è¯¦ç»†çš„æ—¥å¿—)</p><p>é€šè¿‡çœ‹æ—¥å¿—, ä½ å¯ä»¥ä¸€æ­¥æ­¥çœ‹åˆ°é—®é¢˜:</p>
<pre><code>...
debug2: service_accept: ssh-userauth
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug3: send packet: type 50
debug3: receive packet: type 51
debug1: Authentications that can continue: publickey
debug3: start over, passed a different list publickey
debug3: preferred publickey,keyboard-interactive,password
debug3: authmethod_lookup publickey
debug3: remaining preferred: keyboard-interactive,password
debug3: authmethod_is_enabled publickey
debug1: Next authentication method: publickey
debug1: Trying private key: .ssh/id_rsa
debug3: no such identity: .ssh/id_rsa: No such file or directory
debug2: we did not send a packet, disable method
debug1: No more authentication methods to try.
Permission denied (publickey).
</code></pre>
<p>æ³¨æ„æˆªå–çš„<strong>å€’æ•°ç¬¬4è¡Œ</strong>:
é¦–å…ˆ, å®ƒæ˜¨å¤©ä¸æ˜¯è¿™ä¹ˆæç¤ºçš„, å®ƒæç¤ºçš„æ˜¯<code>.ssh/id_rsd</code>, æˆ‘åˆ°é…ç½®æ–‡ä»¶é‡ŒæŠŠå®ƒæ”¹æˆäº†<code>rsa</code>, å› ä¸ºæˆ‘ç”Ÿæˆçš„æ˜¯ <code>rsa</code></p><blockquote>
<p>é…ç½®æ–‡ä»¶çš„åœ°å€æ˜¯: <code>/etc/ssh/ssh_config</code>, æ”¹çš„èŠ‚ç‚¹åæ˜¯<code>IdentityFile</code></p></blockquote>
<p>å…¶æ¬¡, é¡ºä¾¿çœ‹ä¸€ä¸‹<code>RSAAuthentication</code> å’Œ <code>PubkeyAuthentication</code>è¿™ä¸¤é¡¹æ˜¯ä¸æ˜¯ yes(å¦‚æœæ˜¯æ³¨é‡ŠçŠ¶æ€, ä¸è¦åŠ¨, é»˜è®¤æ˜¯ yes)</p><p>è¿™æ ·, æœåŠ¡ç«¯æœ‰ä½ çš„å…¬é’¥, æœ¬åœ°é…ç½®äº† <code>IdentityFile</code> è·¯å¾„, å°±å¯ä»¥ç™»å½•äº†, ä½†æˆ‘ä¸€ç›´æ²¡æˆåŠŸçš„åŸå› åœ¨äº, æˆ‘åœ¨åŸé…ç½®æ–‡ä»¶æ”¹çš„, å®ƒæ˜¯è·¯å¾„æ˜¯<code>.ssh/id_rsa,.ssh/id_rsd</code>, æˆ‘å•çº¯æŠŠ rsd çš„å»æ‰, å´æ²¡å‘ç°å®ƒçš„è·¯å¾„æ˜¯é”™çš„, ç›´åˆ°çœ‹äº†æ—¥å¿—æç¤ºè¿™ä¸ªæ–‡ä»¶ä¸å­˜åœ¨, æ‰æƒ³èµ·æŠŠæ ¼å¼æ”¹å¯¹.</p><p>æˆ‘ç¢°åˆ°çš„æƒ…å†µä¸çŸ¥é“æ˜¯ä¸æ˜¯ä¸ªä¾‹, æ¯”å¦‚åŒä¸€ä¸ªæ–‡ä»¶</p>
<pre><code>UserKnownHostsFile ~/.ssh/known_hosts,~/.ssh/known_hosts2
</code></pre>
<p>è¿™ä¸€è¡Œ, è·¯å¾„æ ¼å¼å´æ˜¯æ­£ç¡®çš„, åŒªå¤·æ‰€æ€.</p><p>æ€»ä¹‹, ä½ ç¢°åˆ°<code>Permission denied (public key)</code>è¿™ä¸ªé—®é¢˜, å°±ç»“åˆ git å’Œ server è¿™ä¸¤æƒ…å†µ, çœ‹æ˜¯æ²¡æœ‰ identity, è¿˜æ˜¯ id_rsaè·¯å¾„é…é”™äº†. (å‰ææ˜¯å…¬é’¥å¿…é¡»å·²ç»å†™åˆ°æœåŠ¡å™¨ä¸Šå»äº†)</p>
            </div>
        </article>
        <div class="prism-post-meta col-md-8 offset-md-2">
    <span>walker</span>
    
    <span>/</span>
    <span>
        <a class="category no-link" href="/category/posts/" target="_self">
        posts
        </a>
    </span>
    
    
    <span>/</span>
    
    <span class="prism-tag">
        <a class="no-link" href="/tag/macos/" target="_self">#macos</a>
    </span>
    
    <span class="prism-tag">
        <a class="no-link" href="/tag/ssh/" target="_self">#ssh</a>
    </span>
    
    
    
    <span>/</span>
    <span class="leancloud_visitors" id="/archives/%E9%87%8D%E8%A3%85mac%E7%B3%BB%E7%BB%9F%E5%90%8Essh%E5%BC%82%E5%B8%B8/" data-flag-title="é‡è£…macç³»ç»Ÿåsshå¼‚å¸¸"><span class="leancloud-visitors-count"></span> Views</span>
    
</div>
    </section>

    
<section id="prism__pagination" class="prism-pagination" class="col-md-8 offset-md-2">
    <ul>
        
        <li class="next">
            <a class="no-link" href="/archives/%E5%85%B3%E4%BA%8E%40synthesize/" target="_self" title="å…³äº@synthesize"><i class="fa fa-chevron-left" aria-hidden="true"></i>Newer</a>
        </li>
        
        
        <li class="prev">
            <a class="no-link" href="/archives/%E5%A4%87%E4%BB%BDNginx%E8%AE%BE%E7%BD%AEphp%E7%9A%84%E6%96%B9%E6%B3%95/" target="_self" title="å¤‡ä»½Nginxè®¾ç½®phpçš„æ–¹æ³•">Older<i class="fa fa-chevron-right" aria-hidden="true"></i></a>
        </li>
        
    </ul>
</section>


    
    <script>
        var initValine = function() {
            new Valine({"enable": true, "el": "#vcomments", "appId": "7tP92LoqK2cggW61DvJmWBo0-gzGzoHsz", "appKey": "iQCtrtlr8eKrQllM03GMESMJ", "visitor": true, "recordIP": true});
        }

    </script>
    <script defer src='https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js' onload="initValine()"></script>
    <div class="prism-comment-section container" id="prism__comment">
        <div class="row">
            <div class="col-md-8 offset-md-2">
                <div id="vcomments"></div>
            </div>
        </div>
    </div>
    

</main>

            <footer id="prism__footer">
                <section>
                    <div>
                        <nav class="social-links">
                            <ul><li><a class="no-link" title="Twitter" href="https://twitter.com/walkerwzy" target="_blank" rel="noopener noreferrer nofollow"><i class="gi gi-twitter"></i></a></li><li><a class="no-link" title="GitHub" href="https://github.com/walkerwzy" target="_blank" rel="noopener noreferrer nofollow"><i class="gi gi-github"></i></a></li><li><a class="no-link" title="Weibo" href="https://weibo.com/1071696872" target="_blank" rel="noopener noreferrer nofollow"><i class="gi gi-weibo"></i></a></li></ul>
                        </nav>
                    </div>

                    <section id="prism__external_links">
                        <ul>
                            
                            <li>
                                <a class="no-link" target="_blank" href="https://github.com/AlanDecode/Maverick" rel="noopener noreferrer nofollow">Maverick</a>ï¼šğŸ„â€ Go My Own Way.
                                <span>|</span>
                            </li>
                            
                            <li>
                                <a class="no-link" target="_blank" href="https://www.imalan.cn" rel="noopener noreferrer nofollow">Triple NULL</a>ï¼šHome page for AlanDecode.
                                <span>|</span>
                            </li>
                            
                        </ul>
                    </section>

                    <div class="copyright">
                        <p class="copyright-text">
                            <span class="brand">walker's code blog</span>
                            <span>Copyright Â© 2022 AlanDecode</span>
                        </p>
                        <p class="copyright-text powered-by">
                            | Powered by <a href="https://github.com/AlanDecode/Maverick" class="no-link" target="_blank" rel="noopener noreferrer nofollow">Maverick</a> | Theme <a href="https://github.com/Reedo0910/Maverick-Theme-Prism" target="_blank" class="no-link" rel="noopener noreferrer nofollow">Prism</a>
                        </p>
                    </div>
                    <div class="footer-addon">
                        
                    </div>
                </section>
                <script>
                    var site_build_date = "2019-12-06T12:00+08:00"

                </script>
                <script src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/prism-efa8685153.js"></script>
            </footer>
        </div>
    </div>
    </div>

    <script src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/ExSearch/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/ExSearch/ExSearch-493cb9cd89.js"></script>

    <!--katex-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/katex.min.js"></script>
    <script>
        mathOpts = {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "\\[", right: "\\]", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false }
            ]
        };

    </script>
    <script defer src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/auto-render.min.js" onload="renderMathInElement(document.body, mathOpts);"></script>

    
</body>

</html>